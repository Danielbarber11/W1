(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function cb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lf={exports:{}},qr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function db(){if(f_)return qr;f_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:o,key:c,ref:r!==void 0?r:null,props:a}}return qr.Fragment=e,qr.jsx=n,qr.jsxs=n,qr}var h_;function fb(){return h_||(h_=1,lf.exports=db()),lf.exports}var C=fb(),af={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function hb(){if(p_)return he;p_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function A(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,x={};function O(w,V,K){this.props=w,this.context=V,this.refs=x,this.updater=K||I}O.prototype.isReactComponent={},O.prototype.setState=function(w,V){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,V,"setState")},O.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function z(){}z.prototype=O.prototype;function B(w,V,K){this.props=w,this.context=V,this.refs=x,this.updater=K||I}var Y=B.prototype=new z;Y.constructor=B,M(Y,O.prototype),Y.isPureReactComponent=!0;var X=Array.isArray;function $(){}var J={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function j(w,V,K){var ne=K.ref;return{$$typeof:t,type:w,key:V,ref:ne!==void 0?ne:null,props:K}}function ce(w,V){return j(w.type,V,w.props)}function Z(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function Se(w){var V={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(K){return V[K]})}var oe=/\/+/g;function Be(w,V){return typeof w=="object"&&w!==null&&w.key!=null?Se(""+w.key):V.toString(36)}function lt(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then($,$):(w.status="pending",w.then(function(V){w.status==="pending"&&(w.status="fulfilled",w.value=V)},function(V){w.status==="pending"&&(w.status="rejected",w.reason=V)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function P(w,V,K,ne,pe){var ve=typeof w;(ve==="undefined"||ve==="boolean")&&(w=null);var Ue=!1;if(w===null)Ue=!0;else switch(ve){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(w.$$typeof){case t:case e:Ue=!0;break;case _:return Ue=w._init,P(Ue(w._payload),V,K,ne,pe)}}if(Ue)return pe=pe(w),Ue=ne===""?"."+Be(w,0):ne,X(pe)?(K="",Ue!=null&&(K=Ue.replace(oe,"$&/")+"/"),P(pe,V,K,"",function(Ws){return Ws})):pe!=null&&(Z(pe)&&(pe=ce(pe,K+(pe.key==null||w&&w.key===pe.key?"":(""+pe.key).replace(oe,"$&/")+"/")+Ue)),V.push(pe)),1;Ue=0;var wt=ne===""?".":ne+":";if(X(w))for(var je=0;je<w.length;je++)ne=w[je],ve=wt+Be(ne,je),Ue+=P(ne,V,K,ve,pe);else if(je=A(w),typeof je=="function")for(w=je.call(w),je=0;!(ne=w.next()).done;)ne=ne.value,ve=wt+Be(ne,je++),Ue+=P(ne,V,K,ve,pe);else if(ve==="object"){if(typeof w.then=="function")return P(lt(w),V,K,ne,pe);throw V=String(w),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function q(w,V,K){if(w==null)return w;var ne=[],pe=0;return P(w,ne,"","",function(ve){return V.call(K,ve,pe++)}),ne}function ee(w){if(w._status===-1){var V=w._result;V=V(),V.then(function(K){(w._status===0||w._status===-1)&&(w._status=1,w._result=K)},function(K){(w._status===0||w._status===-1)&&(w._status=2,w._result=K)}),w._status===-1&&(w._status=0,w._result=V)}if(w._status===1)return w._result.default;throw w._result}var le=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},ge={map:q,forEach:function(w,V,K){q(w,function(){V.apply(this,arguments)},K)},count:function(w){var V=0;return q(w,function(){V++}),V},toArray:function(w){return q(w,function(V){return V})||[]},only:function(w){if(!Z(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return he.Activity=v,he.Children=ge,he.Component=O,he.Fragment=n,he.Profiler=r,he.PureComponent=B,he.StrictMode=o,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,he.__COMPILER_RUNTIME={__proto__:null,c:function(w){return J.H.useMemoCache(w)}},he.cache=function(w){return function(){return w.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(w,V,K){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ne=M({},w.props),pe=w.key;if(V!=null)for(ve in V.key!==void 0&&(pe=""+V.key),V)!fe.call(V,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&V.ref===void 0||(ne[ve]=V[ve]);var ve=arguments.length-2;if(ve===1)ne.children=K;else if(1<ve){for(var Ue=Array(ve),wt=0;wt<ve;wt++)Ue[wt]=arguments[wt+2];ne.children=Ue}return j(w.type,pe,ne)},he.createContext=function(w){return w={$$typeof:c,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:a,_context:w},w},he.createElement=function(w,V,K){var ne,pe={},ve=null;if(V!=null)for(ne in V.key!==void 0&&(ve=""+V.key),V)fe.call(V,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(pe[ne]=V[ne]);var Ue=arguments.length-2;if(Ue===1)pe.children=K;else if(1<Ue){for(var wt=Array(Ue),je=0;je<Ue;je++)wt[je]=arguments[je+2];pe.children=wt}if(w&&w.defaultProps)for(ne in Ue=w.defaultProps,Ue)pe[ne]===void 0&&(pe[ne]=Ue[ne]);return j(w,ve,pe)},he.createRef=function(){return{current:null}},he.forwardRef=function(w){return{$$typeof:h,render:w}},he.isValidElement=Z,he.lazy=function(w){return{$$typeof:_,_payload:{_status:-1,_result:w},_init:ee}},he.memo=function(w,V){return{$$typeof:p,type:w,compare:V===void 0?null:V}},he.startTransition=function(w){var V=J.T,K={};J.T=K;try{var ne=w(),pe=J.S;pe!==null&&pe(K,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then($,le)}catch(ve){le(ve)}finally{V!==null&&K.types!==null&&(V.types=K.types),J.T=V}},he.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},he.use=function(w){return J.H.use(w)},he.useActionState=function(w,V,K){return J.H.useActionState(w,V,K)},he.useCallback=function(w,V){return J.H.useCallback(w,V)},he.useContext=function(w){return J.H.useContext(w)},he.useDebugValue=function(){},he.useDeferredValue=function(w,V){return J.H.useDeferredValue(w,V)},he.useEffect=function(w,V){return J.H.useEffect(w,V)},he.useEffectEvent=function(w){return J.H.useEffectEvent(w)},he.useId=function(){return J.H.useId()},he.useImperativeHandle=function(w,V,K){return J.H.useImperativeHandle(w,V,K)},he.useInsertionEffect=function(w,V){return J.H.useInsertionEffect(w,V)},he.useLayoutEffect=function(w,V){return J.H.useLayoutEffect(w,V)},he.useMemo=function(w,V){return J.H.useMemo(w,V)},he.useOptimistic=function(w,V){return J.H.useOptimistic(w,V)},he.useReducer=function(w,V,K){return J.H.useReducer(w,V,K)},he.useRef=function(w){return J.H.useRef(w)},he.useState=function(w){return J.H.useState(w)},he.useSyncExternalStore=function(w,V,K){return J.H.useSyncExternalStore(w,V,K)},he.useTransition=function(){return J.H.useTransition()},he.version="19.2.3",he}var m_;function hh(){return m_||(m_=1,af.exports=hb()),af.exports}var re=hh();const pb=cb(re);var uf={exports:{}},Fr={},cf={exports:{}},df={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function mb(){return g_||(g_=1,(function(t){function e(P,q){var ee=P.length;P.push(q);e:for(;0<ee;){var le=ee-1>>>1,ge=P[le];if(0<r(ge,q))P[le]=q,P[ee]=ge,ee=le;else break e}}function n(P){return P.length===0?null:P[0]}function o(P){if(P.length===0)return null;var q=P[0],ee=P.pop();if(ee!==q){P[0]=ee;e:for(var le=0,ge=P.length,w=ge>>>1;le<w;){var V=2*(le+1)-1,K=P[V],ne=V+1,pe=P[ne];if(0>r(K,ee))ne<ge&&0>r(pe,K)?(P[le]=pe,P[ne]=ee,le=ne):(P[le]=K,P[V]=ee,le=V);else if(ne<ge&&0>r(pe,ee))P[le]=pe,P[ne]=ee,le=ne;else break e}}return q}function r(P,q){var ee=P.sortIndex-q.sortIndex;return ee!==0?ee:P.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],_=1,v=null,E=3,A=!1,I=!1,M=!1,x=!1,O=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Y(P){for(var q=n(p);q!==null;){if(q.callback===null)o(p);else if(q.startTime<=P)o(p),q.sortIndex=q.expirationTime,e(g,q);else break;q=n(p)}}function X(P){if(M=!1,Y(P),!I)if(n(g)!==null)I=!0,$||($=!0,Se());else{var q=n(p);q!==null&&lt(X,q.startTime-P)}}var $=!1,J=-1,fe=5,j=-1;function ce(){return x?!0:!(t.unstable_now()-j<fe)}function Z(){if(x=!1,$){var P=t.unstable_now();j=P;var q=!0;try{e:{I=!1,M&&(M=!1,z(J),J=-1),A=!0;var ee=E;try{t:{for(Y(P),v=n(g);v!==null&&!(v.expirationTime>P&&ce());){var le=v.callback;if(typeof le=="function"){v.callback=null,E=v.priorityLevel;var ge=le(v.expirationTime<=P);if(P=t.unstable_now(),typeof ge=="function"){v.callback=ge,Y(P),q=!0;break t}v===n(g)&&o(g),Y(P)}else o(g);v=n(g)}if(v!==null)q=!0;else{var w=n(p);w!==null&&lt(X,w.startTime-P),q=!1}}break e}finally{v=null,E=ee,A=!1}q=void 0}}finally{q?Se():$=!1}}}var Se;if(typeof B=="function")Se=function(){B(Z)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Be=oe.port2;oe.port1.onmessage=Z,Se=function(){Be.postMessage(null)}}else Se=function(){O(Z,0)};function lt(P,q){J=O(function(){P(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(P){switch(E){case 1:case 2:case 3:var q=3;break;default:q=E}var ee=E;E=q;try{return P()}finally{E=ee}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(P,q){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=E;E=P;try{return q()}finally{E=ee}},t.unstable_scheduleCallback=function(P,q,ee){var le=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,P){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ee+ge,P={id:_++,callback:q,priorityLevel:P,startTime:ee,expirationTime:ge,sortIndex:-1},ee>le?(P.sortIndex=ee,e(p,P),n(g)===null&&P===n(p)&&(M?(z(J),J=-1):M=!0,lt(X,ee-le))):(P.sortIndex=ge,e(g,P),I||A||(I=!0,$||($=!0,Se()))),P},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(P){var q=E;return function(){var ee=E;E=q;try{return P.apply(this,arguments)}finally{E=ee}}}})(df)),df}var y_;function gb(){return y_||(y_=1,cf.exports=mb()),cf.exports}var ff={exports:{}},Et={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function yb(){if(__)return Et;__=1;var t=hh();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:g,containerInfo:p,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Et.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Et.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,_)},Et.flushSync=function(g){var p=c.T,_=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=p,o.p=_,o.d.f()}},Et.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},Et.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},Et.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,v=h(_,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:A}):_==="script"&&o.d.X(g,{crossOrigin:v,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Et.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},Et.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=h(_,p.crossOrigin);o.d.L(g,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Et.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=h(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},Et.requestFormReset=function(g){o.d.r(g)},Et.unstable_batchedUpdates=function(g,p){return g(p)},Et.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},Et.useFormStatus=function(){return c.H.useHostTransitionStatus()},Et.version="19.2.3",Et}var v_;function _b(){if(v_)return ff.exports;v_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ff.exports=yb(),ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function vb(){if(E_)return Fr;E_=1;var t=gb(),e=hh(),n=_b();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(a(i)!==i)throw Error(o(188))}function p(i){var s=i.alternate;if(!s){if(s=a(i),s===null)throw Error(o(188));return s!==i?null:i}for(var l=i,u=s;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return g(m),i;if(y===u)return g(m),s;y=y.sibling}throw Error(o(188))}if(l.return!==u.return)l=m,u=y;else{for(var T=!1,S=m.child;S;){if(S===l){T=!0,l=m,u=y;break}if(S===u){T=!0,u=m,l=y;break}S=S.sibling}if(!T){for(S=y.child;S;){if(S===l){T=!0,l=y,u=m;break}if(S===u){T=!0,u=y,l=m;break}S=S.sibling}if(!T)throw Error(o(189))}}if(l.alternate!==u)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function Se(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Symbol.for("react.client.reference");function Be(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===oe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case O:return"Profiler";case x:return"StrictMode";case X:return"Suspense";case $:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case B:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case Y:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case J:return s=i.displayName||null,s!==null?s:Be(i.type)||"Memo";case fe:s=i._payload,i=i._init;try{return Be(i(s))}catch{}}return null}var lt=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},le=[],ge=-1;function w(i){return{current:i}}function V(i){0>ge||(i.current=le[ge],le[ge]=null,ge--)}function K(i,s){ge++,le[ge]=i.current,i.current=s}var ne=w(null),pe=w(null),ve=w(null),Ue=w(null);function wt(i,s){switch(K(ve,s),K(pe,i),K(ne,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Ly(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Ly(s),i=Py(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(ne),K(ne,i)}function je(){V(ne),V(pe),V(ve)}function Ws(i){i.memoizedState!==null&&K(Ue,i);var s=ne.current,l=Py(s,i.type);s!==l&&(K(pe,i),K(ne,l))}function Tl(i){pe.current===i&&(V(ne),V(pe)),Ue.current===i&&(V(Ue),Or._currentValue=ee)}var Fu,dp;function Zi(i){if(Fu===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Fu=s&&s[1]||"",dp=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fu+i+dp}var Bu=!1;function zu(i,s){if(!i||Bu)return"";Bu=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(L){var U=L}Reflect.construct(i,[],F)}else{try{F.call()}catch(L){U=L}i.call(F.prototype)}}else{try{throw Error()}catch(L){U=L}(F=i())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(L){if(L&&U&&typeof L.stack=="string")return[L.stack,U.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],S=y[1];if(T&&S){var b=T.split(`
`),k=S.split(`
`);for(m=u=0;u<b.length&&!b[u].includes("DetermineComponentFrameRoot");)u++;for(;m<k.length&&!k[m].includes("DetermineComponentFrameRoot");)m++;if(u===b.length||m===k.length)for(u=b.length-1,m=k.length-1;1<=u&&0<=m&&b[u]!==k[m];)m--;for(;1<=u&&0<=m;u--,m--)if(b[u]!==k[m]){if(u!==1||m!==1)do if(u--,m--,0>m||b[u]!==k[m]){var H=`
`+b[u].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=u&&0<=m);break}}}finally{Bu=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Zi(l):""}function qC(i,s){switch(i.tag){case 26:case 27:case 5:return Zi(i.type);case 16:return Zi("Lazy");case 13:return i.child!==s&&s!==null?Zi("Suspense Fallback"):Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 15:return zu(i.type,!1);case 11:return zu(i.type.render,!1);case 1:return zu(i.type,!0);case 31:return Zi("Activity");default:return""}}function fp(i){try{var s="",l=null;do s+=qC(i,l),l=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Yu=Object.prototype.hasOwnProperty,Ju=t.unstable_scheduleCallback,Ku=t.unstable_cancelCallback,FC=t.unstable_shouldYield,BC=t.unstable_requestPaint,Vt=t.unstable_now,zC=t.unstable_getCurrentPriorityLevel,hp=t.unstable_ImmediatePriority,pp=t.unstable_UserBlockingPriority,Sl=t.unstable_NormalPriority,YC=t.unstable_LowPriority,mp=t.unstable_IdlePriority,JC=t.log,KC=t.unstable_setDisableYieldValue,$s=null,Gt=null;function fi(i){if(typeof JC=="function"&&KC(i),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode($s,i)}catch{}}var qt=Math.clz32?Math.clz32:XC,WC=Math.log,$C=Math.LN2;function XC(i){return i>>>=0,i===0?32:31-(WC(i)/$C|0)|0}var Cl=256,Al=262144,wl=4194304;function ji(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function bl(i,s,l){var u=i.pendingLanes;if(u===0)return 0;var m=0,y=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var S=u&134217727;return S!==0?(u=S&~y,u!==0?m=ji(u):(T&=S,T!==0?m=ji(T):l||(l=S&~i,l!==0&&(m=ji(l))))):(S=u&~y,S!==0?m=ji(S):T!==0?m=ji(T):l||(l=u&~i,l!==0&&(m=ji(l)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:m}function Xs(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function QC(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gp(){var i=wl;return wl<<=1,(wl&62914560)===0&&(wl=4194304),i}function Wu(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Qs(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ZC(i,s,l,u,m,y){var T=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var S=i.entanglements,b=i.expirationTimes,k=i.hiddenUpdates;for(l=T&~l;0<l;){var H=31-qt(l),F=1<<H;S[H]=0,b[H]=-1;var U=k[H];if(U!==null)for(k[H]=null,H=0;H<U.length;H++){var L=U[H];L!==null&&(L.lane&=-536870913)}l&=~F}u!==0&&yp(i,u,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(T&~s))}function yp(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-qt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|l&261930}function _p(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var u=31-qt(l),m=1<<u;m&s|i[u]&s&&(i[u]|=s),l&=~m}}function vp(i,s){var l=s&-s;return l=(l&42)!==0?1:$u(l),(l&(i.suspendedLanes|s))!==0?0:l}function $u(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Xu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ep(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:s_(i.type))}function Tp(i,s){var l=q.p;try{return q.p=i,s()}finally{q.p=l}}var hi=Math.random().toString(36).slice(2),pt="__reactFiber$"+hi,Mt="__reactProps$"+hi,Po="__reactContainer$"+hi,Qu="__reactEvents$"+hi,jC="__reactListeners$"+hi,eA="__reactHandles$"+hi,Sp="__reactResources$"+hi,Zs="__reactMarker$"+hi;function Zu(i){delete i[pt],delete i[Mt],delete i[Qu],delete i[jC],delete i[eA]}function Oo(i){var s=i[pt];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Po]||l[pt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=By(i);i!==null;){if(l=i[pt])return l;i=By(i)}return s}i=l,l=i.parentNode}return null}function Ho(i){if(i=i[pt]||i[Po]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function js(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function Vo(i){var s=i[Sp];return s||(s=i[Sp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function at(i){i[Zs]=!0}var Cp=new Set,Ap={};function eo(i,s){Go(i,s),Go(i+"Capture",s)}function Go(i,s){for(Ap[i]=s,i=0;i<s.length;i++)Cp.add(s[i])}var tA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wp={},bp={};function nA(i){return Yu.call(bp,i)?!0:Yu.call(wp,i)?!1:tA.test(i)?bp[i]=!0:(wp[i]=!0,!1)}function Il(i,s,l){if(nA(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function Nl(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function Ln(i,s,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+u)}}function Zt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ip(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function iA(i,s,l){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function ju(i){if(!i._valueTracker){var s=Ip(i)?"checked":"value";i._valueTracker=iA(i,s,""+i[s])}}function Np(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return i&&(u=Ip(i)?i.checked?"true":"false":i.value),i=u,i!==l?(s.setValue(i),!0):!1}function Rl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var oA=/[\n"\\]/g;function jt(i){return i.replace(oA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ec(i,s,l,u,m,y,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Zt(s)):i.value!==""+Zt(s)&&(i.value=""+Zt(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?tc(i,T,Zt(s)):l!=null?tc(i,T,Zt(l)):u!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Zt(S):i.removeAttribute("name")}function Rp(i,s,l,u,m,y,T,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){ju(i);return}l=l!=null?""+Zt(l):"",s=s!=null?""+Zt(s):l,S||s===i.value||(i.value=s),i.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),ju(i)}function tc(i,s,l){s==="number"&&Rl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function qo(i,s,l,u){if(i=i.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=s.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&u&&(i[l].defaultSelected=!0)}else{for(l=""+Zt(l),s=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function xp(i,s,l){if(s!=null&&(s=""+Zt(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+Zt(l):""}function Mp(i,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(o(92));if(lt(u)){if(1<u.length)throw Error(o(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=Zt(s),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u),ju(i)}function Fo(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var sA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dp(i,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,l):typeof l!="number"||l===0||sA.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function kp(i,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&l[m]!==u&&Dp(i,m,u)}else for(var y in s)s.hasOwnProperty(y)&&Dp(i,y,s[y])}function nc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xl(i){return lA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Pn(){}var ic=null;function oc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Bo=null,zo=null;function Up(i){var s=Ho(i);if(s&&(i=s.stateNode)){var l=i[Mt]||null;e:switch(i=s.stateNode,s.type){case"input":if(ec(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+jt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==i&&u.form===i.form){var m=u[Mt]||null;if(!m)throw Error(o(90));ec(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===i.form&&Np(u)}break e;case"textarea":xp(i,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&qo(i,!!l.multiple,s,!1)}}}var sc=!1;function Lp(i,s,l){if(sc)return i(s,l);sc=!0;try{var u=i(s);return u}finally{if(sc=!1,(Bo!==null||zo!==null)&&(ya(),Bo&&(s=Bo,i=zo,zo=Bo=null,Up(s),i)))for(s=0;s<i.length;s++)Up(i[s])}}function er(i,s){var l=i.stateNode;if(l===null)return null;var u=l[Mt]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(On)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){rc=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{rc=!1}var pi=null,lc=null,Ml=null;function Pp(){if(Ml)return Ml;var i,s=lc,l=s.length,u,m="value"in pi?pi.value:pi.textContent,y=m.length;for(i=0;i<l&&s[i]===m[i];i++);var T=l-i;for(u=1;u<=T&&s[l-u]===m[y-u];u++);return Ml=m.slice(i,1<u?1-u:void 0)}function Dl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function kl(){return!0}function Op(){return!1}function Dt(i){function s(l,u,m,y,T){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(l=i[S],this[S]=l?l(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?kl:Op,this.isPropagationStopped=Op,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),s}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Dt(to),nr=v({},to,{view:0,detail:0}),aA=Dt(nr),ac,uc,ir,Ll=v({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ir&&(ir&&i.type==="mousemove"?(ac=i.screenX-ir.screenX,uc=i.screenY-ir.screenY):uc=ac=0,ir=i),ac)},movementY:function(i){return"movementY"in i?i.movementY:uc}}),Hp=Dt(Ll),uA=v({},Ll,{dataTransfer:0}),cA=Dt(uA),dA=v({},nr,{relatedTarget:0}),cc=Dt(dA),fA=v({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),hA=Dt(fA),pA=v({},to,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mA=Dt(pA),gA=v({},to,{data:0}),Vp=Dt(gA),yA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_A={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EA(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=vA[i])?!!s[i]:!1}function dc(){return EA}var TA=v({},nr,{key:function(i){if(i.key){var s=yA[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Dl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?_A[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(i){return i.type==="keypress"?Dl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),SA=Dt(TA),CA=v({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=Dt(CA),AA=v({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),wA=Dt(AA),bA=v({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),IA=Dt(bA),NA=v({},Ll,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),RA=Dt(NA),xA=v({},to,{newState:0,oldState:0}),MA=Dt(xA),DA=[9,13,27,32],fc=On&&"CompositionEvent"in window,or=null;On&&"documentMode"in document&&(or=document.documentMode);var kA=On&&"TextEvent"in window&&!or,qp=On&&(!fc||or&&8<or&&11>=or),Fp=" ",Bp=!1;function zp(i,s){switch(i){case"keyup":return DA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yo=!1;function UA(i,s){switch(i){case"compositionend":return Yp(s);case"keypress":return s.which!==32?null:(Bp=!0,Fp);case"textInput":return i=s.data,i===Fp&&Bp?null:i;default:return null}}function LA(i,s){if(Yo)return i==="compositionend"||!fc&&zp(i,s)?(i=Pp(),Ml=lc=pi=null,Yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qp&&s.locale!=="ko"?null:s.data;default:return null}}var PA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!PA[i.type]:s==="textarea"}function Kp(i,s,l,u){Bo?zo?zo.push(u):zo=[u]:Bo=u,s=Aa(s,"onChange"),0<s.length&&(l=new Ul("onChange","change",null,l,u),i.push({event:l,listeners:s}))}var sr=null,rr=null;function OA(i){Ry(i,0)}function Pl(i){var s=js(i);if(Np(s))return i}function Wp(i,s){if(i==="change")return s}var $p=!1;if(On){var hc;if(On){var pc="oninput"in document;if(!pc){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),pc=typeof Xp.oninput=="function"}hc=pc}else hc=!1;$p=hc&&(!document.documentMode||9<document.documentMode)}function Qp(){sr&&(sr.detachEvent("onpropertychange",Zp),rr=sr=null)}function Zp(i){if(i.propertyName==="value"&&Pl(rr)){var s=[];Kp(s,rr,i,oc(i)),Lp(OA,s)}}function HA(i,s,l){i==="focusin"?(Qp(),sr=s,rr=l,sr.attachEvent("onpropertychange",Zp)):i==="focusout"&&Qp()}function VA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Pl(rr)}function GA(i,s){if(i==="click")return Pl(s)}function qA(i,s){if(i==="input"||i==="change")return Pl(s)}function FA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Ft=typeof Object.is=="function"?Object.is:FA;function lr(i,s){if(Ft(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!Yu.call(s,m)||!Ft(i[m],s[m]))return!1}return!0}function jp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function em(i,s){var l=jp(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=s&&u>=s)return{node:l,offset:s-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=jp(l)}}function tm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?tm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Rl(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=Rl(i.document)}return s}function mc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var BA=On&&"documentMode"in document&&11>=document.documentMode,Jo=null,gc=null,ar=null,yc=!1;function im(i,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;yc||Jo==null||Jo!==Rl(u)||(u=Jo,"selectionStart"in u&&mc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ar&&lr(ar,u)||(ar=u,u=Aa(gc,"onSelect"),0<u.length&&(s=new Ul("onSelect","select",null,s,l),i.push({event:s,listeners:u}),s.target=Jo)))}function no(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Ko={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},_c={},om={};On&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function io(i){if(_c[i])return _c[i];if(!Ko[i])return i;var s=Ko[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in om)return _c[i]=s[l];return i}var sm=io("animationend"),rm=io("animationiteration"),lm=io("animationstart"),zA=io("transitionrun"),YA=io("transitionstart"),JA=io("transitioncancel"),am=io("transitionend"),um=new Map,vc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vc.push("scrollEnd");function pn(i,s){um.set(i,s),eo(s,[i])}var Ol=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},en=[],Wo=0,Ec=0;function Hl(){for(var i=Wo,s=Ec=Wo=0;s<i;){var l=en[s];en[s++]=null;var u=en[s];en[s++]=null;var m=en[s];en[s++]=null;var y=en[s];if(en[s++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}y!==0&&cm(l,m,y)}}function Vl(i,s,l,u){en[Wo++]=i,en[Wo++]=s,en[Wo++]=l,en[Wo++]=u,Ec|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Tc(i,s,l,u){return Vl(i,s,l,u),Gl(i)}function oo(i,s){return Vl(i,null,null,s),Gl(i)}function cm(i,s,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var m=!1,y=i.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&s!==null&&(m=31-qt(l),i=y.hiddenUpdates,u=i[m],u===null?i[m]=[s]:u.push(s),s.lane=l|536870912),y):null}function Gl(i){if(50<xr)throw xr=0,xd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var $o={};function KA(i,s,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(i,s,l,u){return new KA(i,s,l,u)}function Sc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Hn(i,s){var l=i.alternate;return l===null?(l=Bt(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function dm(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ql(i,s,l,u,m,y){var T=0;if(u=i,typeof i=="function")Sc(i)&&(T=1);else if(typeof i=="string")T=Zw(i,l,ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case j:return i=Bt(31,l,s,m),i.elementType=j,i.lanes=y,i;case M:return so(l.children,m,y,s);case x:T=8,m|=24;break;case O:return i=Bt(12,l,s,m|2),i.elementType=O,i.lanes=y,i;case X:return i=Bt(13,l,s,m),i.elementType=X,i.lanes=y,i;case $:return i=Bt(19,l,s,m),i.elementType=$,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:T=10;break e;case z:T=9;break e;case Y:T=11;break e;case J:T=14;break e;case fe:T=16,u=null;break e}T=29,l=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=Bt(T,l,s,m),s.elementType=i,s.type=u,s.lanes=y,s}function so(i,s,l,u){return i=Bt(7,i,u,s),i.lanes=l,i}function Cc(i,s,l){return i=Bt(6,i,null,s),i.lanes=l,i}function fm(i){var s=Bt(18,null,null,0);return s.stateNode=i,s}function Ac(i,s,l){return s=Bt(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var hm=new WeakMap;function tn(i,s){if(typeof i=="object"&&i!==null){var l=hm.get(i);return l!==void 0?l:(s={value:i,source:s,stack:fp(s)},hm.set(i,s),s)}return{value:i,source:s,stack:fp(s)}}var Xo=[],Qo=0,Fl=null,ur=0,nn=[],on=0,mi=null,In=1,Nn="";function Vn(i,s){Xo[Qo++]=ur,Xo[Qo++]=Fl,Fl=i,ur=s}function pm(i,s,l){nn[on++]=In,nn[on++]=Nn,nn[on++]=mi,mi=i;var u=In;i=Nn;var m=32-qt(u)-1;u&=~(1<<m),l+=1;var y=32-qt(s)+m;if(30<y){var T=m-m%5;y=(u&(1<<T)-1).toString(32),u>>=T,m-=T,In=1<<32-qt(s)+m|l<<m|u,Nn=y+i}else In=1<<y|l<<m|u,Nn=i}function wc(i){i.return!==null&&(Vn(i,1),pm(i,1,0))}function bc(i){for(;i===Fl;)Fl=Xo[--Qo],Xo[Qo]=null,ur=Xo[--Qo],Xo[Qo]=null;for(;i===mi;)mi=nn[--on],nn[on]=null,Nn=nn[--on],nn[on]=null,In=nn[--on],nn[on]=null}function mm(i,s){nn[on++]=In,nn[on++]=Nn,nn[on++]=mi,In=s.id,Nn=s.overflow,mi=i}var mt=null,Ye=null,we=!1,gi=null,sn=!1,Ic=Error(o(519));function yi(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cr(tn(s,i)),Ic}function gm(i){var s=i.stateNode,l=i.type,u=i.memoizedProps;switch(s[pt]=i,s[Mt]=u,l){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(l=0;l<Dr.length;l++)Te(Dr[l],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),Rp(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),Mp(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||ky(s.textContent,l)?(u.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),u.onScroll!=null&&Te("scroll",s),u.onScrollEnd!=null&&Te("scrollend",s),u.onClick!=null&&(s.onclick=Pn),s=!0):s=!1,s||yi(i,!0)}function ym(i){for(mt=i.return;mt;)switch(mt.tag){case 5:case 31:case 13:sn=!1;return;case 27:case 3:sn=!0;return;default:mt=mt.return}}function Zo(i){if(i!==mt)return!1;if(!we)return ym(i),we=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Yd(i.type,i.memoizedProps)),l=!l),l&&Ye&&yi(i),ym(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Ye=Fy(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Ye=Fy(i)}else s===27?(s=Ye,Mi(i.type)?(i=Xd,Xd=null,Ye=i):Ye=s):Ye=mt?ln(i.stateNode.nextSibling):null;return!0}function ro(){Ye=mt=null,we=!1}function Nc(){var i=gi;return i!==null&&(Pt===null?Pt=i:Pt.push.apply(Pt,i),gi=null),i}function cr(i){gi===null?gi=[i]:gi.push(i)}var Rc=w(null),lo=null,Gn=null;function _i(i,s,l){K(Rc,s._currentValue),s._currentValue=l}function qn(i){i._currentValue=Rc.current,V(Rc)}function xc(i,s,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===l)break;i=i.return}}function Mc(i,s,l,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=m;for(var b=0;b<s.length;b++)if(S.context===s[b]){y.lanes|=l,S=y.alternate,S!==null&&(S.lanes|=l),xc(y.return,l,i),u||(T=null);break e}y=S.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(o(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),xc(T,l,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function jo(i,s,l,u){i=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var S=m.type;Ft(m.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(m===Ue.current){if(T=m.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Or):i=[Or])}m=m.return}i!==null&&Mc(s,i,l,u),s.flags|=262144}function Bl(i){for(i=i.firstContext;i!==null;){if(!Ft(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ao(i){lo=i,Gn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function gt(i){return _m(lo,i)}function zl(i,s){return lo===null&&ao(i),_m(i,s)}function _m(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Gn===null){if(i===null)throw Error(o(308));Gn=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Gn=Gn.next=s;return l}var WA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},$A=t.unstable_scheduleCallback,XA=t.unstable_NormalPriority,nt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new WA,data:new Map,refCount:0}}function dr(i){i.refCount--,i.refCount===0&&$A(XA,function(){i.controller.abort()})}var fr=null,kc=0,es=0,ts=null;function QA(i,s){if(fr===null){var l=fr=[];kc=0,es=Pd(),ts={status:"pending",value:void 0,then:function(u){l.push(u)}}}return kc++,s.then(vm,vm),s}function vm(){if(--kc===0&&fr!==null){ts!==null&&(ts.status="fulfilled");var i=fr;fr=null,es=0,ts=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function ZA(i,s){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var Em=P.S;P.S=function(i,s){iy=Vt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&QA(i,s),Em!==null&&Em(i,s)};var uo=w(null);function Uc(){var i=uo.current;return i!==null?i:ze.pooledCache}function Yl(i,s){s===null?K(uo,uo.current):K(uo,s.pool)}function Tm(){var i=Uc();return i===null?null:{parent:nt._currentValue,pool:i}}var ns=Error(o(460)),Lc=Error(o(474)),Jl=Error(o(542)),Kl={then:function(){}};function Sm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Cm(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(Pn,Pn),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,wm(i),i;default:if(typeof s.status=="string")s.then(Pn,Pn);else{if(i=ze,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,wm(i),i}throw fo=s,ns}}function co(i){try{var s=i._init;return s(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(fo=l,ns):l}}var fo=null;function Am(){if(fo===null)throw Error(o(459));var i=fo;return fo=null,i}function wm(i){if(i===ns||i===Jl)throw Error(o(483))}var is=null,hr=0;function Wl(i){var s=hr;return hr+=1,is===null&&(is=[]),Cm(is,i,s)}function pr(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function $l(i,s){throw s.$$typeof===E?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function bm(i){function s(R,N){if(i){var D=R.deletions;D===null?(R.deletions=[N],R.flags|=16):D.push(N)}}function l(R,N){if(!i)return null;for(;N!==null;)s(R,N),N=N.sibling;return null}function u(R){for(var N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function m(R,N){return R=Hn(R,N),R.index=0,R.sibling=null,R}function y(R,N,D){return R.index=D,i?(D=R.alternate,D!==null?(D=D.index,D<N?(R.flags|=67108866,N):D):(R.flags|=67108866,N)):(R.flags|=1048576,N)}function T(R){return i&&R.alternate===null&&(R.flags|=67108866),R}function S(R,N,D,G){return N===null||N.tag!==6?(N=Cc(D,R.mode,G),N.return=R,N):(N=m(N,D),N.return=R,N)}function b(R,N,D,G){var se=D.type;return se===M?H(R,N,D.props.children,G,D.key):N!==null&&(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===fe&&co(se)===N.type)?(N=m(N,D.props),pr(N,D),N.return=R,N):(N=ql(D.type,D.key,D.props,null,R.mode,G),pr(N,D),N.return=R,N)}function k(R,N,D,G){return N===null||N.tag!==4||N.stateNode.containerInfo!==D.containerInfo||N.stateNode.implementation!==D.implementation?(N=Ac(D,R.mode,G),N.return=R,N):(N=m(N,D.children||[]),N.return=R,N)}function H(R,N,D,G,se){return N===null||N.tag!==7?(N=so(D,R.mode,G,se),N.return=R,N):(N=m(N,D),N.return=R,N)}function F(R,N,D){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Cc(""+N,R.mode,D),N.return=R,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return D=ql(N.type,N.key,N.props,null,R.mode,D),pr(D,N),D.return=R,D;case I:return N=Ac(N,R.mode,D),N.return=R,N;case fe:return N=co(N),F(R,N,D)}if(lt(N)||Se(N))return N=so(N,R.mode,D,null),N.return=R,N;if(typeof N.then=="function")return F(R,Wl(N),D);if(N.$$typeof===B)return F(R,zl(R,N),D);$l(R,N)}return null}function U(R,N,D,G){var se=N!==null?N.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return se!==null?null:S(R,N,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return D.key===se?b(R,N,D,G):null;case I:return D.key===se?k(R,N,D,G):null;case fe:return D=co(D),U(R,N,D,G)}if(lt(D)||Se(D))return se!==null?null:H(R,N,D,G,null);if(typeof D.then=="function")return U(R,N,Wl(D),G);if(D.$$typeof===B)return U(R,N,zl(R,D),G);$l(R,D)}return null}function L(R,N,D,G,se){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return R=R.get(D)||null,S(N,R,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case A:return R=R.get(G.key===null?D:G.key)||null,b(N,R,G,se);case I:return R=R.get(G.key===null?D:G.key)||null,k(N,R,G,se);case fe:return G=co(G),L(R,N,D,G,se)}if(lt(G)||Se(G))return R=R.get(D)||null,H(N,R,G,se,null);if(typeof G.then=="function")return L(R,N,D,Wl(G),se);if(G.$$typeof===B)return L(R,N,D,zl(N,G),se);$l(N,G)}return null}function te(R,N,D,G){for(var se=null,Re=null,ie=N,ye=N=0,Ae=null;ie!==null&&ye<D.length;ye++){ie.index>ye?(Ae=ie,ie=null):Ae=ie.sibling;var xe=U(R,ie,D[ye],G);if(xe===null){ie===null&&(ie=Ae);break}i&&ie&&xe.alternate===null&&s(R,ie),N=y(xe,N,ye),Re===null?se=xe:Re.sibling=xe,Re=xe,ie=Ae}if(ye===D.length)return l(R,ie),we&&Vn(R,ye),se;if(ie===null){for(;ye<D.length;ye++)ie=F(R,D[ye],G),ie!==null&&(N=y(ie,N,ye),Re===null?se=ie:Re.sibling=ie,Re=ie);return we&&Vn(R,ye),se}for(ie=u(ie);ye<D.length;ye++)Ae=L(ie,R,ye,D[ye],G),Ae!==null&&(i&&Ae.alternate!==null&&ie.delete(Ae.key===null?ye:Ae.key),N=y(Ae,N,ye),Re===null?se=Ae:Re.sibling=Ae,Re=Ae);return i&&ie.forEach(function(Pi){return s(R,Pi)}),we&&Vn(R,ye),se}function ae(R,N,D,G){if(D==null)throw Error(o(151));for(var se=null,Re=null,ie=N,ye=N=0,Ae=null,xe=D.next();ie!==null&&!xe.done;ye++,xe=D.next()){ie.index>ye?(Ae=ie,ie=null):Ae=ie.sibling;var Pi=U(R,ie,xe.value,G);if(Pi===null){ie===null&&(ie=Ae);break}i&&ie&&Pi.alternate===null&&s(R,ie),N=y(Pi,N,ye),Re===null?se=Pi:Re.sibling=Pi,Re=Pi,ie=Ae}if(xe.done)return l(R,ie),we&&Vn(R,ye),se;if(ie===null){for(;!xe.done;ye++,xe=D.next())xe=F(R,xe.value,G),xe!==null&&(N=y(xe,N,ye),Re===null?se=xe:Re.sibling=xe,Re=xe);return we&&Vn(R,ye),se}for(ie=u(ie);!xe.done;ye++,xe=D.next())xe=L(ie,R,ye,xe.value,G),xe!==null&&(i&&xe.alternate!==null&&ie.delete(xe.key===null?ye:xe.key),N=y(xe,N,ye),Re===null?se=xe:Re.sibling=xe,Re=xe);return i&&ie.forEach(function(ub){return s(R,ub)}),we&&Vn(R,ye),se}function qe(R,N,D,G){if(typeof D=="object"&&D!==null&&D.type===M&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case A:e:{for(var se=D.key;N!==null;){if(N.key===se){if(se=D.type,se===M){if(N.tag===7){l(R,N.sibling),G=m(N,D.props.children),G.return=R,R=G;break e}}else if(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===fe&&co(se)===N.type){l(R,N.sibling),G=m(N,D.props),pr(G,D),G.return=R,R=G;break e}l(R,N);break}else s(R,N);N=N.sibling}D.type===M?(G=so(D.props.children,R.mode,G,D.key),G.return=R,R=G):(G=ql(D.type,D.key,D.props,null,R.mode,G),pr(G,D),G.return=R,R=G)}return T(R);case I:e:{for(se=D.key;N!==null;){if(N.key===se)if(N.tag===4&&N.stateNode.containerInfo===D.containerInfo&&N.stateNode.implementation===D.implementation){l(R,N.sibling),G=m(N,D.children||[]),G.return=R,R=G;break e}else{l(R,N);break}else s(R,N);N=N.sibling}G=Ac(D,R.mode,G),G.return=R,R=G}return T(R);case fe:return D=co(D),qe(R,N,D,G)}if(lt(D))return te(R,N,D,G);if(Se(D)){if(se=Se(D),typeof se!="function")throw Error(o(150));return D=se.call(D),ae(R,N,D,G)}if(typeof D.then=="function")return qe(R,N,Wl(D),G);if(D.$$typeof===B)return qe(R,N,zl(R,D),G);$l(R,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,N!==null&&N.tag===6?(l(R,N.sibling),G=m(N,D),G.return=R,R=G):(l(R,N),G=Cc(D,R.mode,G),G.return=R,R=G),T(R)):l(R,N)}return function(R,N,D,G){try{hr=0;var se=qe(R,N,D,G);return is=null,se}catch(ie){if(ie===ns||ie===Jl)throw ie;var Re=Bt(29,ie,null,R.mode);return Re.lanes=G,Re.return=R,Re}finally{}}}var ho=bm(!0),Im=bm(!1),vi=!1;function Pc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oc(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ei(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ti(i,s,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=Gl(i),cm(i,null,l),s}return Vl(i,u,s,l),Gl(i)}function mr(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,_p(i,l)}}function Hc(i,s){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?m=y=s:y=y.next=s}else m=y=s;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Vc=!1;function gr(){if(Vc){var i=ts;if(i!==null)throw i}}function yr(i,s,l,u){Vc=!1;var m=i.updateQueue;vi=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var b=S,k=b.next;b.next=null,T===null?y=k:T.next=k,T=b;var H=i.alternate;H!==null&&(H=H.updateQueue,S=H.lastBaseUpdate,S!==T&&(S===null?H.firstBaseUpdate=k:S.next=k,H.lastBaseUpdate=b))}if(y!==null){var F=m.baseState;T=0,H=k=b=null,S=y;do{var U=S.lane&-536870913,L=U!==S.lane;if(L?(Ce&U)===U:(u&U)===U){U!==0&&U===es&&(Vc=!0),H!==null&&(H=H.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var te=i,ae=S;U=s;var qe=l;switch(ae.tag){case 1:if(te=ae.payload,typeof te=="function"){F=te.call(qe,F,U);break e}F=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ae.payload,U=typeof te=="function"?te.call(qe,F,U):te,U==null)break e;F=v({},F,U);break e;case 2:vi=!0}}U=S.callback,U!==null&&(i.flags|=64,L&&(i.flags|=8192),L=m.callbacks,L===null?m.callbacks=[U]:L.push(U))}else L={lane:U,tag:S.tag,payload:S.payload,callback:S.callback,next:null},H===null?(k=H=L,b=F):H=H.next=L,T|=U;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;L=S,S=L.next,L.next=null,m.lastBaseUpdate=L,m.shared.pending=null}}while(!0);H===null&&(b=F),m.baseState=b,m.firstBaseUpdate=k,m.lastBaseUpdate=H,y===null&&(m.shared.lanes=0),bi|=T,i.lanes=T,i.memoizedState=F}}function Nm(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function Rm(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Nm(l[i],s)}var os=w(null),Xl=w(0);function xm(i,s){i=Xn,K(Xl,i),K(os,s),Xn=i|s.baseLanes}function Gc(){K(Xl,Xn),K(os,os.current)}function qc(){Xn=Xl.current,V(os),V(Xl)}var zt=w(null),rn=null;function Si(i){var s=i.alternate;K(et,et.current&1),K(zt,i),rn===null&&(s===null||os.current!==null||s.memoizedState!==null)&&(rn=i)}function Fc(i){K(et,et.current),K(zt,i),rn===null&&(rn=i)}function Mm(i){i.tag===22?(K(et,et.current),K(zt,i),rn===null&&(rn=i)):Ci()}function Ci(){K(et,et.current),K(zt,zt.current)}function Yt(i){V(zt),rn===i&&(rn=null),V(et)}var et=w(0);function Ql(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Wd(l)||$d(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Fn=0,me=null,Ve=null,it=null,Zl=!1,ss=!1,po=!1,jl=0,_r=0,rs=null,jA=0;function Qe(){throw Error(o(321))}function Bc(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Ft(i[l],s[l]))return!1;return!0}function zc(i,s,l,u,m,y){return Fn=y,me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=i===null||i.memoizedState===null?pg:sd,po=!1,y=l(u,m),po=!1,ss&&(y=km(s,l,u,m)),Dm(i),y}function Dm(i){P.H=Tr;var s=Ve!==null&&Ve.next!==null;if(Fn=0,it=Ve=me=null,Zl=!1,_r=0,rs=null,s)throw Error(o(300));i===null||ot||(i=i.dependencies,i!==null&&Bl(i)&&(ot=!0))}function km(i,s,l,u){me=i;var m=0;do{if(ss&&(rs=null),_r=0,ss=!1,25<=m)throw Error(o(301));if(m+=1,it=Ve=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=mg,y=s(l,u)}while(ss);return y}function ew(){var i=P.H,s=i.useState()[0];return s=typeof s.then=="function"?vr(s):s,i=i.useState()[0],(Ve!==null?Ve.memoizedState:null)!==i&&(me.flags|=1024),s}function Yc(){var i=jl!==0;return jl=0,i}function Jc(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Kc(i){if(Zl){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Zl=!1}Fn=0,it=Ve=me=null,ss=!1,_r=jl=0,rs=null}function bt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?me.memoizedState=it=i:it=it.next=i,it}function tt(){if(Ve===null){var i=me.alternate;i=i!==null?i.memoizedState:null}else i=Ve.next;var s=it===null?me.memoizedState:it.next;if(s!==null)it=s,Ve=i;else{if(i===null)throw me.alternate===null?Error(o(467)):Error(o(310));Ve=i,i={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},it===null?me.memoizedState=it=i:it=it.next=i}return it}function ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vr(i){var s=_r;return _r+=1,rs===null&&(rs=[]),i=Cm(rs,i,s),s=me,(it===null?s.memoizedState:it.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?pg:sd),i}function ta(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return vr(i);if(i.$$typeof===B)return gt(i)}throw Error(o(438,String(i)))}function Wc(i){var s=null,l=me.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=ea(),me.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),u=0;u<i;u++)l[u]=ce;return s.index++,l}function Bn(i,s){return typeof s=="function"?s(i):s}function na(i){var s=tt();return $c(s,Ve,i)}function $c(i,s,l){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=l;var m=i.baseQueue,y=u.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}s.baseQueue=m=y,u.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{s=m.next;var S=T=null,b=null,k=s,H=!1;do{var F=k.lane&-536870913;if(F!==k.lane?(Ce&F)===F:(Fn&F)===F){var U=k.revertLane;if(U===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),F===es&&(H=!0);else if((Fn&U)===U){k=k.next,U===es&&(H=!0);continue}else F={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(S=b=F,T=y):b=b.next=F,me.lanes|=U,bi|=U;F=k.action,po&&l(y,F),y=k.hasEagerState?k.eagerState:l(y,F)}else U={lane:F,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(S=b=U,T=y):b=b.next=U,me.lanes|=F,bi|=F;k=k.next}while(k!==null&&k!==s);if(b===null?T=y:b.next=S,!Ft(y,i.memoizedState)&&(ot=!0,H&&(l=ts,l!==null)))throw l;i.memoizedState=y,i.baseState=T,i.baseQueue=b,u.lastRenderedState=y}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Xc(i){var s=tt(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var u=l.dispatch,m=l.pending,y=s.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do y=i(y,T.action),T=T.next;while(T!==m);Ft(y,s.memoizedState)||(ot=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,u]}function Um(i,s,l){var u=me,m=tt(),y=we;if(y){if(l===void 0)throw Error(o(407));l=l()}else l=s();var T=!Ft((Ve||m).memoizedState,l);if(T&&(m.memoizedState=l,ot=!0),m=m.queue,jc(Om.bind(null,u,m,i),[i]),m.getSnapshot!==s||T||it!==null&&it.memoizedState.tag&1){if(u.flags|=2048,ls(9,{destroy:void 0},Pm.bind(null,u,m,l,s),null),ze===null)throw Error(o(349));y||(Fn&127)!==0||Lm(u,s,l)}return l}function Lm(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=me.updateQueue,s===null?(s=ea(),me.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function Pm(i,s,l,u){s.value=l,s.getSnapshot=u,Hm(s)&&Vm(i)}function Om(i,s,l){return l(function(){Hm(s)&&Vm(i)})}function Hm(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Ft(i,l)}catch{return!0}}function Vm(i){var s=oo(i,2);s!==null&&Ot(s,i,2)}function Qc(i){var s=bt();if(typeof i=="function"){var l=i;if(i=l(),po){fi(!0);try{l()}finally{fi(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:i},s}function Gm(i,s,l,u){return i.baseState=l,$c(i,Ve,typeof u=="function"?u:Bn)}function tw(i,s,l,u,m){if(sa(i))throw Error(o(485));if(i=s.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};P.T!==null?l(!0):y.isTransition=!1,u(y),l=s.pending,l===null?(y.next=s.pending=y,qm(s,y)):(y.next=l.next,s.pending=l.next=y)}}function qm(i,s){var l=s.action,u=s.payload,m=i.state;if(s.isTransition){var y=P.T,T={};P.T=T;try{var S=l(m,u),b=P.S;b!==null&&b(T,S),Fm(i,s,S)}catch(k){Zc(i,s,k)}finally{y!==null&&T.types!==null&&(y.types=T.types),P.T=y}}else try{y=l(m,u),Fm(i,s,y)}catch(k){Zc(i,s,k)}}function Fm(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Bm(i,s,u)},function(u){return Zc(i,s,u)}):Bm(i,s,l)}function Bm(i,s,l){s.status="fulfilled",s.value=l,zm(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,qm(i,l)))}function Zc(i,s,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,zm(s),s=s.next;while(s!==u)}i.action=null}function zm(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Ym(i,s){return s}function Jm(i,s){if(we){var l=ze.formState;if(l!==null){e:{var u=me;if(we){if(Ye){t:{for(var m=Ye,y=sn;m.nodeType!==8;){if(!y){m=null;break t}if(m=ln(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ye=ln(m.nextSibling),u=m.data==="F!";break e}}yi(u)}u=!1}u&&(s=l[0])}}return l=bt(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:s},l.queue=u,l=dg.bind(null,me,u),u.dispatch=l,u=Qc(!1),y=od.bind(null,me,!1,u.queue),u=bt(),m={state:s,dispatch:null,action:i,pending:null},u.queue=m,l=tw.bind(null,me,m,y,l),m.dispatch=l,u.memoizedState=i,[s,l,!1]}function Km(i){var s=tt();return Wm(s,Ve,i)}function Wm(i,s,l){if(s=$c(i,s,Ym)[0],i=na(Bn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=vr(s)}catch(T){throw T===ns?Jl:T}else u=s;s=tt();var m=s.queue,y=m.dispatch;return l!==s.memoizedState&&(me.flags|=2048,ls(9,{destroy:void 0},nw.bind(null,m,l),null)),[u,y,i]}function nw(i,s){i.action=s}function $m(i){var s=tt(),l=Ve;if(l!==null)return Wm(s,l,i);tt(),s=s.memoizedState,l=tt();var u=l.queue.dispatch;return l.memoizedState=i,[s,u,!1]}function ls(i,s,l,u){return i={tag:i,create:l,deps:u,inst:s,next:null},s=me.updateQueue,s===null&&(s=ea(),me.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,s.lastEffect=i),i}function Xm(){return tt().memoizedState}function ia(i,s,l,u){var m=bt();me.flags|=i,m.memoizedState=ls(1|s,{destroy:void 0},l,u===void 0?null:u)}function oa(i,s,l,u){var m=tt();u=u===void 0?null:u;var y=m.memoizedState.inst;Ve!==null&&u!==null&&Bc(u,Ve.memoizedState.deps)?m.memoizedState=ls(s,y,l,u):(me.flags|=i,m.memoizedState=ls(1|s,y,l,u))}function Qm(i,s){ia(8390656,8,i,s)}function jc(i,s){oa(2048,8,i,s)}function iw(i){me.flags|=4;var s=me.updateQueue;if(s===null)s=ea(),me.updateQueue=s,s.events=[i];else{var l=s.events;l===null?s.events=[i]:l.push(i)}}function Zm(i){var s=tt().memoizedState;return iw({ref:s,nextImpl:i}),function(){if((De&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function jm(i,s){return oa(4,2,i,s)}function eg(i,s){return oa(4,4,i,s)}function tg(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ng(i,s,l){l=l!=null?l.concat([i]):null,oa(4,4,tg.bind(null,s,i),l)}function ed(){}function ig(i,s){var l=tt();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Bc(s,u[1])?u[0]:(l.memoizedState=[i,s],i)}function og(i,s){var l=tt();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Bc(s,u[1]))return u[0];if(u=i(),po){fi(!0);try{i()}finally{fi(!1)}}return l.memoizedState=[u,s],u}function td(i,s,l){return l===void 0||(Fn&1073741824)!==0&&(Ce&261930)===0?i.memoizedState=s:(i.memoizedState=l,i=sy(),me.lanes|=i,bi|=i,l)}function sg(i,s,l,u){return Ft(l,s)?l:os.current!==null?(i=td(i,l,u),Ft(i,s)||(ot=!0),i):(Fn&42)===0||(Fn&1073741824)!==0&&(Ce&261930)===0?(ot=!0,i.memoizedState=l):(i=sy(),me.lanes|=i,bi|=i,s)}function rg(i,s,l,u,m){var y=q.p;q.p=y!==0&&8>y?y:8;var T=P.T,S={};P.T=S,od(i,!1,s,l);try{var b=m(),k=P.S;if(k!==null&&k(S,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var H=ZA(b,u);Er(i,s,H,Wt(i))}else Er(i,s,u,Wt(i))}catch(F){Er(i,s,{then:function(){},status:"rejected",reason:F},Wt())}finally{q.p=y,T!==null&&S.types!==null&&(T.types=S.types),P.T=T}}function ow(){}function nd(i,s,l,u){if(i.tag!==5)throw Error(o(476));var m=lg(i).queue;rg(i,m,s,ee,l===null?ow:function(){return ag(i),l(u)})}function lg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:ee},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function ag(i){var s=lg(i);s.next===null&&(s=i.alternate.memoizedState),Er(i,s.next.queue,{},Wt())}function id(){return gt(Or)}function ug(){return tt().memoizedState}function cg(){return tt().memoizedState}function sw(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=Wt();i=Ei(l);var u=Ti(s,i,l);u!==null&&(Ot(u,s,l),mr(u,s,l)),s={cache:Dc()},i.payload=s;return}s=s.return}}function rw(i,s,l){var u=Wt();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},sa(i)?fg(s,l):(l=Tc(i,s,l,u),l!==null&&(Ot(l,i,u),hg(l,s,u)))}function dg(i,s,l){var u=Wt();Er(i,s,l,u)}function Er(i,s,l,u){var m={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(sa(i))fg(s,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,S=y(T,l);if(m.hasEagerState=!0,m.eagerState=S,Ft(S,T))return Vl(i,s,m,0),ze===null&&Hl(),!1}catch{}finally{}if(l=Tc(i,s,m,u),l!==null)return Ot(l,i,u),hg(l,s,u),!0}return!1}function od(i,s,l,u){if(u={lane:2,revertLane:Pd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sa(i)){if(s)throw Error(o(479))}else s=Tc(i,l,u,2),s!==null&&Ot(s,i,2)}function sa(i){var s=i.alternate;return i===me||s!==null&&s===me}function fg(i,s){ss=Zl=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function hg(i,s,l){if((l&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,_p(i,l)}}var Tr={readContext:gt,use:ta,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};Tr.useEffectEvent=Qe;var pg={readContext:gt,use:ta,useCallback:function(i,s){return bt().memoizedState=[i,s===void 0?null:s],i},useContext:gt,useEffect:Qm,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,ia(4194308,4,tg.bind(null,s,i),l)},useLayoutEffect:function(i,s){return ia(4194308,4,i,s)},useInsertionEffect:function(i,s){ia(4,2,i,s)},useMemo:function(i,s){var l=bt();s=s===void 0?null:s;var u=i();if(po){fi(!0);try{i()}finally{fi(!1)}}return l.memoizedState=[u,s],u},useReducer:function(i,s,l){var u=bt();if(l!==void 0){var m=l(s);if(po){fi(!0);try{l(s)}finally{fi(!1)}}}else m=s;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=rw.bind(null,me,i),[u.memoizedState,i]},useRef:function(i){var s=bt();return i={current:i},s.memoizedState=i},useState:function(i){i=Qc(i);var s=i.queue,l=dg.bind(null,me,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:ed,useDeferredValue:function(i,s){var l=bt();return td(l,i,s)},useTransition:function(){var i=Qc(!1);return i=rg.bind(null,me,i.queue,!0,!1),bt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var u=me,m=bt();if(we){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),ze===null)throw Error(o(349));(Ce&127)!==0||Lm(u,s,l)}m.memoizedState=l;var y={value:l,getSnapshot:s};return m.queue=y,Qm(Om.bind(null,u,y,i),[i]),u.flags|=2048,ls(9,{destroy:void 0},Pm.bind(null,u,y,l,s),null),l},useId:function(){var i=bt(),s=ze.identifierPrefix;if(we){var l=Nn,u=In;l=(u&~(1<<32-qt(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=jl++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=jA++,s="_"+s+"r_"+l.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:id,useFormState:Jm,useActionState:Jm,useOptimistic:function(i){var s=bt();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=od.bind(null,me,!0,l),l.dispatch=s,[i,s]},useMemoCache:Wc,useCacheRefresh:function(){return bt().memoizedState=sw.bind(null,me)},useEffectEvent:function(i){var s=bt(),l={impl:i};return s.memoizedState=l,function(){if((De&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},sd={readContext:gt,use:ta,useCallback:ig,useContext:gt,useEffect:jc,useImperativeHandle:ng,useInsertionEffect:jm,useLayoutEffect:eg,useMemo:og,useReducer:na,useRef:Xm,useState:function(){return na(Bn)},useDebugValue:ed,useDeferredValue:function(i,s){var l=tt();return sg(l,Ve.memoizedState,i,s)},useTransition:function(){var i=na(Bn)[0],s=tt().memoizedState;return[typeof i=="boolean"?i:vr(i),s]},useSyncExternalStore:Um,useId:ug,useHostTransitionStatus:id,useFormState:Km,useActionState:Km,useOptimistic:function(i,s){var l=tt();return Gm(l,Ve,i,s)},useMemoCache:Wc,useCacheRefresh:cg};sd.useEffectEvent=Zm;var mg={readContext:gt,use:ta,useCallback:ig,useContext:gt,useEffect:jc,useImperativeHandle:ng,useInsertionEffect:jm,useLayoutEffect:eg,useMemo:og,useReducer:Xc,useRef:Xm,useState:function(){return Xc(Bn)},useDebugValue:ed,useDeferredValue:function(i,s){var l=tt();return Ve===null?td(l,i,s):sg(l,Ve.memoizedState,i,s)},useTransition:function(){var i=Xc(Bn)[0],s=tt().memoizedState;return[typeof i=="boolean"?i:vr(i),s]},useSyncExternalStore:Um,useId:ug,useHostTransitionStatus:id,useFormState:$m,useActionState:$m,useOptimistic:function(i,s){var l=tt();return Ve!==null?Gm(l,Ve,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Wc,useCacheRefresh:cg};mg.useEffectEvent=Zm;function rd(i,s,l,u){s=i.memoizedState,l=l(u,s),l=l==null?s:v({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var ld={enqueueSetState:function(i,s,l){i=i._reactInternals;var u=Wt(),m=Ei(u);m.payload=s,l!=null&&(m.callback=l),s=Ti(i,m,u),s!==null&&(Ot(s,i,u),mr(s,i,u))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var u=Wt(),m=Ei(u);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=Ti(i,m,u),s!==null&&(Ot(s,i,u),mr(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=Wt(),u=Ei(l);u.tag=2,s!=null&&(u.callback=s),s=Ti(i,u,l),s!==null&&(Ot(s,i,l),mr(s,i,l))}};function gg(i,s,l,u,m,y,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,T):s.prototype&&s.prototype.isPureReactComponent?!lr(l,u)||!lr(m,y):!0}function yg(i,s,l,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==i&&ld.enqueueReplaceState(s,s.state,null)}function mo(i,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(i=i.defaultProps){l===s&&(l=v({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}function _g(i){Ol(i)}function vg(i){console.error(i)}function Eg(i){Ol(i)}function ra(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Tg(i,s,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function ad(i,s,l){return l=Ei(l),l.tag=3,l.payload={element:null},l.callback=function(){ra(i,s)},l}function Sg(i){return i=Ei(i),i.tag=3,i}function Cg(i,s,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;i.payload=function(){return m(y)},i.callback=function(){Tg(s,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Tg(s,l,u),typeof m!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function lw(i,s,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&jo(s,l,m,!0),l=zt.current,l!==null){switch(l.tag){case 31:case 13:return rn===null?_a():l.alternate===null&&Ze===0&&(Ze=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===Kl?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),kd(i,u,m)),!1;case 22:return l.flags|=65536,u===Kl?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),kd(i,u,m)),!1}throw Error(o(435,l.tag))}return kd(i,u,m),_a(),!1}if(we)return s=zt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Ic&&(i=Error(o(422),{cause:u}),cr(tn(i,l)))):(u!==Ic&&(s=Error(o(423),{cause:u}),cr(tn(s,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=tn(u,l),m=ad(i.stateNode,u,m),Hc(i,m),Ze!==4&&(Ze=2)),!1;var y=Error(o(520),{cause:u});if(y=tn(y,l),Rr===null?Rr=[y]:Rr.push(y),Ze!==4&&(Ze=2),s===null)return!0;u=tn(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=ad(l.stateNode,u,i),Hc(l,i),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ii===null||!Ii.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Sg(m),Cg(m,i,l,u),Hc(l,m),!1}l=l.return}while(l!==null);return!1}var ud=Error(o(461)),ot=!1;function yt(i,s,l,u){s.child=i===null?Im(s,null,l,u):ho(s,i.child,l,u)}function Ag(i,s,l,u,m){l=l.render;var y=s.ref;if("ref"in u){var T={};for(var S in u)S!=="ref"&&(T[S]=u[S])}else T=u;return ao(s),u=zc(i,s,l,T,y,m),S=Yc(),i!==null&&!ot?(Jc(i,s,m),zn(i,s,m)):(we&&S&&wc(s),s.flags|=1,yt(i,s,u,m),s.child)}function wg(i,s,l,u,m){if(i===null){var y=l.type;return typeof y=="function"&&!Sc(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,bg(i,s,y,u,m)):(i=ql(l.type,null,u,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!yd(i,m)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:lr,l(T,u)&&i.ref===s.ref)return zn(i,s,m)}return s.flags|=1,i=Hn(y,u),i.ref=s.ref,i.return=s,s.child=i}function bg(i,s,l,u,m){if(i!==null){var y=i.memoizedProps;if(lr(y,u)&&i.ref===s.ref)if(ot=!1,s.pendingProps=u=y,yd(i,m))(i.flags&131072)!==0&&(ot=!0);else return s.lanes=i.lanes,zn(i,s,m)}return cd(i,s,l,u,m)}function Ig(i,s,l,u){var m=u.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(u=s.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,s.child=null;return Ng(i,s,y,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Yl(s,y!==null?y.cachePool:null),y!==null?xm(s,y):Gc(),Mm(s);else return u=s.lanes=536870912,Ng(i,s,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(Yl(s,y.cachePool),xm(s,y),Ci(),s.memoizedState=null):(i!==null&&Yl(s,null),Gc(),Ci());return yt(i,s,m,l),s.child}function Sr(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ng(i,s,l,u,m){var y=Uc();return y=y===null?null:{parent:nt._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},i!==null&&Yl(s,null),Gc(),Mm(s),i!==null&&jo(i,s,u,!0),s.childLanes=m,null}function la(i,s){return s=ua({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Rg(i,s,l){return ho(s,i.child,null,l),i=la(s,s.pendingProps),i.flags|=2,Yt(s),s.memoizedState=null,i}function aw(i,s,l){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(we){if(u.mode==="hidden")return i=la(s,u),s.lanes=536870912,Sr(null,i);if(Fc(s),(i=Ye)?(i=qy(i,sn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:mi!==null?{id:In,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},l=fm(i),l.return=s,s.child=l,mt=s,Ye=null)):i=null,i===null)throw yi(s);return s.lanes=536870912,null}return la(s,u)}var y=i.memoizedState;if(y!==null){var T=y.dehydrated;if(Fc(s),m)if(s.flags&256)s.flags&=-257,s=Rg(i,s,l);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(ot||jo(i,s,l,!1),m=(l&i.childLanes)!==0,ot||m){if(u=ze,u!==null&&(T=vp(u,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,oo(i,T),Ot(u,i,T),ud;_a(),s=Rg(i,s,l)}else i=y.treeContext,Ye=ln(T.nextSibling),mt=s,we=!0,gi=null,sn=!1,i!==null&&mm(s,i),s=la(s,u),s.flags|=4096;return s}return i=Hn(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function aa(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function cd(i,s,l,u,m){return ao(s),l=zc(i,s,l,u,void 0,m),u=Yc(),i!==null&&!ot?(Jc(i,s,m),zn(i,s,m)):(we&&u&&wc(s),s.flags|=1,yt(i,s,l,m),s.child)}function xg(i,s,l,u,m,y){return ao(s),s.updateQueue=null,l=km(s,u,l,m),Dm(i),u=Yc(),i!==null&&!ot?(Jc(i,s,y),zn(i,s,y)):(we&&u&&wc(s),s.flags|=1,yt(i,s,l,y),s.child)}function Mg(i,s,l,u,m){if(ao(s),s.stateNode===null){var y=$o,T=l.contextType;typeof T=="object"&&T!==null&&(y=gt(T)),y=new l(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ld,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},Pc(s),T=l.contextType,y.context=typeof T=="object"&&T!==null?gt(T):$o,y.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(rd(s,l,T,u),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&ld.enqueueReplaceState(y,y.state,null),yr(s,u,y,m),gr(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){y=s.stateNode;var S=s.memoizedProps,b=mo(l,S);y.props=b;var k=y.context,H=l.contextType;T=$o,typeof H=="object"&&H!==null&&(T=gt(H));var F=l.getDerivedStateFromProps;H=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,H||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||k!==T)&&yg(s,y,u,T),vi=!1;var U=s.memoizedState;y.state=U,yr(s,u,y,m),gr(),k=s.memoizedState,S||U!==k||vi?(typeof F=="function"&&(rd(s,l,F,u),k=s.memoizedState),(b=vi||gg(s,l,b,u,U,k,T))?(H||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=k),y.props=u,y.state=k,y.context=T,u=b):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,Oc(i,s),T=s.memoizedProps,H=mo(l,T),y.props=H,F=s.pendingProps,U=y.context,k=l.contextType,b=$o,typeof k=="object"&&k!==null&&(b=gt(k)),S=l.getDerivedStateFromProps,(k=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==F||U!==b)&&yg(s,y,u,b),vi=!1,U=s.memoizedState,y.state=U,yr(s,u,y,m),gr();var L=s.memoizedState;T!==F||U!==L||vi||i!==null&&i.dependencies!==null&&Bl(i.dependencies)?(typeof S=="function"&&(rd(s,l,S,u),L=s.memoizedState),(H=vi||gg(s,l,H,u,U,L,b)||i!==null&&i.dependencies!==null&&Bl(i.dependencies))?(k||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,L,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,L,b)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=L),y.props=u,y.state=L,y.context=b,u=H):(typeof y.componentDidUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&U===i.memoizedState||(s.flags|=1024),u=!1)}return y=u,aa(i,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&u?(s.child=ho(s,i.child,null,m),s.child=ho(s,null,l,m)):yt(i,s,l,m),s.memoizedState=y.state,i=s.child):i=zn(i,s,m),i}function Dg(i,s,l,u){return ro(),s.flags|=256,yt(i,s,l,u),s.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(i){return{baseLanes:i,cachePool:Tm()}}function hd(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=Kt),i}function kg(i,s,l){var u=s.pendingProps,m=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=i!==null&&i.memoizedState===null?!1:(et.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(we){if(m?Si(s):Ci(),(i=Ye)?(i=qy(i,sn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:mi!==null?{id:In,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},l=fm(i),l.return=s,s.child=l,mt=s,Ye=null)):i=null,i===null)throw yi(s);return $d(i)?s.lanes=32:s.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(Ci(),m=s.mode,S=ua({mode:"hidden",children:S},m),u=so(u,m,l,null),S.return=s,u.return=s,S.sibling=u,s.child=S,u=s.child,u.memoizedState=fd(l),u.childLanes=hd(i,T,l),s.memoizedState=dd,Sr(null,u)):(Si(s),pd(s,S))}var b=i.memoizedState;if(b!==null&&(S=b.dehydrated,S!==null)){if(y)s.flags&256?(Si(s),s.flags&=-257,s=md(i,s,l)):s.memoizedState!==null?(Ci(),s.child=i.child,s.flags|=128,s=null):(Ci(),S=u.fallback,m=s.mode,u=ua({mode:"visible",children:u.children},m),S=so(S,m,l,null),S.flags|=2,u.return=s,S.return=s,u.sibling=S,s.child=u,ho(s,i.child,null,l),u=s.child,u.memoizedState=fd(l),u.childLanes=hd(i,T,l),s.memoizedState=dd,s=Sr(null,u));else if(Si(s),$d(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var k=T.dgst;T=k,u=Error(o(419)),u.stack="",u.digest=T,cr({value:u,source:null,stack:null}),s=md(i,s,l)}else if(ot||jo(i,s,l,!1),T=(l&i.childLanes)!==0,ot||T){if(T=ze,T!==null&&(u=vp(T,l),u!==0&&u!==b.retryLane))throw b.retryLane=u,oo(i,u),Ot(T,i,u),ud;Wd(S)||_a(),s=md(i,s,l)}else Wd(S)?(s.flags|=192,s.child=i.child,s=null):(i=b.treeContext,Ye=ln(S.nextSibling),mt=s,we=!0,gi=null,sn=!1,i!==null&&mm(s,i),s=pd(s,u.children),s.flags|=4096);return s}return m?(Ci(),S=u.fallback,m=s.mode,b=i.child,k=b.sibling,u=Hn(b,{mode:"hidden",children:u.children}),u.subtreeFlags=b.subtreeFlags&65011712,k!==null?S=Hn(k,S):(S=so(S,m,l,null),S.flags|=2),S.return=s,u.return=s,u.sibling=S,s.child=u,Sr(null,u),u=s.child,S=i.child.memoizedState,S===null?S=fd(l):(m=S.cachePool,m!==null?(b=nt._currentValue,m=m.parent!==b?{parent:b,pool:b}:m):m=Tm(),S={baseLanes:S.baseLanes|l,cachePool:m}),u.memoizedState=S,u.childLanes=hd(i,T,l),s.memoizedState=dd,Sr(i.child,u)):(Si(s),l=i.child,i=l.sibling,l=Hn(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=l,s.memoizedState=null,l)}function pd(i,s){return s=ua({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ua(i,s){return i=Bt(22,i,null,s),i.lanes=0,i}function md(i,s,l){return ho(s,i.child,null,l),i=pd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Ug(i,s,l){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),xc(i.return,s,l)}function gd(i,s,l,u,m,y){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=l,T.tailMode=m,T.treeForkCount=y)}function Lg(i,s,l){var u=s.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var T=et.current,S=(T&2)!==0;if(S?(T=T&1|2,s.flags|=128):T&=1,K(et,T),yt(i,s,u,l),u=we?ur:0,!S&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ug(i,l,s);else if(i.tag===19)Ug(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(l=s.child,m=null;l!==null;)i=l.alternate,i!==null&&Ql(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),gd(s,!1,m,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Ql(i)===null){s.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}gd(s,!0,l,null,y,u);break;case"together":gd(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function zn(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),bi|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(jo(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,l=Hn(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Hn(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function yd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Bl(i)))}function uw(i,s,l){switch(s.tag){case 3:wt(s,s.stateNode.containerInfo),_i(s,nt,i.memoizedState.cache),ro();break;case 27:case 5:Ws(s);break;case 4:wt(s,s.stateNode.containerInfo);break;case 10:_i(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Fc(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Si(s),s.flags|=128,null):(l&s.child.childLanes)!==0?kg(i,s,l):(Si(s),i=zn(i,s,l),i!==null?i.sibling:null);Si(s);break;case 19:var m=(i.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(jo(i,s,l,!1),u=(l&s.childLanes)!==0),m){if(u)return Lg(i,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),K(et,et.current),u)break;return null;case 22:return s.lanes=0,Ig(i,s,l,s.pendingProps);case 24:_i(s,nt,i.memoizedState.cache)}return zn(i,s,l)}function Pg(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)ot=!0;else{if(!yd(i,l)&&(s.flags&128)===0)return ot=!1,uw(i,s,l);ot=(i.flags&131072)!==0}else ot=!1,we&&(s.flags&1048576)!==0&&pm(s,ur,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=co(s.elementType),s.type=i,typeof i=="function")Sc(i)?(u=mo(i,u),s.tag=1,s=Mg(null,s,i,u,l)):(s.tag=0,s=cd(null,s,i,u,l));else{if(i!=null){var m=i.$$typeof;if(m===Y){s.tag=11,s=Ag(null,s,i,u,l);break e}else if(m===J){s.tag=14,s=wg(null,s,i,u,l);break e}}throw s=Be(i)||i,Error(o(306,s,""))}}return s;case 0:return cd(i,s,s.type,s.pendingProps,l);case 1:return u=s.type,m=mo(u,s.pendingProps),Mg(i,s,u,m,l);case 3:e:{if(wt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;m=y.element,Oc(i,s),yr(s,u,null,l);var T=s.memoizedState;if(u=T.cache,_i(s,nt,u),u!==y.cache&&Mc(s,[nt],l,!0),gr(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Dg(i,s,u,l);break e}else if(u!==m){m=tn(Error(o(424)),s),cr(m),s=Dg(i,s,u,l);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ye=ln(i.firstChild),mt=s,we=!0,gi=null,sn=!0,l=Im(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ro(),u===m){s=zn(i,s,l);break e}yt(i,s,u,l)}s=s.child}return s;case 26:return aa(i,s),i===null?(l=Ky(s.type,null,s.pendingProps,null))?s.memoizedState=l:we||(l=s.type,i=s.pendingProps,u=wa(ve.current).createElement(l),u[pt]=s,u[Mt]=i,_t(u,l,i),at(u),s.stateNode=u):s.memoizedState=Ky(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ws(s),i===null&&we&&(u=s.stateNode=zy(s.type,s.pendingProps,ve.current),mt=s,sn=!0,m=Ye,Mi(s.type)?(Xd=m,Ye=ln(u.firstChild)):Ye=m),yt(i,s,s.pendingProps.children,l),aa(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&we&&((m=u=Ye)&&(u=Vw(u,s.type,s.pendingProps,sn),u!==null?(s.stateNode=u,mt=s,Ye=ln(u.firstChild),sn=!1,m=!0):m=!1),m||yi(s)),Ws(s),m=s.type,y=s.pendingProps,T=i!==null?i.memoizedProps:null,u=y.children,Yd(m,y)?u=null:T!==null&&Yd(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=zc(i,s,ew,null,null,l),Or._currentValue=m),aa(i,s),yt(i,s,u,l),s.child;case 6:return i===null&&we&&((i=l=Ye)&&(l=Gw(l,s.pendingProps,sn),l!==null?(s.stateNode=l,mt=s,Ye=null,i=!0):i=!1),i||yi(s)),null;case 13:return kg(i,s,l);case 4:return wt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=ho(s,null,u,l):yt(i,s,u,l),s.child;case 11:return Ag(i,s,s.type,s.pendingProps,l);case 7:return yt(i,s,s.pendingProps,l),s.child;case 8:return yt(i,s,s.pendingProps.children,l),s.child;case 12:return yt(i,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,_i(s,s.type,u.value),yt(i,s,u.children,l),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,ao(s),m=gt(m),u=u(m),s.flags|=1,yt(i,s,u,l),s.child;case 14:return wg(i,s,s.type,s.pendingProps,l);case 15:return bg(i,s,s.type,s.pendingProps,l);case 19:return Lg(i,s,l);case 31:return aw(i,s,l);case 22:return Ig(i,s,l,s.pendingProps);case 24:return ao(s),u=gt(nt),i===null?(m=Uc(),m===null&&(m=ze,y=Dc(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),s.memoizedState={parent:u,cache:m},Pc(s),_i(s,nt,m)):((i.lanes&l)!==0&&(Oc(i,s),yr(s,null,null,l),gr()),m=i.memoizedState,y=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),_i(s,nt,u)):(u=y.cache,_i(s,nt,u),u!==m.cache&&Mc(s,[nt],l,!0))),yt(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Yn(i){i.flags|=4}function _d(i,s,l,u,m){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(uy())i.flags|=8192;else throw fo=Kl,Lc}else i.flags&=-16777217}function Og(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Zy(s))if(uy())i.flags|=8192;else throw fo=Kl,Lc}function ca(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?gp():536870912,i.lanes|=s,ds|=s)}function Cr(i,s){if(!we)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Je(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(s)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=l,s}function cw(i,s,l){var u=s.pendingProps;switch(bc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(s),null;case 1:return Je(s),null;case 3:return l=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),qn(nt),je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Zo(s)?Yn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nc())),Je(s),null;case 26:var m=s.type,y=s.memoizedState;return i===null?(Yn(s),y!==null?(Je(s),Og(s,y)):(Je(s),_d(s,m,null,u,l))):y?y!==i.memoizedState?(Yn(s),Je(s),Og(s,y)):(Je(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Yn(s),Je(s),_d(s,m,i,u,l)),null;case 27:if(Tl(s),l=ve.current,m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Yn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Je(s),null}i=ne.current,Zo(s)?gm(s):(i=zy(m,u,l),s.stateNode=i,Yn(s))}return Je(s),null;case 5:if(Tl(s),m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Yn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Je(s),null}if(y=ne.current,Zo(s))gm(s);else{var T=wa(ve.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}y[pt]=s,y[Mt]=u;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;e:switch(_t(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yn(s)}}return Je(s),_d(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,l),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Yn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=ve.current,Zo(s)){if(i=s.stateNode,l=s.memoizedProps,u=null,m=mt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[pt]=s,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||ky(i.nodeValue,l)),i||yi(s,!0)}else i=wa(i).createTextNode(u),i[pt]=s,s.stateNode=i}return Je(s),null;case 31:if(l=s.memoizedState,i===null||i.memoizedState!==null){if(u=Zo(s),l!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[pt]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),i=!1}else l=Nc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return s.flags&256?(Yt(s),s):(Yt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Je(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Zo(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(o(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[pt]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),m=!1}else m=Nc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Yt(s),s):(Yt(s),null)}return Yt(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,i=i!==null&&i.memoizedState!==null,l&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),l!==i&&l&&(s.child.flags|=8192),ca(s,s.updateQueue),Je(s),null);case 4:return je(),i===null&&Gd(s.stateNode.containerInfo),Je(s),null;case 10:return qn(s.type),Je(s),null;case 19:if(V(et),u=s.memoizedState,u===null)return Je(s),null;if(m=(s.flags&128)!==0,y=u.rendering,y===null)if(m)Cr(u,!1);else{if(Ze!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Ql(i),y!==null){for(s.flags|=128,Cr(u,!1),i=y.updateQueue,s.updateQueue=i,ca(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)dm(l,i),l=l.sibling;return K(et,et.current&1|2),we&&Vn(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Vt()>ma&&(s.flags|=128,m=!0,Cr(u,!1),s.lanes=4194304)}else{if(!m)if(i=Ql(y),i!==null){if(s.flags|=128,m=!0,i=i.updateQueue,s.updateQueue=i,ca(s,i),Cr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!we)return Je(s),null}else 2*Vt()-u.renderingStartTime>ma&&l!==536870912&&(s.flags|=128,m=!0,Cr(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(i=u.last,i!==null?i.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Vt(),i.sibling=null,l=et.current,K(et,m?l&1|2:l&1),we&&Vn(s,u.treeForkCount),i):(Je(s),null);case 22:case 23:return Yt(s),qc(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Je(s),s.subtreeFlags&6&&(s.flags|=8192)):Je(s),l=s.updateQueue,l!==null&&ca(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),i!==null&&V(uo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),qn(nt),Je(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function dw(i,s){switch(bc(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return qn(nt),je(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Tl(s),null;case 31:if(s.memoizedState!==null){if(Yt(s),s.alternate===null)throw Error(o(340));ro()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Yt(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ro()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return V(et),null;case 4:return je(),null;case 10:return qn(s.type),null;case 22:case 23:return Yt(s),qc(),i!==null&&V(uo),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return qn(nt),null;case 25:return null;default:return null}}function Hg(i,s){switch(bc(s),s.tag){case 3:qn(nt),je();break;case 26:case 27:case 5:Tl(s);break;case 4:je();break;case 31:s.memoizedState!==null&&Yt(s);break;case 13:Yt(s);break;case 19:V(et);break;case 10:qn(s.type);break;case 22:case 23:Yt(s),qc(),i!==null&&V(uo);break;case 24:qn(nt)}}function Ar(i,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&i)===i){u=void 0;var y=l.create,T=l.inst;u=y(),T.destroy=u}l=l.next}while(l!==m)}}catch(S){Oe(s,s.return,S)}}function Ai(i,s,l){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&i)===i){var T=u.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,m=s;var b=l,k=S;try{k()}catch(H){Oe(m,b,H)}}}u=u.next}while(u!==y)}}catch(H){Oe(s,s.return,H)}}function Vg(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{Rm(s,l)}catch(u){Oe(i,i.return,u)}}}function Gg(i,s,l){l.props=mo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){Oe(i,s,u)}}function wr(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof l=="function"?i.refCleanup=l(u):l.current=u}}catch(m){Oe(i,s,m)}}function Rn(i,s){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){Oe(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Oe(i,s,m)}else l.current=null}function qg(i){var s=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){Oe(i,i.return,m)}}function vd(i,s,l){try{var u=i.stateNode;kw(u,i.type,l,s),u[Mt]=s}catch(m){Oe(i,i.return,m)}}function Fg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Mi(i.type)||i.tag===4}function Ed(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Fg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Mi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Td(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Pn));else if(u!==4&&(u===27&&Mi(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(Td(i,s,l),i=i.sibling;i!==null;)Td(i,s,l),i=i.sibling}function da(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(u!==4&&(u===27&&Mi(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(da(i,s,l),i=i.sibling;i!==null;)da(i,s,l),i=i.sibling}function Bg(i){var s=i.stateNode,l=i.memoizedProps;try{for(var u=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);_t(s,u,l),s[pt]=i,s[Mt]=l}catch(y){Oe(i,i.return,y)}}var Jn=!1,st=!1,Sd=!1,zg=typeof WeakSet=="function"?WeakSet:Set,ut=null;function fw(i,s){if(i=i.containerInfo,Bd=Da,i=nm(i),mc(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,S=-1,b=-1,k=0,H=0,F=i,U=null;t:for(;;){for(var L;F!==l||m!==0&&F.nodeType!==3||(S=T+m),F!==y||u!==0&&F.nodeType!==3||(b=T+u),F.nodeType===3&&(T+=F.nodeValue.length),(L=F.firstChild)!==null;)U=F,F=L;for(;;){if(F===i)break t;if(U===l&&++k===m&&(S=T),U===y&&++H===u&&(b=T),(L=F.nextSibling)!==null)break;F=U,U=F.parentNode}F=L}l=S===-1||b===-1?null:{start:S,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(zd={focusedElem:i,selectionRange:l},Da=!1,ut=s;ut!==null;)if(s=ut,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ut=i;else for(;ut!==null;){switch(s=ut,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)m=i[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=s,m=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var te=mo(l.type,m);i=u.getSnapshotBeforeUpdate(te,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(ae){Oe(l,l.return,ae)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)Kd(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,ut=i;break}ut=s.return}}function Yg(i,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Wn(i,l),u&4&&Ar(5,l);break;case 1:if(Wn(i,l),u&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(T){Oe(l,l.return,T)}else{var m=mo(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Oe(l,l.return,T)}}u&64&&Vg(l),u&512&&wr(l,l.return);break;case 3:if(Wn(i,l),u&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Rm(i,s)}catch(T){Oe(l,l.return,T)}}break;case 27:s===null&&u&4&&Bg(l);case 26:case 5:Wn(i,l),s===null&&u&4&&qg(l),u&512&&wr(l,l.return);break;case 12:Wn(i,l);break;case 31:Wn(i,l),u&4&&Wg(i,l);break;case 13:Wn(i,l),u&4&&$g(i,l),u&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=Tw.bind(null,l),qw(i,l))));break;case 22:if(u=l.memoizedState!==null||Jn,!u){s=s!==null&&s.memoizedState!==null||st,m=Jn;var y=st;Jn=u,(st=s)&&!y?$n(i,l,(l.subtreeFlags&8772)!==0):Wn(i,l),Jn=m,st=y}break;case 30:break;default:Wn(i,l)}}function Jg(i){var s=i.alternate;s!==null&&(i.alternate=null,Jg(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Zu(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Xe=null,kt=!1;function Kn(i,s,l){for(l=l.child;l!==null;)Kg(i,s,l),l=l.sibling}function Kg(i,s,l){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount($s,l)}catch{}switch(l.tag){case 26:st||Rn(l,s),Kn(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:st||Rn(l,s);var u=Xe,m=kt;Mi(l.type)&&(Xe=l.stateNode,kt=!1),Kn(i,s,l),Ur(l.stateNode),Xe=u,kt=m;break;case 5:st||Rn(l,s);case 6:if(u=Xe,m=kt,Xe=null,Kn(i,s,l),Xe=u,kt=m,Xe!==null)if(kt)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(l.stateNode)}catch(y){Oe(l,s,y)}else try{Xe.removeChild(l.stateNode)}catch(y){Oe(l,s,y)}break;case 18:Xe!==null&&(kt?(i=Xe,Vy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),vs(i)):Vy(Xe,l.stateNode));break;case 4:u=Xe,m=kt,Xe=l.stateNode.containerInfo,kt=!0,Kn(i,s,l),Xe=u,kt=m;break;case 0:case 11:case 14:case 15:Ai(2,l,s),st||Ai(4,l,s),Kn(i,s,l);break;case 1:st||(Rn(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Gg(l,s,u)),Kn(i,s,l);break;case 21:Kn(i,s,l);break;case 22:st=(u=st)||l.memoizedState!==null,Kn(i,s,l),st=u;break;default:Kn(i,s,l)}}function Wg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{vs(i)}catch(l){Oe(s,s.return,l)}}}function $g(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{vs(i)}catch(l){Oe(s,s.return,l)}}function hw(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new zg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new zg),s;default:throw Error(o(435,i.tag))}}function fa(i,s){var l=hw(i);s.forEach(function(u){if(!l.has(u)){l.add(u);var m=Sw.bind(null,i,u);u.then(m,m)}})}function Ut(i,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],y=i,T=s,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(Mi(S.type)){Xe=S.stateNode,kt=!1;break e}break;case 5:Xe=S.stateNode,kt=!1;break e;case 3:case 4:Xe=S.stateNode.containerInfo,kt=!0;break e}S=S.return}if(Xe===null)throw Error(o(160));Kg(y,T,m),Xe=null,kt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Xg(s,i),s=s.sibling}var mn=null;function Xg(i,s){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ut(s,i),Lt(i),u&4&&(Ai(3,i,i.return),Ar(3,i),Ai(5,i,i.return));break;case 1:Ut(s,i),Lt(i),u&512&&(st||l===null||Rn(l,l.return)),u&64&&Jn&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=mn;if(Ut(s,i),Lt(i),u&512&&(st||l===null||Rn(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Zs]||y[pt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),_t(y,u,l),y[pt]=i,at(y),u=y;break e;case"link":var T=Xy("link","href",m).get(u+(l.href||""));if(T){for(var S=0;S<T.length;S++)if(y=T[S],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(S,1);break t}}y=m.createElement(u),_t(y,u,l),m.head.appendChild(y);break;case"meta":if(T=Xy("meta","content",m).get(u+(l.content||""))){for(S=0;S<T.length;S++)if(y=T[S],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(S,1);break t}}y=m.createElement(u),_t(y,u,l),m.head.appendChild(y);break;default:throw Error(o(468,u))}y[pt]=i,at(y),u=y}i.stateNode=u}else Qy(m,i.type,i.stateNode);else i.stateNode=$y(m,u,i.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?Qy(m,i.type,i.stateNode):$y(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&vd(i,i.memoizedProps,l.memoizedProps)}break;case 27:Ut(s,i),Lt(i),u&512&&(st||l===null||Rn(l,l.return)),l!==null&&u&4&&vd(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Ut(s,i),Lt(i),u&512&&(st||l===null||Rn(l,l.return)),i.flags&32){m=i.stateNode;try{Fo(m,"")}catch(te){Oe(i,i.return,te)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,vd(i,m,l!==null?l.memoizedProps:m)),u&1024&&(Sd=!0);break;case 6:if(Ut(s,i),Lt(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(te){Oe(i,i.return,te)}}break;case 3:if(Na=null,m=mn,mn=ba(s.containerInfo),Ut(s,i),mn=m,Lt(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{vs(s.containerInfo)}catch(te){Oe(i,i.return,te)}Sd&&(Sd=!1,Qg(i));break;case 4:u=mn,mn=ba(i.stateNode.containerInfo),Ut(s,i),Lt(i),mn=u;break;case 12:Ut(s,i),Lt(i);break;case 31:Ut(s,i),Lt(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,fa(i,u)));break;case 13:Ut(s,i),Lt(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(pa=Vt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,fa(i,u)));break;case 22:m=i.memoizedState!==null;var b=l!==null&&l.memoizedState!==null,k=Jn,H=st;if(Jn=k||m,st=H||b,Ut(s,i),st=H,Jn=k,Lt(i),u&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||b||Jn||st||go(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){b=l=s;try{if(y=b.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=b.stateNode;var F=b.memoizedProps.style,U=F!=null&&F.hasOwnProperty("display")?F.display:null;S.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(te){Oe(b,b.return,te)}}}else if(s.tag===6){if(l===null){b=s;try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(te){Oe(b,b.return,te)}}}else if(s.tag===18){if(l===null){b=s;try{var L=b.stateNode;m?Gy(L,!0):Gy(b.stateNode,!1)}catch(te){Oe(b,b.return,te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,fa(i,l))));break;case 19:Ut(s,i),Lt(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,fa(i,u)));break;case 30:break;case 21:break;default:Ut(s,i),Lt(i)}}function Lt(i){var s=i.flags;if(s&2){try{for(var l,u=i.return;u!==null;){if(Fg(u)){l=u;break}u=u.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var m=l.stateNode,y=Ed(i);da(i,y,m);break;case 5:var T=l.stateNode;l.flags&32&&(Fo(T,""),l.flags&=-33);var S=Ed(i);da(i,S,T);break;case 3:case 4:var b=l.stateNode.containerInfo,k=Ed(i);Td(i,k,b);break;default:throw Error(o(161))}}catch(H){Oe(i,i.return,H)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Qg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Qg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Wn(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Yg(i,s.alternate,s),s=s.sibling}function go(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Ai(4,s,s.return),go(s);break;case 1:Rn(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&Gg(s,s.return,l),go(s);break;case 27:Ur(s.stateNode);case 26:case 5:Rn(s,s.return),go(s);break;case 22:s.memoizedState===null&&go(s);break;case 30:go(s);break;default:go(s)}i=i.sibling}}function $n(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=i,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:$n(m,y,l),Ar(4,y);break;case 1:if($n(m,y,l),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(k){Oe(u,u.return,k)}if(u=y,m=u.updateQueue,m!==null){var S=u.stateNode;try{var b=m.shared.hiddenCallbacks;if(b!==null)for(m.shared.hiddenCallbacks=null,m=0;m<b.length;m++)Nm(b[m],S)}catch(k){Oe(u,u.return,k)}}l&&T&64&&Vg(y),wr(y,y.return);break;case 27:Bg(y);case 26:case 5:$n(m,y,l),l&&u===null&&T&4&&qg(y),wr(y,y.return);break;case 12:$n(m,y,l);break;case 31:$n(m,y,l),l&&T&4&&Wg(m,y);break;case 13:$n(m,y,l),l&&T&4&&$g(m,y);break;case 22:y.memoizedState===null&&$n(m,y,l),wr(y,y.return);break;case 30:break;default:$n(m,y,l)}s=s.sibling}}function Cd(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&dr(l))}function Ad(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&dr(i))}function gn(i,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zg(i,s,l,u),s=s.sibling}function Zg(i,s,l,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:gn(i,s,l,u),m&2048&&Ar(9,s);break;case 1:gn(i,s,l,u);break;case 3:gn(i,s,l,u),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&dr(i)));break;case 12:if(m&2048){gn(i,s,l,u),i=s.stateNode;try{var y=s.memoizedProps,T=y.id,S=y.onPostCommit;typeof S=="function"&&S(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(b){Oe(s,s.return,b)}}else gn(i,s,l,u);break;case 31:gn(i,s,l,u);break;case 13:gn(i,s,l,u);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?gn(i,s,l,u):br(i,s):y._visibility&2?gn(i,s,l,u):(y._visibility|=2,as(i,s,l,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Cd(T,s);break;case 24:gn(i,s,l,u),m&2048&&Ad(s.alternate,s);break;default:gn(i,s,l,u)}}function as(i,s,l,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,T=s,S=l,b=u,k=T.flags;switch(T.tag){case 0:case 11:case 15:as(y,T,S,b,m),Ar(8,T);break;case 23:break;case 22:var H=T.stateNode;T.memoizedState!==null?H._visibility&2?as(y,T,S,b,m):br(y,T):(H._visibility|=2,as(y,T,S,b,m)),m&&k&2048&&Cd(T.alternate,T);break;case 24:as(y,T,S,b,m),m&&k&2048&&Ad(T.alternate,T);break;default:as(y,T,S,b,m)}s=s.sibling}}function br(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,u=s,m=u.flags;switch(u.tag){case 22:br(l,u),m&2048&&Cd(u.alternate,u);break;case 24:br(l,u),m&2048&&Ad(u.alternate,u);break;default:br(l,u)}s=s.sibling}}var Ir=8192;function us(i,s,l){if(i.subtreeFlags&Ir)for(i=i.child;i!==null;)jg(i,s,l),i=i.sibling}function jg(i,s,l){switch(i.tag){case 26:us(i,s,l),i.flags&Ir&&i.memoizedState!==null&&jw(l,mn,i.memoizedState,i.memoizedProps);break;case 5:us(i,s,l);break;case 3:case 4:var u=mn;mn=ba(i.stateNode.containerInfo),us(i,s,l),mn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ir,Ir=16777216,us(i,s,l),Ir=u):us(i,s,l));break;default:us(i,s,l)}}function ey(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Nr(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];ut=u,ny(u,i)}ey(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ty(i),i=i.sibling}function ty(i){switch(i.tag){case 0:case 11:case 15:Nr(i),i.flags&2048&&Ai(9,i,i.return);break;case 3:Nr(i);break;case 12:Nr(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ha(i)):Nr(i);break;default:Nr(i)}}function ha(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];ut=u,ny(u,i)}ey(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Ai(8,s,s.return),ha(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,ha(s));break;default:ha(s)}i=i.sibling}}function ny(i,s){for(;ut!==null;){var l=ut;switch(l.tag){case 0:case 11:case 15:Ai(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:dr(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ut=u;else e:for(l=i;ut!==null;){u=ut;var m=u.sibling,y=u.return;if(Jg(u),u===l){ut=null;break e}if(m!==null){m.return=y,ut=m;break e}ut=y}}}var pw={getCacheForType:function(i){var s=gt(nt),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l},cacheSignal:function(){return gt(nt).controller.signal}},mw=typeof WeakMap=="function"?WeakMap:Map,De=0,ze=null,Ee=null,Ce=0,Pe=0,Jt=null,wi=!1,cs=!1,wd=!1,Xn=0,Ze=0,bi=0,yo=0,bd=0,Kt=0,ds=0,Rr=null,Pt=null,Id=!1,pa=0,iy=0,ma=1/0,ga=null,Ii=null,rt=0,Ni=null,fs=null,Qn=0,Nd=0,Rd=null,oy=null,xr=0,xd=null;function Wt(){return(De&2)!==0&&Ce!==0?Ce&-Ce:P.T!==null?Pd():Ep()}function sy(){if(Kt===0)if((Ce&536870912)===0||we){var i=Al;Al<<=1,(Al&3932160)===0&&(Al=262144),Kt=i}else Kt=536870912;return i=zt.current,i!==null&&(i.flags|=32),Kt}function Ot(i,s,l){(i===ze&&(Pe===2||Pe===9)||i.cancelPendingCommit!==null)&&(hs(i,0),Ri(i,Ce,Kt,!1)),Qs(i,l),((De&2)===0||i!==ze)&&(i===ze&&((De&2)===0&&(yo|=l),Ze===4&&Ri(i,Ce,Kt,!1)),xn(i))}function ry(i,s,l){if((De&6)!==0)throw Error(o(327));var u=!l&&(s&127)===0&&(s&i.expiredLanes)===0||Xs(i,s),m=u?_w(i,s):Dd(i,s,!0),y=u;do{if(m===0){cs&&!u&&Ri(i,s,0,!1);break}else{if(l=i.current.alternate,y&&!gw(l)){m=Dd(i,s,!1),y=!1;continue}if(m===2){if(y=s,i.errorRecoveryDisabledLanes&y)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var S=i;m=Rr;var b=S.current.memoizedState.isDehydrated;if(b&&(hs(S,T).flags|=256),T=Dd(S,T,!1),T!==2){if(wd&&!b){S.errorRecoveryDisabledLanes|=y,yo|=y,m=4;break e}y=Pt,Pt=m,y!==null&&(Pt===null?Pt=y:Pt.push.apply(Pt,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){hs(i,0),Ri(i,s,0,!0);break}e:{switch(u=i,y=m,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Ri(u,s,Kt,!wi);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(m=pa+300-Vt(),10<m)){if(Ri(u,s,Kt,!wi),bl(u,0,!0)!==0)break e;Qn=s,u.timeoutHandle=Oy(ly.bind(null,u,l,Pt,ga,Id,s,Kt,yo,ds,wi,y,"Throttled",-0,0),m);break e}ly(u,l,Pt,ga,Id,s,Kt,yo,ds,wi,y,null,-0,0)}}break}while(!0);xn(i)}function ly(i,s,l,u,m,y,T,S,b,k,H,F,U,L){if(i.timeoutHandle=-1,F=s.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pn},jg(s,y,F);var te=(y&62914560)===y?pa-Vt():(y&4194048)===y?iy-Vt():0;if(te=eb(F,te),te!==null){Qn=y,i.cancelPendingCommit=te(my.bind(null,i,s,y,l,u,m,T,S,b,H,F,null,U,L)),Ri(i,y,T,!k);return}}my(i,s,y,l,u,m,T,S,b)}function gw(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],y=m.getSnapshot;m=m.value;try{if(!Ft(y(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ri(i,s,l,u){s&=~bd,s&=~yo,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var m=s;0<m;){var y=31-qt(m),T=1<<y;u[y]=-1,m&=~T}l!==0&&yp(i,l,s)}function ya(){return(De&6)===0?(Mr(0),!1):!0}function Md(){if(Ee!==null){if(Pe===0)var i=Ee.return;else i=Ee,Gn=lo=null,Kc(i),is=null,hr=0,i=Ee;for(;i!==null;)Hg(i.alternate,i),i=i.return;Ee=null}}function hs(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,Pw(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Qn=0,Md(),ze=i,Ee=l=Hn(i.current,null),Ce=s,Pe=0,Jt=null,wi=!1,cs=Xs(i,s),wd=!1,ds=Kt=bd=yo=bi=Ze=0,Pt=Rr=null,Id=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var m=31-qt(u),y=1<<m;s|=i[m],u&=~y}return Xn=s,Hl(),l}function ay(i,s){me=null,P.H=Tr,s===ns||s===Jl?(s=Am(),Pe=3):s===Lc?(s=Am(),Pe=4):Pe=s===ud?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jt=s,Ee===null&&(Ze=1,ra(i,tn(s,i.current)))}function uy(){var i=zt.current;return i===null?!0:(Ce&4194048)===Ce?rn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?i===rn:!1}function cy(){var i=P.H;return P.H=Tr,i===null?Tr:i}function dy(){var i=P.A;return P.A=pw,i}function _a(){Ze=4,wi||(Ce&4194048)!==Ce&&zt.current!==null||(cs=!0),(bi&134217727)===0&&(yo&134217727)===0||ze===null||Ri(ze,Ce,Kt,!1)}function Dd(i,s,l){var u=De;De|=2;var m=cy(),y=dy();(ze!==i||Ce!==s)&&(ga=null,hs(i,s)),s=!1;var T=Ze;e:do try{if(Pe!==0&&Ee!==null){var S=Ee,b=Jt;switch(Pe){case 8:Md(),T=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(s=!0);var k=Pe;if(Pe=0,Jt=null,ps(i,S,b,k),l&&cs){T=0;break e}break;default:k=Pe,Pe=0,Jt=null,ps(i,S,b,k)}}yw(),T=Ze;break}catch(H){ay(i,H)}while(!0);return s&&i.shellSuspendCounter++,Gn=lo=null,De=u,P.H=m,P.A=y,Ee===null&&(ze=null,Ce=0,Hl()),T}function yw(){for(;Ee!==null;)fy(Ee)}function _w(i,s){var l=De;De|=2;var u=cy(),m=dy();ze!==i||Ce!==s?(ga=null,ma=Vt()+500,hs(i,s)):cs=Xs(i,s);e:do try{if(Pe!==0&&Ee!==null){s=Ee;var y=Jt;t:switch(Pe){case 1:Pe=0,Jt=null,ps(i,s,y,1);break;case 2:case 9:if(Sm(y)){Pe=0,Jt=null,hy(s);break}s=function(){Pe!==2&&Pe!==9||ze!==i||(Pe=7),xn(i)},y.then(s,s);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:Sm(y)?(Pe=0,Jt=null,hy(s)):(Pe=0,Jt=null,ps(i,s,y,7));break;case 5:var T=null;switch(Ee.tag){case 26:T=Ee.memoizedState;case 5:case 27:var S=Ee;if(T?Zy(T):S.stateNode.complete){Pe=0,Jt=null;var b=S.sibling;if(b!==null)Ee=b;else{var k=S.return;k!==null?(Ee=k,va(k)):Ee=null}break t}}Pe=0,Jt=null,ps(i,s,y,5);break;case 6:Pe=0,Jt=null,ps(i,s,y,6);break;case 8:Md(),Ze=6;break e;default:throw Error(o(462))}}vw();break}catch(H){ay(i,H)}while(!0);return Gn=lo=null,P.H=u,P.A=m,De=l,Ee!==null?0:(ze=null,Ce=0,Hl(),Ze)}function vw(){for(;Ee!==null&&!FC();)fy(Ee)}function fy(i){var s=Pg(i.alternate,i,Xn);i.memoizedProps=i.pendingProps,s===null?va(i):Ee=s}function hy(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=xg(l,s,s.pendingProps,s.type,void 0,Ce);break;case 11:s=xg(l,s,s.pendingProps,s.type.render,s.ref,Ce);break;case 5:Kc(s);default:Hg(l,s),s=Ee=dm(s,Xn),s=Pg(l,s,Xn)}i.memoizedProps=i.pendingProps,s===null?va(i):Ee=s}function ps(i,s,l,u){Gn=lo=null,Kc(s),is=null,hr=0;var m=s.return;try{if(lw(i,m,s,l,Ce)){Ze=1,ra(i,tn(l,i.current)),Ee=null;return}}catch(y){if(m!==null)throw Ee=m,y;Ze=1,ra(i,tn(l,i.current)),Ee=null;return}s.flags&32768?(we||u===1?i=!0:cs||(Ce&536870912)!==0?i=!1:(wi=i=!0,(u===2||u===9||u===3||u===6)&&(u=zt.current,u!==null&&u.tag===13&&(u.flags|=16384))),py(s,i)):va(s)}function va(i){var s=i;do{if((s.flags&32768)!==0){py(s,wi);return}i=s.return;var l=cw(s.alternate,s,Xn);if(l!==null){Ee=l;return}if(s=s.sibling,s!==null){Ee=s;return}Ee=s=i}while(s!==null);Ze===0&&(Ze=5)}function py(i,s){do{var l=dw(i.alternate,i);if(l!==null){l.flags&=32767,Ee=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){Ee=i;return}Ee=i=l}while(i!==null);Ze=6,Ee=null}function my(i,s,l,u,m,y,T,S,b){i.cancelPendingCommit=null;do Ea();while(rt!==0);if((De&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=Ec,ZC(i,l,y,T,S,b),i===ze&&(Ee=ze=null,Ce=0),fs=s,Ni=i,Qn=l,Nd=y,Rd=m,oy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Cw(Sl,function(){return Ey(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,m=q.p,q.p=2,T=De,De|=4;try{fw(i,s,l)}finally{De=T,q.p=m,P.T=u}}rt=1,gy(),yy(),_y()}}function gy(){if(rt===1){rt=0;var i=Ni,s=fs,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var u=q.p;q.p=2;var m=De;De|=4;try{Xg(s,i);var y=zd,T=nm(i.containerInfo),S=y.focusedElem,b=y.selectionRange;if(T!==S&&S&&S.ownerDocument&&tm(S.ownerDocument.documentElement,S)){if(b!==null&&mc(S)){var k=b.start,H=b.end;if(H===void 0&&(H=k),"selectionStart"in S)S.selectionStart=k,S.selectionEnd=Math.min(H,S.value.length);else{var F=S.ownerDocument||document,U=F&&F.defaultView||window;if(U.getSelection){var L=U.getSelection(),te=S.textContent.length,ae=Math.min(b.start,te),qe=b.end===void 0?ae:Math.min(b.end,te);!L.extend&&ae>qe&&(T=qe,qe=ae,ae=T);var R=em(S,ae),N=em(S,qe);if(R&&N&&(L.rangeCount!==1||L.anchorNode!==R.node||L.anchorOffset!==R.offset||L.focusNode!==N.node||L.focusOffset!==N.offset)){var D=F.createRange();D.setStart(R.node,R.offset),L.removeAllRanges(),ae>qe?(L.addRange(D),L.extend(N.node,N.offset)):(D.setEnd(N.node,N.offset),L.addRange(D))}}}}for(F=[],L=S;L=L.parentNode;)L.nodeType===1&&F.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<F.length;S++){var G=F[S];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Da=!!Bd,zd=Bd=null}finally{De=m,q.p=u,P.T=l}}i.current=s,rt=2}}function yy(){if(rt===2){rt=0;var i=Ni,s=fs,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var u=q.p;q.p=2;var m=De;De|=4;try{Yg(i,s.alternate,s)}finally{De=m,q.p=u,P.T=l}}rt=3}}function _y(){if(rt===4||rt===3){rt=0,BC();var i=Ni,s=fs,l=Qn,u=oy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rt=5:(rt=0,fs=Ni=null,vy(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ii=null),Xu(l),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot($s,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=P.T,m=q.p,q.p=2,P.T=null;try{for(var y=i.onRecoverableError,T=0;T<u.length;T++){var S=u[T];y(S.value,{componentStack:S.stack})}}finally{P.T=s,q.p=m}}(Qn&3)!==0&&Ea(),xn(i),m=i.pendingLanes,(l&261930)!==0&&(m&42)!==0?i===xd?xr++:(xr=0,xd=i):xr=0,Mr(0)}}function vy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,dr(s)))}function Ea(){return gy(),yy(),_y(),Ey()}function Ey(){if(rt!==5)return!1;var i=Ni,s=Nd;Nd=0;var l=Xu(Qn),u=P.T,m=q.p;try{q.p=32>l?32:l,P.T=null,l=Rd,Rd=null;var y=Ni,T=Qn;if(rt=0,fs=Ni=null,Qn=0,(De&6)!==0)throw Error(o(331));var S=De;if(De|=4,ty(y.current),Zg(y,y.current,T,l),De=S,Mr(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot($s,y)}catch{}return!0}finally{q.p=m,P.T=u,vy(i,s)}}function Ty(i,s,l){s=tn(l,s),s=ad(i.stateNode,s,2),i=Ti(i,s,2),i!==null&&(Qs(i,2),xn(i))}function Oe(i,s,l){if(i.tag===3)Ty(i,i,l);else for(;s!==null;){if(s.tag===3){Ty(s,i,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ii===null||!Ii.has(u))){i=tn(l,i),l=Sg(2),u=Ti(s,l,2),u!==null&&(Cg(l,u,s,i),Qs(u,2),xn(u));break}}s=s.return}}function kd(i,s,l){var u=i.pingCache;if(u===null){u=i.pingCache=new mw;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(l)||(wd=!0,m.add(l),i=Ew.bind(null,i,s,l),s.then(i,i))}function Ew(i,s,l){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,ze===i&&(Ce&l)===l&&(Ze===4||Ze===3&&(Ce&62914560)===Ce&&300>Vt()-pa?(De&2)===0&&hs(i,0):bd|=l,ds===Ce&&(ds=0)),xn(i)}function Sy(i,s){s===0&&(s=gp()),i=oo(i,s),i!==null&&(Qs(i,s),xn(i))}function Tw(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Sy(i,l)}function Sw(i,s){var l=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Sy(i,l)}function Cw(i,s){return Ju(i,s)}var Ta=null,ms=null,Ud=!1,Sa=!1,Ld=!1,xi=0;function xn(i){i!==ms&&i.next===null&&(ms===null?Ta=ms=i:ms=ms.next=i),Sa=!0,Ud||(Ud=!0,ww())}function Mr(i,s){if(!Ld&&Sa){Ld=!0;do for(var l=!1,u=Ta;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var T=u.suspendedLanes,S=u.pingedLanes;y=(1<<31-qt(42|i)+1)-1,y&=m&~(T&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,by(u,y))}else y=Ce,y=bl(u,u===ze?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Xs(u,y)||(l=!0,by(u,y));u=u.next}while(l);Ld=!1}}function Aw(){Cy()}function Cy(){Sa=Ud=!1;var i=0;xi!==0&&Lw()&&(i=xi);for(var s=Vt(),l=null,u=Ta;u!==null;){var m=u.next,y=Ay(u,s);y===0?(u.next=null,l===null?Ta=m:l.next=m,m===null&&(ms=l)):(l=u,(i!==0||(y&3)!==0)&&(Sa=!0)),u=m}rt!==0&&rt!==5||Mr(i),xi!==0&&(xi=0)}function Ay(i,s){for(var l=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var T=31-qt(y),S=1<<T,b=m[T];b===-1?((S&l)===0||(S&u)!==0)&&(m[T]=QC(S,s)):b<=s&&(i.expiredLanes|=S),y&=~S}if(s=ze,l=Ce,l=bl(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,l===0||i===s&&(Pe===2||Pe===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ku(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Xs(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(u!==null&&Ku(u),Xu(l)){case 2:case 8:l=pp;break;case 32:l=Sl;break;case 268435456:l=mp;break;default:l=Sl}return u=wy.bind(null,i),l=Ju(l,u),i.callbackPriority=s,i.callbackNode=l,s}return u!==null&&u!==null&&Ku(u),i.callbackPriority=2,i.callbackNode=null,2}function wy(i,s){if(rt!==0&&rt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Ea()&&i.callbackNode!==l)return null;var u=Ce;return u=bl(i,i===ze?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ry(i,u,s),Ay(i,Vt()),i.callbackNode!=null&&i.callbackNode===l?wy.bind(null,i):null)}function by(i,s){if(Ea())return null;ry(i,s,!0)}function ww(){Ow(function(){(De&6)!==0?Ju(hp,Aw):Cy()})}function Pd(){if(xi===0){var i=es;i===0&&(i=Cl,Cl<<=1,(Cl&261888)===0&&(Cl=256)),xi=i}return xi}function Iy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:xl(""+i)}function Ny(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function bw(i,s,l,u,m){if(s==="submit"&&l&&l.stateNode===m){var y=Iy((m[Mt]||null).action),T=u.submitter;T&&(s=(s=T[Mt]||null)?Iy(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var S=new Ul("action","action",null,u,m);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xi!==0){var b=T?Ny(m,T):new FormData(m);nd(l,{pending:!0,data:b,method:m.method,action:y},null,b)}}else typeof y=="function"&&(S.preventDefault(),b=T?Ny(m,T):new FormData(m),nd(l,{pending:!0,data:b,method:m.method,action:y},y,b))},currentTarget:m}]})}}for(var Od=0;Od<vc.length;Od++){var Hd=vc[Od],Iw=Hd.toLowerCase(),Nw=Hd[0].toUpperCase()+Hd.slice(1);pn(Iw,"on"+Nw)}pn(sm,"onAnimationEnd"),pn(rm,"onAnimationIteration"),pn(lm,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(zA,"onTransitionRun"),pn(YA,"onTransitionStart"),pn(JA,"onTransitionCancel"),pn(am,"onTransitionEnd"),Go("onMouseEnter",["mouseout","mouseover"]),Go("onMouseLeave",["mouseout","mouseover"]),Go("onPointerEnter",["pointerout","pointerover"]),Go("onPointerLeave",["pointerout","pointerover"]),eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eo("onBeforeInput",["compositionend","keypress","textInput","paste"]),eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dr));function Ry(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],m=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var T=u.length-1;0<=T;T--){var S=u[T],b=S.instance,k=S.currentTarget;if(S=S.listener,b!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=k;try{y(m)}catch(H){Ol(H)}m.currentTarget=null,y=b}else for(T=0;T<u.length;T++){if(S=u[T],b=S.instance,k=S.currentTarget,S=S.listener,b!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=k;try{y(m)}catch(H){Ol(H)}m.currentTarget=null,y=b}}}}function Te(i,s){var l=s[Qu];l===void 0&&(l=s[Qu]=new Set);var u=i+"__bubble";l.has(u)||(xy(s,i,2,!1),l.add(u))}function Vd(i,s,l){var u=0;s&&(u|=4),xy(l,i,u,s)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function Gd(i){if(!i[Ca]){i[Ca]=!0,Cp.forEach(function(l){l!=="selectionchange"&&(Rw.has(l)||Vd(l,!1,i),Vd(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Ca]||(s[Ca]=!0,Vd("selectionchange",!1,s))}}function xy(i,s,l,u){switch(s_(s)){case 2:var m=ib;break;case 8:m=ob;break;default:m=tf}l=m.bind(null,s,l,i),m=void 0,!rc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(s,l,{capture:!0,passive:m}):i.addEventListener(s,l,!0):m!==void 0?i.addEventListener(s,l,{passive:m}):i.addEventListener(s,l,!1)}function qd(i,s,l,u,m){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var S=u.stateNode.containerInfo;if(S===m)break;if(T===4)for(T=u.return;T!==null;){var b=T.tag;if((b===3||b===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;S!==null;){if(T=Oo(S),T===null)return;if(b=T.tag,b===5||b===6||b===26||b===27){u=y=T;continue e}S=S.parentNode}}u=u.return}Lp(function(){var k=y,H=oc(l),F=[];e:{var U=um.get(i);if(U!==void 0){var L=Ul,te=i;switch(i){case"keypress":if(Dl(l)===0)break e;case"keydown":case"keyup":L=SA;break;case"focusin":te="focus",L=cc;break;case"focusout":te="blur",L=cc;break;case"beforeblur":case"afterblur":L=cc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=cA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=wA;break;case sm:case rm:case lm:L=hA;break;case am:L=IA;break;case"scroll":case"scrollend":L=aA;break;case"wheel":L=RA;break;case"copy":case"cut":case"paste":L=mA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Gp;break;case"toggle":case"beforetoggle":L=MA}var ae=(s&4)!==0,qe=!ae&&(i==="scroll"||i==="scrollend"),R=ae?U!==null?U+"Capture":null:U;ae=[];for(var N=k,D;N!==null;){var G=N;if(D=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||D===null||R===null||(G=er(N,R),G!=null&&ae.push(kr(N,G,D))),qe)break;N=N.return}0<ae.length&&(U=new L(U,te,null,l,H),F.push({event:U,listeners:ae}))}}if((s&7)===0){e:{if(U=i==="mouseover"||i==="pointerover",L=i==="mouseout"||i==="pointerout",U&&l!==ic&&(te=l.relatedTarget||l.fromElement)&&(Oo(te)||te[Po]))break e;if((L||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,L?(te=l.relatedTarget||l.toElement,L=k,te=te?Oo(te):null,te!==null&&(qe=a(te),ae=te.tag,te!==qe||ae!==5&&ae!==27&&ae!==6)&&(te=null)):(L=null,te=k),L!==te)){if(ae=Hp,G="onMouseLeave",R="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(ae=Gp,G="onPointerLeave",R="onPointerEnter",N="pointer"),qe=L==null?U:js(L),D=te==null?U:js(te),U=new ae(G,N+"leave",L,l,H),U.target=qe,U.relatedTarget=D,G=null,Oo(H)===k&&(ae=new ae(R,N+"enter",te,l,H),ae.target=D,ae.relatedTarget=qe,G=ae),qe=G,L&&te)t:{for(ae=xw,R=L,N=te,D=0,G=R;G;G=ae(G))D++;G=0;for(var se=N;se;se=ae(se))G++;for(;0<D-G;)R=ae(R),D--;for(;0<G-D;)N=ae(N),G--;for(;D--;){if(R===N||N!==null&&R===N.alternate){ae=R;break t}R=ae(R),N=ae(N)}ae=null}else ae=null;L!==null&&My(F,U,L,ae,!1),te!==null&&qe!==null&&My(F,qe,te,ae,!0)}}e:{if(U=k?js(k):window,L=U.nodeName&&U.nodeName.toLowerCase(),L==="select"||L==="input"&&U.type==="file")var Re=Wp;else if(Jp(U))if($p)Re=qA;else{Re=VA;var ie=HA}else L=U.nodeName,!L||L.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?k&&nc(k.elementType)&&(Re=Wp):Re=GA;if(Re&&(Re=Re(i,k))){Kp(F,Re,l,H);break e}ie&&ie(i,U,k),i==="focusout"&&k&&U.type==="number"&&k.memoizedProps.value!=null&&tc(U,"number",U.value)}switch(ie=k?js(k):window,i){case"focusin":(Jp(ie)||ie.contentEditable==="true")&&(Jo=ie,gc=k,ar=null);break;case"focusout":ar=gc=Jo=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,im(F,l,H);break;case"selectionchange":if(BA)break;case"keydown":case"keyup":im(F,l,H)}var ye;if(fc)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Yo?zp(i,l)&&(Ae="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ae="onCompositionStart");Ae&&(qp&&l.locale!=="ko"&&(Yo||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Yo&&(ye=Pp()):(pi=H,lc="value"in pi?pi.value:pi.textContent,Yo=!0)),ie=Aa(k,Ae),0<ie.length&&(Ae=new Vp(Ae,i,null,l,H),F.push({event:Ae,listeners:ie}),ye?Ae.data=ye:(ye=Yp(l),ye!==null&&(Ae.data=ye)))),(ye=kA?UA(i,l):LA(i,l))&&(Ae=Aa(k,"onBeforeInput"),0<Ae.length&&(ie=new Vp("onBeforeInput","beforeinput",null,l,H),F.push({event:ie,listeners:Ae}),ie.data=ye)),bw(F,i,k,l,H)}Ry(F,s)})}function kr(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Aa(i,s){for(var l=s+"Capture",u=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=er(i,l),m!=null&&u.unshift(kr(i,m,y)),m=er(i,s),m!=null&&u.push(kr(i,m,y))),i.tag===3)return u;i=i.return}return[]}function xw(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function My(i,s,l,u,m){for(var y=s._reactName,T=[];l!==null&&l!==u;){var S=l,b=S.alternate,k=S.stateNode;if(S=S.tag,b!==null&&b===u)break;S!==5&&S!==26&&S!==27||k===null||(b=k,m?(k=er(l,y),k!=null&&T.unshift(kr(l,k,b))):m||(k=er(l,y),k!=null&&T.push(kr(l,k,b)))),l=l.return}T.length!==0&&i.push({event:s,listeners:T})}var Mw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function Dy(i){return(typeof i=="string"?i:""+i).replace(Mw,`
`).replace(Dw,"")}function ky(i,s){return s=Dy(s),Dy(i)===s}function Ge(i,s,l,u,m,y){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Fo(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Fo(i,""+u);break;case"className":Nl(i,"class",u);break;case"tabIndex":Nl(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Nl(i,l,u);break;case"style":kp(i,u,y);break;case"data":if(s!=="object"){Nl(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=xl(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&Ge(i,s,"name",m.name,m,null),Ge(i,s,"formEncType",m.formEncType,m,null),Ge(i,s,"formMethod",m.formMethod,m,null),Ge(i,s,"formTarget",m.formTarget,m,null)):(Ge(i,s,"encType",m.encType,m,null),Ge(i,s,"method",m.method,m,null),Ge(i,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=xl(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=Pn);break;case"onScroll":u!=null&&Te("scroll",i);break;case"onScrollEnd":u!=null&&Te("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=xl(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Te("beforetoggle",i),Te("toggle",i),Il(i,"popover",u);break;case"xlinkActuate":Ln(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ln(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ln(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ln(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ln(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ln(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ln(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ln(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ln(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Il(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=rA.get(l)||l,Il(i,l,u))}}function Fd(i,s,l,u,m,y){switch(l){case"style":kp(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(o(60));i.innerHTML=l}}break;case"children":typeof u=="string"?Fo(i,u):(typeof u=="number"||typeof u=="bigint")&&Fo(i,""+u);break;case"onScroll":u!=null&&Te("scroll",i);break;case"onScrollEnd":u!=null&&Te("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ap.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),y=i[Mt]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(s,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,u,m);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):Il(i,l,u)}}}function _t(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",i),Te("load",i);var u=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ge(i,s,y,T,l,null)}}m&&Ge(i,s,"srcSet",l.srcSet,l,null),u&&Ge(i,s,"src",l.src,l,null);return;case"input":Te("invalid",i);var S=y=T=m=null,b=null,k=null;for(u in l)if(l.hasOwnProperty(u)){var H=l[u];if(H!=null)switch(u){case"name":m=H;break;case"type":T=H;break;case"checked":b=H;break;case"defaultChecked":k=H;break;case"value":y=H;break;case"defaultValue":S=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,s));break;default:Ge(i,s,u,H,l,null)}}Rp(i,y,S,b,k,T,m,!1);return;case"select":Te("invalid",i),u=T=y=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":y=S;break;case"defaultValue":T=S;break;case"multiple":u=S;default:Ge(i,s,m,S,l,null)}s=y,l=T,i.multiple=!!u,s!=null?qo(i,!!u,s,!1):l!=null&&qo(i,!!u,l,!0);return;case"textarea":Te("invalid",i),y=m=u=null;for(T in l)if(l.hasOwnProperty(T)&&(S=l[T],S!=null))switch(T){case"value":u=S;break;case"defaultValue":m=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:Ge(i,s,T,S,l,null)}Mp(i,u,m,y);return;case"option":for(b in l)if(l.hasOwnProperty(b)&&(u=l[b],u!=null))switch(b){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ge(i,s,b,u,l,null)}return;case"dialog":Te("beforetoggle",i),Te("toggle",i),Te("cancel",i),Te("close",i);break;case"iframe":case"object":Te("load",i);break;case"video":case"audio":for(u=0;u<Dr.length;u++)Te(Dr[u],i);break;case"image":Te("error",i),Te("load",i);break;case"details":Te("toggle",i);break;case"embed":case"source":case"link":Te("error",i),Te("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in l)if(l.hasOwnProperty(k)&&(u=l[k],u!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ge(i,s,k,u,l,null)}return;default:if(nc(s)){for(H in l)l.hasOwnProperty(H)&&(u=l[H],u!==void 0&&Fd(i,s,H,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Ge(i,s,S,u,l,null))}function kw(i,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,S=null,b=null,k=null,H=null;for(L in l){var F=l[L];if(l.hasOwnProperty(L)&&F!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":b=F;default:u.hasOwnProperty(L)||Ge(i,s,L,null,u,F)}}for(var U in u){var L=u[U];if(F=l[U],u.hasOwnProperty(U)&&(L!=null||F!=null))switch(U){case"type":y=L;break;case"name":m=L;break;case"checked":k=L;break;case"defaultChecked":H=L;break;case"value":T=L;break;case"defaultValue":S=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:L!==F&&Ge(i,s,U,L,u,F)}}ec(i,T,S,b,k,H,y,m);return;case"select":L=T=S=U=null;for(y in l)if(b=l[y],l.hasOwnProperty(y)&&b!=null)switch(y){case"value":break;case"multiple":L=b;default:u.hasOwnProperty(y)||Ge(i,s,y,null,u,b)}for(m in u)if(y=u[m],b=l[m],u.hasOwnProperty(m)&&(y!=null||b!=null))switch(m){case"value":U=y;break;case"defaultValue":S=y;break;case"multiple":T=y;default:y!==b&&Ge(i,s,m,y,u,b)}s=S,l=T,u=L,U!=null?qo(i,!!l,U,!1):!!u!=!!l&&(s!=null?qo(i,!!l,s,!0):qo(i,!!l,l?[]:"",!1));return;case"textarea":L=U=null;for(S in l)if(m=l[S],l.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ge(i,s,S,null,u,m)}for(T in u)if(m=u[T],y=l[T],u.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":U=m;break;case"defaultValue":L=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==y&&Ge(i,s,T,m,u,y)}xp(i,U,L);return;case"option":for(var te in l)if(U=l[te],l.hasOwnProperty(te)&&U!=null&&!u.hasOwnProperty(te))switch(te){case"selected":i.selected=!1;break;default:Ge(i,s,te,null,u,U)}for(b in u)if(U=u[b],L=l[b],u.hasOwnProperty(b)&&U!==L&&(U!=null||L!=null))switch(b){case"selected":i.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Ge(i,s,b,U,u,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ae in l)U=l[ae],l.hasOwnProperty(ae)&&U!=null&&!u.hasOwnProperty(ae)&&Ge(i,s,ae,null,u,U);for(k in u)if(U=u[k],L=l[k],u.hasOwnProperty(k)&&U!==L&&(U!=null||L!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(137,s));break;default:Ge(i,s,k,U,u,L)}return;default:if(nc(s)){for(var qe in l)U=l[qe],l.hasOwnProperty(qe)&&U!==void 0&&!u.hasOwnProperty(qe)&&Fd(i,s,qe,void 0,u,U);for(H in u)U=u[H],L=l[H],!u.hasOwnProperty(H)||U===L||U===void 0&&L===void 0||Fd(i,s,H,U,u,L);return}}for(var R in l)U=l[R],l.hasOwnProperty(R)&&U!=null&&!u.hasOwnProperty(R)&&Ge(i,s,R,null,u,U);for(F in u)U=u[F],L=l[F],!u.hasOwnProperty(F)||U===L||U==null&&L==null||Ge(i,s,F,U,u,L)}function Uy(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Uw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var m=l[u],y=m.transferSize,T=m.initiatorType,S=m.duration;if(y&&S&&Uy(T)){for(T=0,S=m.responseEnd,u+=1;u<l.length;u++){var b=l[u],k=b.startTime;if(k>S)break;var H=b.transferSize,F=b.initiatorType;H&&Uy(F)&&(b=b.responseEnd,T+=H*(b<S?1:(S-k)/(b-k)))}if(--u,s+=8*(y+T)/(m.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Bd=null,zd=null;function wa(i){return i.nodeType===9?i:i.ownerDocument}function Ly(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Py(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Yd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jd=null;function Lw(){var i=window.event;return i&&i.type==="popstate"?i===Jd?!1:(Jd=i,!0):(Jd=null,!1)}var Oy=typeof setTimeout=="function"?setTimeout:void 0,Pw=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(i){return Hy.resolve(null).then(i).catch(Hw)}:Oy;function Hw(i){setTimeout(function(){throw i})}function Mi(i){return i==="head"}function Vy(i,s){var l=s,u=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(u===0){i.removeChild(m),vs(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Ur(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Ur(l);for(var y=l.firstChild;y;){var T=y.nextSibling,S=y.nodeName;y[Zs]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&Ur(i.ownerDocument.body);l=m}while(l);vs(s)}function Gy(i,s){var l=i;i=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=u}while(l)}function Kd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Kd(l),Zu(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function Vw(i,s,l,u){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Zs])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=ln(i.nextSibling),i===null)break}return null}function Gw(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ln(i.nextSibling),i===null))return null;return i}function qy(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=ln(i.nextSibling),i===null))return null;return i}function Wd(i){return i.data==="$?"||i.data==="$~"}function $d(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function qw(i,s){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function ln(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Xd=null;function Fy(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(s===0)return ln(i.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}i=i.nextSibling}return null}function By(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return i;s--}else l!=="/$"&&l!=="/&"||s++}i=i.previousSibling}return null}function zy(i,s,l){switch(s=wa(l),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Ur(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Zu(i)}var an=new Map,Yy=new Set;function ba(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Zn=q.d;q.d={f:Fw,r:Bw,D:zw,C:Yw,L:Jw,m:Kw,X:$w,S:Ww,M:Xw};function Fw(){var i=Zn.f(),s=ya();return i||s}function Bw(i){var s=Ho(i);s!==null&&s.tag===5&&s.type==="form"?ag(s):Zn.r(i)}var gs=typeof document>"u"?null:document;function Jy(i,s,l){var u=gs;if(u&&typeof s=="string"&&s){var m=jt(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Yy.has(m)||(Yy.add(m),i={rel:i,crossOrigin:l,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),_t(s,"link",i),at(s),u.head.appendChild(s)))}}function zw(i){Zn.D(i),Jy("dns-prefetch",i,null)}function Yw(i,s){Zn.C(i,s),Jy("preconnect",i,s)}function Jw(i,s,l){Zn.L(i,s,l);var u=gs;if(u&&i&&s){var m='link[rel="preload"][as="'+jt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+jt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+jt(l.imageSizes)+'"]')):m+='[href="'+jt(i)+'"]';var y=m;switch(s){case"style":y=ys(i);break;case"script":y=_s(i)}an.has(y)||(i=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),an.set(y,i),u.querySelector(m)!==null||s==="style"&&u.querySelector(Lr(y))||s==="script"&&u.querySelector(Pr(y))||(s=u.createElement("link"),_t(s,"link",i),at(s),u.head.appendChild(s)))}}function Kw(i,s){Zn.m(i,s);var l=gs;if(l&&i){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(i)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=_s(i)}if(!an.has(y)&&(i=v({rel:"modulepreload",href:i},s),an.set(y,i),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Pr(y)))return}u=l.createElement("link"),_t(u,"link",i),at(u),l.head.appendChild(u)}}}function Ww(i,s,l){Zn.S(i,s,l);var u=gs;if(u&&i){var m=Vo(u).hoistableStyles,y=ys(i);s=s||"default";var T=m.get(y);if(!T){var S={loading:0,preload:null};if(T=u.querySelector(Lr(y)))S.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},l),(l=an.get(y))&&Qd(i,l);var b=T=u.createElement("link");at(b),_t(b,"link",i),b._p=new Promise(function(k,H){b.onload=k,b.onerror=H}),b.addEventListener("load",function(){S.loading|=1}),b.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ia(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:S},m.set(y,T)}}}function $w(i,s){Zn.X(i,s);var l=gs;if(l&&i){var u=Vo(l).hoistableScripts,m=_s(i),y=u.get(m);y||(y=l.querySelector(Pr(m)),y||(i=v({src:i,async:!0},s),(s=an.get(m))&&Zd(i,s),y=l.createElement("script"),at(y),_t(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function Xw(i,s){Zn.M(i,s);var l=gs;if(l&&i){var u=Vo(l).hoistableScripts,m=_s(i),y=u.get(m);y||(y=l.querySelector(Pr(m)),y||(i=v({src:i,async:!0,type:"module"},s),(s=an.get(m))&&Zd(i,s),y=l.createElement("script"),at(y),_t(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function Ky(i,s,l,u){var m=(m=ve.current)?ba(m):null;if(!m)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ys(l.href),l=Vo(m).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=ys(l.href);var y=Vo(m).hoistableStyles,T=y.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,T),(y=m.querySelector(Lr(i)))&&!y._p&&(T.instance=y,T.state.loading=5),an.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},an.set(i,l),y||Qw(m,i,l,T.state))),s&&u===null)throw Error(o(528,""));return T}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_s(l),l=Vo(m).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function ys(i){return'href="'+jt(i)+'"'}function Lr(i){return'link[rel="stylesheet"]['+i+"]"}function Wy(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function Qw(i,s,l,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),_t(s,"link",l),at(s),i.head.appendChild(s))}function _s(i){return'[src="'+jt(i)+'"]'}function Pr(i){return"script[async]"+i}function $y(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+jt(l.href)+'"]');if(u)return s.instance=u,at(u),u;var m=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),at(u),_t(u,"style",m),Ia(u,l.precedence,i),s.instance=u;case"stylesheet":m=ys(l.href);var y=i.querySelector(Lr(m));if(y)return s.state.loading|=4,s.instance=y,at(y),y;u=Wy(l),(m=an.get(m))&&Qd(u,m),y=(i.ownerDocument||i).createElement("link"),at(y);var T=y;return T._p=new Promise(function(S,b){T.onload=S,T.onerror=b}),_t(y,"link",u),s.state.loading|=4,Ia(y,l.precedence,i),s.instance=y;case"script":return y=_s(l.src),(m=i.querySelector(Pr(y)))?(s.instance=m,at(m),m):(u=l,(m=an.get(y))&&(u=v({},l),Zd(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),at(m),_t(m,"link",u),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ia(u,l.precedence,i));return s.instance}function Ia(i,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,T=0;T<u.length;T++){var S=u[T];if(S.dataset.precedence===s)y=S;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function Qd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Zd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Na=null;function Xy(i,s,l){if(Na===null){var u=new Map,m=Na=new Map;m.set(l,u)}else m=Na,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var y=l[m];if(!(y[Zs]||y[pt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=i+T;var S=u.get(T);S?S.push(y):u.set(T,[y])}}return u}function Qy(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function Zw(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function jw(i,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=ys(u.href),y=s.querySelector(Lr(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Ra.bind(i),s.then(i,i)),l.state.loading|=4,l.instance=y,at(y);return}y=s.ownerDocument||s,u=Wy(u),(m=an.get(m))&&Qd(u,m),y=y.createElement("link"),at(y);var T=y;T._p=new Promise(function(S,b){T.onload=S,T.onerror=b}),_t(y,"link",u),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Ra.bind(i),s.addEventListener("load",l),s.addEventListener("error",l))}}var jd=0;function eb(i,s){return i.stylesheets&&i.count===0&&Ma(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var u=setTimeout(function(){if(i.stylesheets&&Ma(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&jd===0&&(jd=62500*Uw());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ma(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>jd?50:800)+s);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Ra(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ma(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var xa=null;function Ma(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,xa=new Map,s.forEach(tb,i),xa=null,Ra.call(i))}function tb(i,s){if(!(s.state.loading&4)){var l=xa.get(i);if(l)var u=l.get(null);else{l=new Map,xa.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}m=s.instance,T=m.getAttribute("data-precedence"),y=l.get(T)||u,y===u&&l.set(null,m),l.set(T,m),this.count++,u=Ra.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var Or={$$typeof:B,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function nb(i,s,l,u,m,y,T,S,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.hiddenUpdates=Wu(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function jy(i,s,l,u,m,y,T,S,b,k,H,F){return i=new nb(i,s,l,T,b,k,H,F,S),s=1,y===!0&&(s|=24),y=Bt(3,null,null,s),i.current=y,y.stateNode=i,s=Dc(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:s},Pc(y),i}function e_(i){return i?(i=$o,i):$o}function t_(i,s,l,u,m,y){m=e_(m),u.context===null?u.context=m:u.pendingContext=m,u=Ei(s),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Ti(i,u,s),l!==null&&(Ot(l,i,s),mr(l,i,s))}function n_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function ef(i,s){n_(i,s),(i=i.alternate)&&n_(i,s)}function i_(i){if(i.tag===13||i.tag===31){var s=oo(i,67108864);s!==null&&Ot(s,i,67108864),ef(i,67108864)}}function o_(i){if(i.tag===13||i.tag===31){var s=Wt();s=$u(s);var l=oo(i,s);l!==null&&Ot(l,i,s),ef(i,s)}}var Da=!0;function ib(i,s,l,u){var m=P.T;P.T=null;var y=q.p;try{q.p=2,tf(i,s,l,u)}finally{q.p=y,P.T=m}}function ob(i,s,l,u){var m=P.T;P.T=null;var y=q.p;try{q.p=8,tf(i,s,l,u)}finally{q.p=y,P.T=m}}function tf(i,s,l,u){if(Da){var m=nf(u);if(m===null)qd(i,s,u,ka,l),r_(i,u);else if(rb(m,i,s,l,u))u.stopPropagation();else if(r_(i,u),s&4&&-1<sb.indexOf(i)){for(;m!==null;){var y=Ho(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=ji(y.pendingLanes);if(T!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var b=1<<31-qt(T);S.entanglements[1]|=b,T&=~b}xn(y),(De&6)===0&&(ma=Vt()+500,Mr(0))}}break;case 31:case 13:S=oo(y,2),S!==null&&Ot(S,y,2),ya(),ef(y,2)}if(y=nf(u),y===null&&qd(i,s,u,ka,l),y===m)break;m=y}m!==null&&u.stopPropagation()}else qd(i,s,u,null,l)}}function nf(i){return i=oc(i),of(i)}var ka=null;function of(i){if(ka=null,i=Oo(i),i!==null){var s=a(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=c(s),i!==null)return i;i=null}else if(l===31){if(i=h(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return ka=i,null}function s_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zC()){case hp:return 2;case pp:return 8;case Sl:case YC:return 32;case mp:return 268435456;default:return 32}default:return 32}}var sf=!1,Di=null,ki=null,Ui=null,Hr=new Map,Vr=new Map,Li=[],sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(i,s){switch(i){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Hr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(s.pointerId)}}function Gr(i,s,l,u,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},s!==null&&(s=Ho(s),s!==null&&i_(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function rb(i,s,l,u,m){switch(s){case"focusin":return Di=Gr(Di,i,s,l,u,m),!0;case"dragenter":return ki=Gr(ki,i,s,l,u,m),!0;case"mouseover":return Ui=Gr(Ui,i,s,l,u,m),!0;case"pointerover":var y=m.pointerId;return Hr.set(y,Gr(Hr.get(y)||null,i,s,l,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Vr.set(y,Gr(Vr.get(y)||null,i,s,l,u,m)),!0}return!1}function l_(i){var s=Oo(i.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){i.blockedOn=s,Tp(i.priority,function(){o_(l)});return}}else if(s===31){if(s=h(l),s!==null){i.blockedOn=s,Tp(i.priority,function(){o_(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ua(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=nf(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);ic=u,l.target.dispatchEvent(u),ic=null}else return s=Ho(l),s!==null&&i_(s),i.blockedOn=l,!1;s.shift()}return!0}function a_(i,s,l){Ua(i)&&l.delete(s)}function lb(){sf=!1,Di!==null&&Ua(Di)&&(Di=null),ki!==null&&Ua(ki)&&(ki=null),Ui!==null&&Ua(Ui)&&(Ui=null),Hr.forEach(a_),Vr.forEach(a_)}function La(i,s){i.blockedOn===s&&(i.blockedOn=null,sf||(sf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lb)))}var Pa=null;function u_(i){Pa!==i&&(Pa=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pa===i&&(Pa=null);for(var s=0;s<i.length;s+=3){var l=i[s],u=i[s+1],m=i[s+2];if(typeof u!="function"){if(of(u||l)===null)continue;break}var y=Ho(l);y!==null&&(i.splice(s,3),s-=3,nd(y,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function vs(i){function s(b){return La(b,i)}Di!==null&&La(Di,i),ki!==null&&La(ki,i),Ui!==null&&La(Ui,i),Hr.forEach(s),Vr.forEach(s);for(var l=0;l<Li.length;l++){var u=Li[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Li.length&&(l=Li[0],l.blockedOn===null);)l_(l),l.blockedOn===null&&Li.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],y=l[u+1],T=m[Mt]||null;if(typeof y=="function")T||u_(l);else if(T){var S=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Mt]||null)S=T.formAction;else if(of(m)!==null)continue}else S=T.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),u_(l)}}}function c_(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function rf(i){this._internalRoot=i}Oa.prototype.render=rf.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,u=Wt();t_(l,u,i,s,null,null)},Oa.prototype.unmount=rf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;t_(i.current,2,null,i,null,null),ya(),s[Po]=null}};function Oa(i){this._internalRoot=i}Oa.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ep();i={blockedOn:null,target:i,priority:s};for(var l=0;l<Li.length&&s!==0&&s<Li[l].priority;l++);Li.splice(l,0,i),l===0&&l_(i)}};var d_=e.version;if(d_!=="19.2.3")throw Error(o(527,d_,"19.2.3"));q.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=p(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var ab={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{$s=Ha.inject(ab),Gt=Ha}catch{}}return Fr.createRoot=function(i,s){if(!r(i))throw Error(o(299));var l=!1,u="",m=_g,y=vg,T=Eg;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=jy(i,1,!1,null,null,l,u,null,m,y,T,c_),i[Po]=s.current,Gd(i),new rf(s)},Fr.hydrateRoot=function(i,s,l){if(!r(i))throw Error(o(299));var u=!1,m="",y=_g,T=vg,S=Eg,b=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(b=l.formState)),s=jy(i,1,!0,s,l??null,u,m,b,y,T,S,c_),s.context=e_(null),l=s.current,u=Wt(),u=$u(u),m=Ei(u),m.callback=null,Ti(l,m,u),l=u,s.current.lanes=l,Qs(s,l),xn(s),i[Po]=s.current,Gd(i),new Oa(s)},Fr.version="19.2.3",Fr}var T_;function Eb(){if(T_)return uf.exports;T_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uf.exports=vb(),uf.exports}var Tb=Eb();const Sb=()=>{};var S_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W=function(t,e){if(!t)throw Vs(e)},Vs=function(t){return new Error("Firebase Database ("+SE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Cb=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const r=t[n++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[o++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],c=t[n++],h=t[n++],g=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],c=t[n++];e[o++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},ph={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<t.length;r+=3){const a=t[r],c=r+1<t.length,h=c?t[r+1]:0,g=r+2<t.length,p=g?t[r+2]:0,_=a>>2,v=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,A=p&63;g||(A=64,c||(E=64)),o.push(n[_],n[v],n[E],n[A])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],h=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||h==null||p==null||v==null)throw new Ab;const E=a<<2|h>>4;if(o.push(E),p!==64){const A=h<<4&240|p>>2;if(o.push(A),v!==64){const I=p<<6&192|v;o.push(I)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ab extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AE=function(t){const e=CE(t);return ph.encodeByteArray(e,!0)},tu=function(t){return AE(t).replace(/\./g,"")},il=function(t){try{return ph.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){return ol(void 0,t)}function ol(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!bb(n)||(t[n]=ol(t[n],e[n]));return t}function bb(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=()=>wE().__FIREBASE_DEFAULTS__,Nb=()=>{if(typeof process>"u"||typeof S_>"u")return;const t=S_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&il(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return Sb()||Ib()||Nb()||Rb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bE=t=>{var e,n;return(n=(e=mh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},xb=t=>{const e=bE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},gh=()=>{var t;return(t=mh())==null?void 0:t.config},IE=t=>{var e;return(e=mh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[tu(JSON.stringify(n)),tu(JSON.stringify(c)),""].join(".")}const Qr={};function Db(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qr))Qr[e]?t.emulator.push(e):t.prod.push(e);return t}function kb(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let C_=!1;function RE(t,e){if(typeof window>"u"||typeof document>"u"||!Gs(window.location.host)||Qr[t]===e||Qr[t]||C_)return;Qr[t]=e;function n(E){return`__firebase__banner__${E}`}const o="__firebase__banner",a=Db().prod.length>0;function c(){const E=document.getElementById(o);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{C_=!0,c()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=kb(o),A=n("text"),I=document.getElementById(A)||document.createElement("span"),M=n("learnmore"),x=document.getElementById(M)||document.createElement("a"),O=n("preprendIcon"),z=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const B=E.element;h(B),_(x,M);const Y=p();g(z,O),B.append(z,I,x,Y),document.body.appendChild(B)}a?(I.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _h(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function Ub(){return typeof window<"u"||xE()}function xE(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Lb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ME(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ob(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Hb(){return SE.NODE_ADMIN===!0}function Vb(){try{return typeof indexedDB=="object"}catch{return!1}}function Gb(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="FirebaseError";class ui extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=qb,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ro.prototype.create)}}class Ro{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?Fb(a,o):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new ui(r,h,o)}}function Fb(t,e){return t.replace(Bb,(n,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const Bb=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){return JSON.parse(t)}function vt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(t){let e={},n={},o={},r="";try{const a=t.split(".");e=sl(il(a[0])||""),n=sl(il(a[1])||""),r=a[2],o=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:o,signature:r}},zb=function(t){const e=DE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Yb=function(t){const e=DE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Us(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Mf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nu(t,e,n){const o={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=e.call(n,t[r],r,t));return o}function So(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const r of n){if(!o.includes(r))return!1;const a=t[r],c=e[r];if(A_(a)&&A_(c)){if(!So(a,c))return!1}else if(a!==c)return!1}for(const r of o)if(!n.includes(r))return!1;return!0}function A_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){const e=[];for(const[n,o]of Object.entries(t))Array.isArray(o)?o.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Wr(t){const e={};return t.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[r,a]=o.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function $r(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const o=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)o[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)o[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const E=o[v-3]^o[v-8]^o[v-14]^o[v-16];o[v]=(E<<1|E>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],p,_;for(let v=0;v<80;v++){v<40?v<20?(p=h^a&(c^h),_=1518500249):(p=a^c^h,_=1859775393):v<60?(p=a&c|h&(a|c),_=2400959708):(p=a^c^h,_=3395469782);const E=(r<<5|r>>>27)+p+g+_+o[v]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=r,r=E}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const o=n-this.blockSize;let r=0;const a=this.buf_;let c=this.inbuf_;for(;r<n;){if(c===0)for(;r<=o;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(a[c]=e.charCodeAt(r),++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}else for(;r<n;)if(a[c]=e[r],++c,++r,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let o=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)e[o]=this.chain_[r]>>a&255,++o;return e}}function kE(t,e){const n=new Kb(t,e);return n.subscribe.bind(n)}class Kb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let r;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");Wb(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:o},r.next===void 0&&(r.next=hf),r.error===void 0&&(r.error=hf),r.complete===void 0&&(r.complete=hf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hf(){}function $b(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);if(r>=55296&&r<=56319){const a=r-55296;o++,W(o<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(o)-56320;r=65536+(a<<10)+c}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},wu=function(t){let e=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class zi{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new yh;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jb(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});o.resolve(a)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);o===h&&c.resolve(r)}return r}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const a=this.instances.get(o);return a&&e(a,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const r of o)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Zb(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zb(t){return t===_o?void 0:t}function jb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=[];var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const LE={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},eI=He.INFO,tI={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},nI=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),r=tI[e];if(r)console[r](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bu{constructor(e){this.name=e,this._logLevel=eI,this._logHandler=nI,this._userLogHandler=null,vh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}function iI(t){vh.forEach(e=>{e.setLogLevel(t)})}function oI(t,e){for(const n of vh){let o=null;e&&e.level&&(o=LE[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,a,...c)=>{const h=c.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");a>=(o??r.logLevel)&&t({level:He[a].toLowerCase(),message:h,args:c,type:r.name})}}}const sI=(t,e)=>e.some(n=>t instanceof n);let w_,b_;function rI(){return w_||(w_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lI(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PE=new WeakMap,Df=new WeakMap,OE=new WeakMap,pf=new WeakMap,Eh=new WeakMap;function aI(t){const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Fi(t.result)),r()},c=()=>{o(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&PE.set(n,t)}).catch(()=>{}),Eh.set(e,t),e}function uI(t){if(Df.has(t))return;const e=new Promise((n,o)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),r()},c=()=>{o(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Df.set(t,e)}let kf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cI(t){kf=t(kf)}function dI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(mf(this),e,...n);return OE.set(o,e.sort?e.sort():[e]),Fi(o)}:lI().includes(t)?function(...e){return t.apply(mf(this),e),Fi(PE.get(this))}:function(...e){return Fi(t.apply(mf(this),e))}}function fI(t){return typeof t=="function"?dI(t):(t instanceof IDBTransaction&&uI(t),sI(t,rI())?new Proxy(t,kf):t)}function Fi(t){if(t instanceof IDBRequest)return aI(t);if(pf.has(t))return pf.get(t);const e=fI(t);return e!==t&&(pf.set(t,e),Eh.set(e,t)),e}const mf=t=>Eh.get(t);function hI(t,e,{blocked:n,upgrade:o,blocking:r,terminated:a}={}){const c=indexedDB.open(t,e),h=Fi(c);return o&&c.addEventListener("upgradeneeded",g=>{o(Fi(c.result),g.oldVersion,g.newVersion,Fi(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const pI=["get","getKey","getAll","getAllKeys","count"],mI=["put","add","delete","clear"],gf=new Map;function I_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=mI.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(r||pI.includes(n)))return;const a=async function(c,...h){const g=this.transaction(c,r?"readwrite":"readonly");let p=g.store;return o&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&g.done]))[0]};return gf.set(e,a),a}cI(t=>({...t,get:(e,n,o)=>I_(e,n)||t.get(e,n,o),has:(e,n)=>!!I_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yI(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function yI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iu="@firebase/app",Uf="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new bu("@firebase/app"),_I="@firebase/app-compat",vI="@firebase/analytics-compat",EI="@firebase/analytics",TI="@firebase/app-check-compat",SI="@firebase/app-check",CI="@firebase/auth",AI="@firebase/auth-compat",wI="@firebase/database",bI="@firebase/data-connect",II="@firebase/database-compat",NI="@firebase/functions",RI="@firebase/functions-compat",xI="@firebase/installations",MI="@firebase/installations-compat",DI="@firebase/messaging",kI="@firebase/messaging-compat",UI="@firebase/performance",LI="@firebase/performance-compat",PI="@firebase/remote-config",OI="@firebase/remote-config-compat",HI="@firebase/storage",VI="@firebase/storage-compat",GI="@firebase/firestore",qI="@firebase/ai",FI="@firebase/firestore-compat",BI="firebase",zI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="[DEFAULT]",YI={[iu]:"fire-core",[_I]:"fire-core-compat",[EI]:"fire-analytics",[vI]:"fire-analytics-compat",[SI]:"fire-app-check",[TI]:"fire-app-check-compat",[CI]:"fire-auth",[AI]:"fire-auth-compat",[wI]:"fire-rtdb",[bI]:"fire-data-connect",[II]:"fire-rtdb-compat",[NI]:"fire-fn",[RI]:"fire-fn-compat",[xI]:"fire-iid",[MI]:"fire-iid-compat",[DI]:"fire-fcm",[kI]:"fire-fcm-compat",[UI]:"fire-perf",[LI]:"fire-perf-compat",[PI]:"fire-rc",[OI]:"fire-rc-compat",[HI]:"fire-gcs",[VI]:"fire-gcs-compat",[GI]:"fire-fst",[FI]:"fire-fst-compat",[qI]:"fire-vertex","fire-js":"fire-js",[BI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Map,Ls=new Map,Ps=new Map;function rl(t,e){try{t.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function HE(t,e){t.container.addOrOverwriteComponent(e)}function Ki(t){const e=t.name;if(Ps.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;Ps.set(e,t);for(const n of Ji.values())rl(n,t);for(const n of Ls.values())rl(n,t);return!0}function dl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function JI(t,e,n=Yi){dl(t,e).clearInstance(n)}function Th(t){return t.options!==void 0}function VE(t){return Th(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function $t(t){return t==null?!1:t.settings!==void 0}function KI(){Ps.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Ro("app","Firebase",WI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GE=class{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t,e){const n=il(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,a=new Date().getTime();r-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class $I extends GE{constructor(e,n,o,r){const a=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,c={name:o,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,c,r);else{const h=e;super(h.options,c,r)}this._serverConfig={automaticDataCollectionEnabled:a,...n},this._serverConfig.authIdToken&&N_(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&N_(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,En(iu,Uf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ah(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xt.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=zI;function Sh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o={name:Yi,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Xt.create("bad-app-name",{appName:String(r)});if(n||(n=gh()),!n)throw Xt.create("no-options");const a=Ji.get(r);if(a){if(So(n,a.options)&&So(o,a.config))return a;throw Xt.create("duplicate-app",{appName:r})}const c=new UE(r);for(const g of Ps.values())c.addComponent(g);const h=new GE(n,o,c);return Ji.set(r,h),h}function XI(t,e={}){if(Ub()&&!xE())throw Xt.create("invalid-server-app-environment");let n,o=e||{};if(t&&(Th(t)?n=t.options:VE(t)?o=t:n=t),o.automaticDataCollectionEnabled===void 0&&(o.automaticDataCollectionEnabled=!0),n||(n=gh()),!n)throw Xt.create("no-options");const r={...o,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=_=>[..._].reduce((v,E)=>Math.imul(31,v)+E.charCodeAt(0)|0,0);if(o.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xt.create("finalization-registry-not-supported",{});const c=""+a(JSON.stringify(r)),h=Ls.get(c);if(h)return h.incRefCount(o.releaseOnDeref),h;const g=new UE(c);for(const _ of Ps.values())g.addComponent(_);const p=new $I(n,o,c,g);return Ls.set(c,p),p}function Ch(t=Yi){const e=Ji.get(t);if(!e&&t===Yi&&gh())return Sh();if(!e)throw Xt.create("no-app",{appName:t});return e}function QI(){return Array.from(Ji.values())}async function Ah(t){let e=!1;const n=t.name;Ji.has(n)?(e=!0,Ji.delete(n)):Ls.has(n)&&t.decRefCount()<=0&&(Ls.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(o=>o.delete())),t.isDeleted=!0)}function En(t,e,n){let o=YI[t]??t;n&&(o+=`-${n}`);const r=o.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(c.join(" "));return}Ki(new zi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}function qE(t,e){if(t!==null&&typeof t!="function")throw Xt.create("invalid-log-argument");oI(t,e)}function FE(t){iI(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebase-heartbeat-database",jI=1,ll="firebase-heartbeat-store";let yf=null;function BE(){return yf||(yf=hI(ZI,jI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xt.create("idb-open",{originalErrorMessage:t.message})})),yf}async function eN(t){try{const n=(await BE()).transaction(ll),o=await n.objectStore(ll).get(zE(t));return await n.done,o}catch(e){if(e instanceof ui)si.warn(e.message);else{const n=Xt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});si.warn(n.message)}}}async function R_(t,e){try{const o=(await BE()).transaction(ll,"readwrite");await o.objectStore(ll).put(e,zE(t)),await o.done}catch(n){if(n instanceof ui)si.warn(n.message);else{const o=Xt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});si.warn(o.message)}}}function zE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30;class iN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sN(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=x_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>nN){const c=rN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){si.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x_(),{heartbeatsToSend:o,unsentEntries:r}=oN(this._heartbeatsCache.heartbeats),a=tu(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return si.warn(n),""}}}function x_(){return new Date().toISOString().substring(0,10)}function oN(t,e=tN){const n=[];let o=t.slice();for(const r of t){const a=n.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),M_(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),M_(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class sN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vb()?Gb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return R_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return R_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function M_(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}function rN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){Ki(new zi("platform-logger",e=>new gI(e),"PRIVATE")),Ki(new zi("heartbeat",e=>new iN(e),"PRIVATE")),En(iu,Uf,t),En(iu,Uf,"esm2020"),En("fire-js","")}lN("");const aN=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ui,SDK_VERSION:$i,_DEFAULT_ENTRY_NAME:Yi,_addComponent:rl,_addOrOverwriteComponent:HE,_apps:Ji,_clearComponents:KI,_components:Ps,_getProvider:dl,_isFirebaseApp:Th,_isFirebaseServerApp:$t,_isFirebaseServerAppSettings:VE,_registerComponent:Ki,_removeServiceInstance:JI,_serverApps:Ls,deleteApp:Ah,getApp:Ch,getApps:QI,initializeApp:Sh,initializeServerApp:XI,onLog:qE,registerVersion:En,setLogLevel:FE},Symbol.toStringTag,{value:"Module"}));function YE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uN=YE,JE=new Ro("auth","Firebase",YE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new bu("@firebase/auth");function cN(t,...e){ou.logLevel<=He.WARN&&ou.warn(`Auth (${$i}): ${t}`,...e)}function Wa(t,...e){ou.logLevel<=He.ERROR&&ou.error(`Auth (${$i}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw wh(t,...e)}function Dn(t,...e){return wh(t,...e)}function KE(t,e,n){const o={...uN(),[e]:n};return new Ro("auth","Firebase",o).create(e,{appName:t.name})}function ii(t){return KE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wh(t,...e){if(typeof t!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=t.name),t._errorFactory.create(n,...o)}return JE.create(t,...e)}function ue(t,e,...n){if(!t)throw wh(e,...n)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wa(e),new Error(e)}function ri(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dN(){return D_()==="http:"||D_()==="https:"}function D_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dN()||Pb()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=_h()||ME()}get(){return fN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t,e){ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gN=new fl(3e4,6e4);function Xi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Un(t,e,n,o,r={}){return $E(t,r,async()=>{let a={},c={};o&&(e==="GET"?c=o:a={body:JSON.stringify(o)});const h=qs({key:t.config.apiKey,...c}).slice(1),g=await t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:g,...a};return Lb()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(p.credentials="include"),WE.fetch()(await XE(t,t.config.apiHost,n,h),p)})}async function $E(t,e,n){t._canInitEmulator=!1;const o={...pN,...e};try{const r=new _N(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Va(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[g,p]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Va(t,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Va(t,"email-already-in-use",c);if(g==="USER_DISABLED")throw Va(t,"user-disabled",c);const _=o[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw KE(t,_,p);wn(t,_)}}catch(r){if(r instanceof ui)throw r;wn(t,"network-request-failed",{message:String(r)})}}async function hl(t,e,n,o,r={}){const a=await Un(t,e,n,o,r);return"mfaPendingCredential"in a&&wn(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function XE(t,e,n,o){const r=`${e}${n}?${o}`,a=t,c=a.config.emulator?bh(t.config,r):`${t.config.apiScheme}://${r}`;return mN.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function yN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _N{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(Dn(this.auth,"network-request-failed")),gN.get())})}}function Va(t,e,n){const o={appName:t.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const r=Dn(t,e,o);return r.customData._tokenResponse=n,r}function k_(t){return t!==void 0&&t.enterprise!==void 0}class vN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EN(t,e){return Un(t,"GET","/v2/recaptchaConfig",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t,e){return Un(t,"POST","/v1/accounts:delete",e)}async function su(t,e){return Un(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SN(t,e=!1){const n=xt(t),o=await n.getIdToken(e),r=Ih(o);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:r,token:o,authTime:Zr(_f(r.auth_time)),issuedAtTime:Zr(_f(r.iat)),expirationTime:Zr(_f(r.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function _f(t){return Number(t)*1e3}function Ih(t){const[e,n,o]=t.split(".");if(e===void 0||n===void 0||o===void 0)return Wa("JWT malformed, contained fewer than 3 sections"),null;try{const r=il(n);return r?JSON.parse(r):(Wa("Failed to decode base64 JWT payload"),null)}catch(r){return Wa("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function U_(t){const e=Ih(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof ui&&CN(o)&&t.auth.currentUser===t&&await t.auth.signOut(),o}}function CN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zr(this.lastLoginAt),this.creationTime=Zr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t){var v;const e=t.auth,n=await t.getIdToken(),o=await Co(t,su(e,{idToken:n}));ue(o==null?void 0:o.users.length,e,"internal-error");const r=o.users[0];t._notifyReloadListener(r);const a=(v=r.providerUserInfo)!=null&&v.length?QE(r.providerUserInfo):[],c=bN(t.providerData,a),h=t.isAnonymous,g=!(t.email&&r.passwordHash)&&!(c!=null&&c.length),p=h?g:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new Pf(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(t,_)}async function wN(t){const e=xt(t);await ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bN(t,e){return[...t.filter(o=>!e.some(r=>r.providerId===o.providerId)),...e]}function QE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e){const n=await $E(t,{},async()=>{const o=qs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,c=await XE(t,r,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:h,body:o};return t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(g.credentials="include"),WE.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NN(t,e){return Un(t,"POST","/v2/accounts:revokeToken",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=U_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:r,expiresIn:a}=await IN(e,n);this.updateTokensAndExpiration(o,r,Number(a))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:r,expirationTime:a}=n,c=new Is;return o&&(ue(typeof o=="string","internal-error",{appName:e}),c.refreshToken=o),r&&(ue(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),a&&(ue(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Is,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _n{constructor({uid:e,auth:n,stsTokenManager:o,...r}){this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Pf(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Co(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SN(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await ru(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(ii(this.auth));const e=await this.getIdToken();return await Co(this,TN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,r=n.email??void 0,a=n.phoneNumber??void 0,c=n.photoURL??void 0,h=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:A,providerData:I,stsTokenManager:M}=n;ue(v&&M,e,"internal-error");const x=Is.fromJSON(this.name,M);ue(typeof v=="string",e,"internal-error"),Oi(o,e.name),Oi(r,e.name),ue(typeof E=="boolean",e,"internal-error"),ue(typeof A=="boolean",e,"internal-error"),Oi(a,e.name),Oi(c,e.name),Oi(h,e.name),Oi(g,e.name),Oi(p,e.name),Oi(_,e.name);const O=new _n({uid:v,auth:e,email:r,emailVerified:E,displayName:o,isAnonymous:A,photoURL:c,phoneNumber:a,tenantId:h,stsTokenManager:x,createdAt:p,lastLoginAt:_});return I&&Array.isArray(I)&&(O.providerData=I.map(z=>({...z}))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(e,n,o=!1){const r=new Is;r.updateFromServerResponse(n);const a=new _n({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:o});return await ru(a),a}static async _fromGetAccountInfoResponse(e,n,o){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?QE(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new Is;h.updateFromIdToken(o);const g=new _n({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Pf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;function ti(t){ri(t instanceof Function,"Expected a class definition");let e=L_.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,L_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZE.type="NONE";const P_=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e,n){return`firebase:${t}:${e}:${n}`}class Ns{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:r,name:a}=this.auth;this.fullUserKey=$a(this.userKey,r.apiKey,a),this.fullPersistenceKey=$a("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await su(this.auth,{idToken:e}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,e):null}return _n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new Ns(ti(P_),e,o);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||ti(P_);const c=$a(o,e.config.apiKey,e.name);let h=null;for(const p of n)try{const _=await p._get(c);if(_){let v;if(typeof _=="string"){const E=await su(e,{idToken:_}).catch(()=>{});if(!E)break;v=await _n._fromGetAccountInfoResponse(e,E,_)}else v=_n._fromJSON(e,_);p!==a&&(h=v),a=p;break}}catch{}const g=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!g.length?new Ns(a,e,o):(a=g[0],h&&await a._set(c,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new Ns(a,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oT(e))return"Blackberry";if(sT(e))return"Webos";if(eT(e))return"Safari";if((e.includes("chrome/")||tT(e))&&!e.includes("edge/"))return"Chrome";if(iT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=t.match(n);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function jE(t=Nt()){return/firefox\//i.test(t)}function eT(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tT(t=Nt()){return/crios\//i.test(t)}function nT(t=Nt()){return/iemobile/i.test(t)}function iT(t=Nt()){return/android/i.test(t)}function oT(t=Nt()){return/blackberry/i.test(t)}function sT(t=Nt()){return/webos/i.test(t)}function Nh(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RN(t=Nt()){var e;return Nh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xN(){return Ob()&&document.documentMode===10}function rT(t=Nt()){return Nh(t)||iT(t)||sT(t)||oT(t)||/windows phone/i.test(t)||nT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t,e=[]){let n;switch(t){case"Browser":n=O_(Nt());break;case"Worker":n=`${O_(Nt())}-${t}`;break;default:n=t}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$i}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=a=>new Promise((c,h)=>{try{const g=e(a);c(g)}catch(g){h(g)}});o.onAbort=n,this.queue.push(o);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e={}){return Un(t,"GET","/v2/passwordPolicy",Xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=6;class UN{constructor(e){var o;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let r=0;r<e.length;r++)o=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n,o,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new MN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ti(n)),this._initializationPromise=this.queue(async()=>{var o,r,a;if(!this._deleted&&(this.persistenceManager=await Ns.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await su(this,{idToken:e}),o=await _n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if($t(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,h=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===h)&&(g!=null&&g.user)&&(o=g.user,r=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(ii(this));const n=e?xt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DN(this),n=new UN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ro("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await NN(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ti(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ns.create(this,[ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,o;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,o,r);return()=>{c=!0,g()}}else{const g=e.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var n;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&cN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xo(t){return xt(t)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=kE(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PN(t){Iu=t}function aT(t){return Iu.loadJS(t)}function ON(){return Iu.recaptchaEnterpriseScript}function HN(){return Iu.gapiScript}function VN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class GN{constructor(){this.enterprise=new qN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const FN="recaptcha-enterprise",uT="NO_RECAPTCHA";class BN{constructor(e){this.type=FN,this.auth=xo(e)}async verify(e="verify",n=!1){async function o(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,h)=>{EN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new vN(g);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,c(p.siteKey)}}).catch(g=>{h(g)})})}function r(a,c,h){const g=window.grecaptcha;k_(g)?g.enterprise.ready(()=>{g.enterprise.execute(a,{action:e}).then(p=>{c(p)}).catch(()=>{c(uT)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GN().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{o(this.auth).then(h=>{if(!n&&k_(window.grecaptcha))r(h,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=ON();g.length!==0&&(g+=h),aT(g).then(()=>{r(h,a,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function V_(t,e,n,o=!1,r=!1){const a=new BN(t);let c;if(r)c=uT;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const g=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const g=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return o?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Of(t,e,n,o,r){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await V_(t,e,n,n==="getOobCode");return o(t,c)}else return o(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await V_(t,e,n,n==="getOobCode");return o(t,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=dl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(So(a,e??{}))return r;wn(r,"already-initialized")}return n.initialize({options:e})}function YN(t,e){const n=(e==null?void 0:e.persistence)||[],o=(Array.isArray(n)?n:[n]).map(ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function JN(t,e,n){const o=xo(t);ue(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const r=!1,a=cT(e),{host:c,port:h}=KN(e),g=h===null?"":`:${h}`,p={url:`${a}//${c}${g}/`},_=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!o._canInitEmulator){ue(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),ue(So(p,o.config.emulator)&&So(_,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=p,o.emulatorConfig=_,o.settings.appVerificationDisabledForTesting=!0,Gs(c)?(NE(`${a}//${c}${g}`),RE("Auth",!0)):WN()}function cT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KN(t){const e=cT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(o);if(r){const a=r[1];return{host:a,port:G_(o.substr(a.length+1))}}else{const[a,c]=o.split(":");return{host:a,port:G_(c)}}}function G_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,n){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function $N(t,e){return Un(t,"POST","/v1/accounts:update",e)}async function XN(t,e){return Un(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){return hl(t,"POST","/v1/accounts:signInWithPassword",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}async function jN(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Rh{constructor(e,n,o,r=null){super("password",o),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new al(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new al(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,n,"signInWithPassword",QN);case"emailLink":return ZN(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,o,"signUpPassword",XN);case"emailLink":return jN(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return hl(t,"POST","/v1/accounts:signInWithIdp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="http://localhost";class Ao extends Rh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:r,...a}=n;if(!o||!r)return null;const c=new Ao(o,r);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Rs(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:eR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nR(t){const e=Wr($r(t)).link,n=e?Wr($r(e)).deep_link_id:null,o=Wr($r(t)).deep_link_id;return(o?Wr($r(o)).link:null)||o||n||e||t}class xh{constructor(e){const n=Wr($r(e)),o=n.apiKey??null,r=n.oobCode??null,a=tR(n.mode??null);ue(o&&r&&a,"argument-error"),this.apiKey=o,this.operation=a,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nR(e);try{return new xh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,n){return al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=xh.parseLink(n);return ue(o,"argument-error"),al._fromEmailAndCode(e,o.code,o.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends dT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends pl{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ao._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return jn.credential(n,o)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends pl{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends pl{constructor(){super("twitter.com")}static credential(e,n){return Ao._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return Gi.credential(n,o)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){return hl(t,"POST","/v1/accounts:signUp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,r=!1){const a=await _n._fromIdTokenResponse(e,o,r),c=q_(o);return new wo({user:a,providerId:c,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const r=q_(o);return new wo({user:e,providerId:r,_tokenResponse:o,operationType:n})}}function q_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends ui{constructor(e,n,o,r){super(n.code,n.message),this.operationType=o,this.user=r,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,r){return new lu(e,n,o,r)}}function fT(t,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?lu._fromErrorAndOperation(t,a,e,o):a})}async function oR(t,e,n=!1){const o=await Co(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wo._forOperation(t,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t,e,n=!1){const{auth:o}=t;if($t(o.app))return Promise.reject(ii(o));const r="reauthenticate";try{const a=await Co(t,fT(o,r,e,t),n);ue(a.idToken,o,"internal-error");const c=Ih(a.idToken);ue(c,o,"internal-error");const{sub:h}=c;return ue(t.uid===h,o,"user-mismatch"),wo._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&wn(o,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(t,e,n=!1){if($t(t.app))return Promise.reject(ii(t));const o="signIn",r=await fT(t,o,e),a=await wo._fromIdTokenResponse(t,o,r);return n||await t._updateCurrentUser(a.user),a}async function sR(t,e){return pT(xo(t),e)}async function rR(t,e){return hT(xt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(t){const e=xo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lR(t,e,n){if($t(t.app))return Promise.reject(ii(t));const o=xo(t),c=await Of(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&mT(t),g}),h=await wo._fromIdTokenResponse(o,"signIn",c);return await o._updateCurrentUser(h.user),h}function aR(t,e,n){return $t(t.app)?Promise.reject(ii(t)):sR(xt(t),Mo.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&mT(t),o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e){return Un(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const o=xt(t),a={idToken:await o.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Co(o,uR(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;const h=o.providerData.find(({providerId:g})=>g==="password");h&&(h.displayName=o.displayName,h.photoURL=o.photoURL),await o._updateTokensIfNecessary(c)}function cR(t,e){return dR(xt(t),null,e)}async function dR(t,e,n){const{auth:o}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const c=await Co(t,$N(o,a));await t._updateTokensIfNecessary(c,!0)}function fR(t,e,n,o){return xt(t).onIdTokenChanged(e,n,o)}function hR(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function pR(t,e,n,o){return xt(t).onAuthStateChanged(e,n,o)}function mR(t){return xt(t).signOut()}async function gR(t){return xt(t).delete()}const au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(au,"1"),this.storage.removeItem(au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1e3,_R=10;class _T extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),r=this.localCache[n];o!==r&&e(n,r,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,g)=>{this.notifyListeners(c,g)});return}const o=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(o);!n&&this.localCache[o]===c||this.notifyListeners(o,c)},a=this.storage.getItem(o);xN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_R):r()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const r of Array.from(o))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_T.type="LOCAL";const vR=_T;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vT.type="SESSION";const ET=vT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const o=new Nu(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:r,data:a}=n.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:r});const h=Array.from(c).map(async p=>p(n.origin,a)),g=await ER(h);n.ports[0].postMessage({status:"done",eventId:o,eventType:r,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,c;return new Promise((h,g)=>{const p=Mh("",20);r.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},o);c={messageChannel:r,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(_),clearTimeout(a),g(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function SR(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function CR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wR(){return TT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebaseLocalStorageDb",bR=1,uu="firebaseLocalStorage",CT="fbase_key";class ml{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ru(t,e){return t.transaction([uu],e?"readwrite":"readonly").objectStore(uu)}function IR(){const t=indexedDB.deleteDatabase(ST);return new ml(t).toPromise()}function Hf(){const t=indexedDB.open(ST,bR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const o=t.result;try{o.createObjectStore(uu,{keyPath:CT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const o=t.result;o.objectStoreNames.contains(uu)?e(o):(o.close(),await IR(),e(await Hf()))})})}async function F_(t,e,n){const o=Ru(t,!0).put({[CT]:e,value:n});return new ml(o).toPromise()}async function NR(t,e){const n=Ru(t,!1).get(e),o=await new ml(n).toPromise();return o===void 0?null:o.value}function B_(t,e){const n=Ru(t,!0).delete(e);return new ml(n).toPromise()}const RR=800,xR=3;class AT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>xR)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nu._getInstance(wR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,o;if(this.activeServiceWorker=await CR(),!this.activeServiceWorker)return;this.sender=new TR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hf();return await F_(e,au,"1"),await B_(e,au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>F_(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>NR(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Ru(r,!1).getAll();return new ml(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)o.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!o.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const r of Array.from(o))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AT.type="LOCAL";const MR=AT;new fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e){return e?ti(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends Rh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kR(t){return pT(t.auth,new Dh(t),t.bypassAuthState)}function UR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),hT(n,new Dh(t),t.bypassAuthState)}async function LR(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),oR(n,new Dh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,o,r,a=!1){this.auth=e,this.resolver=o,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:r,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:o,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kR;case"linkViaPopup":case"linkViaRedirect":return LR;case"reauthViaPopup":case"reauthViaRedirect":return UR;default:wn(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new fl(2e3,1e4);class Ss extends wT{constructor(e,n,o,r,a){super(e,n,r,a),this.provider=o,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Mh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,o;if((o=(n=this.authWindow)==null?void 0:n.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PR.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="pendingRedirect",Xa=new Map;class HR extends wT{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=Xa.get(this.auth._key());if(!e){try{const o=await VR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}Xa.set(this.auth._key(),e)}return this.bypassAuthState||Xa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VR(t,e){const n=FR(e),o=qR(t);if(!await o._isAvailable())return!1;const r=await o._get(n)==="true";return await o._remove(n),r}function GR(t,e){Xa.set(t._key(),e)}function qR(t){return ti(t._redirectPersistence)}function FR(t){return $a(OR,t.config.apiKey,t.name)}async function BR(t,e,n=!1){if($t(t.app))return Promise.reject(ii(t));const o=xo(t),r=DR(o,e),c=await new HR(o,r,n).execute();return c&&!n&&(delete c.user._redirectEventId,await o._persistUserIfCurrent(c.user),await o._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=600*1e3;class YR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var o;if(e.error&&!bT(e)){const r=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zR&&this.cachedEventUids.clear(),this.cachedEventUids.has(z_(e))}saveEventToCache(e){this.cachedEventUids.add(z_(e)),this.lastProcessedEventTime=Date.now()}}function z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e={}){return Un(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$R=/^https?/;async function XR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KR(t);for(const n of e)try{if(QR(n))return}catch{}wn(t,"unauthorized-domain")}function QR(t){const e=Lf(),{protocol:n,hostname:o}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&o===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===o}if(!$R.test(n))return!1;if(WR.test(t))return o===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new fl(3e4,6e4);function Y_(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jR(t){return new Promise((e,n)=>{var r,a,c;function o(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(Dn(t,"network-request-failed"))},timeout:ZR.get()})}if((a=(r=kn().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=kn().gapi)!=null&&c.load)o();else{const h=VN("iframefcb");return kn()[h]=()=>{gapi.load?o():n(Dn(t,"network-request-failed"))},aT(`${HN()}?onload=${h}`).catch(g=>n(g))}}).catch(e=>{throw Qa=null,e})}let Qa=null;function e1(t){return Qa=Qa||jR(t),Qa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new fl(5e3,15e3),n1="__/auth/iframe",i1="emulator/auth/iframe",o1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r1(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bh(e,i1):`https://${t.config.authDomain}/${n1}`,o={apiKey:e.apiKey,appName:t.name,v:$i},r=s1.get(t.config.apiHost);r&&(o.eid=r);const a=t._getFrameworks();return a.length&&(o.fw=a.join(",")),`${n}?${qs(o).slice(1)}`}async function l1(t){const e=await e1(t),n=kn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:r1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o1,dontclear:!0},o=>new Promise(async(r,a)=>{await o.restyle({setHideOnLeave:!1});const c=Dn(t,"network-request-failed"),h=kn().setTimeout(()=>{a(c)},t1.get());function g(){kn().clearTimeout(h),r(o)}o.ping(g).then(g,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u1=500,c1=600,d1="_blank",f1="http://localhost";class J_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h1(t,e,n,o=u1,r=c1){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-o)/2,0).toString();let h="";const g={...a1,width:o.toString(),height:r.toString(),top:a,left:c},p=Nt().toLowerCase();n&&(h=tT(p)?d1:n),jE(p)&&(e=e||f1,g.scrollbars="yes");const _=Object.entries(g).reduce((E,[A,I])=>`${E}${A}=${I},`,"");if(RN(p)&&h!=="_self")return p1(e||"",h),new J_(null);const v=window.open(e||"",h,_);ue(v,t,"popup-blocked");try{v.focus()}catch{}return new J_(v)}function p1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="__/auth/handler",g1="emulator/auth/handler",y1=encodeURIComponent("fac");async function K_(t,e,n,o,r,a){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:o,v:$i,eventId:r};if(e instanceof dT){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",Mf(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof pl){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const g=await t._getAppCheckToken(),p=g?`#${y1}=${encodeURIComponent(g)}`:"";return`${_1(t)}?${qs(h).slice(1)}${p}`}function _1({config:t}){return t.emulator?bh(t,g1):`https://${t.authDomain}/${m1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="webStorageSupport";class v1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ET,this._completeRedirectFn=BR,this._overrideRedirectResult=GR}async _openPopup(e,n,o,r){var c;ri((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await K_(e,n,o,Lf(),r);return h1(e,a,Mh())}async _openRedirect(e,n,o,r){await this._originValidation(e);const a=await K_(e,n,o,Lf(),r);return SR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(ri(a,"If manager is not set, promise should be"),a)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await l1(e),o=new YR(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:o.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vf,{type:vf},r=>{var c;const a=(c=r==null?void 0:r[0])==null?void 0:c[vf];a!==void 0&&n(!!a),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rT()||eT()||Nh()}}const E1=v1;var W_="@firebase/auth",$_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C1(t){Ki(new zi("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=o.options;ue(c&&!c.includes(":"),"invalid-api-key",{appName:o.name});const g={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lT(t)},p=new LN(o,r,a,g);return YN(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),Ki(new zi("auth-internal",e=>{const n=xo(e.getProvider("auth").getImmediate());return(o=>new T1(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(W_,$_,S1(t)),En(W_,$_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=300,w1=IE("authIdTokenMaxAge")||A1;let X_=null;const b1=t=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>w1)return;const r=n==null?void 0:n.token;X_!==r&&(X_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function I1(t=Ch()){const e=dl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(t,{popupRedirectResolver:E1,persistence:[MR,vR,ET]}),o=IE("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(o,location.origin);if(location.origin===a.origin){const c=b1(a.toString());hR(n,c,()=>c(n.currentUser)),fR(n,h=>c(h))}}const r=bE("auth");return r&&JN(n,`http://${r}`),n}function N1(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}PN({loadJS(t){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",t),o.onload=e,o.onerror=r=>{const a=Dn("internal-error");a.customData=r,n(a)},o.type="text/javascript",o.charset="UTF-8",N1().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C1("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this._delegate=e,this.firebase=n,rl(e,new zi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ah(this._delegate)))}_getService(e,n=Yi){var r;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(e);return!o.isInitialized()&&((r=o.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:n})}_removeServiceInstance(e,n=Yi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){rl(this._delegate,e)}_addOrOverwriteComponent(e){HE(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Q_=new Ro("app-compat","Firebase",x1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t){const e={},n={__esModule:!0,initializeApp:a,app:r,registerVersion:En,setLogLevel:FE,onLog:qE,apps:null,SDK_VERSION:$i,INTERNAL:{registerComponent:h,removeApp:o,useAsService:g,modularAPIs:aN}};n.default=n,Object.defineProperty(n,"apps",{get:c});function o(p){delete e[p]}function r(p){if(p=p||Yi,!An(e,p))throw Q_.create("no-app",{appName:p});return e[p]}r.App=t;function a(p,_={}){const v=Sh(p,_);if(An(e,v.name))return e[v.name];const E=new t(v,n);return e[v.name]=E,E}function c(){return Object.keys(e).map(p=>e[p])}function h(p){const _=p.name,v=_.replace("-compat","");if(Ki(p)&&p.type==="PUBLIC"){const E=(A=r())=>{if(typeof A[v]!="function")throw Q_.create("invalid-app-argument",{appName:_});return A[v]()};p.serviceProps!==void 0&&ol(E,p.serviceProps),n[v]=E,t.prototype[v]=function(...A){return this._getService.bind(this,_).apply(this,p.multipleInstances?A:[])}}return p.type==="PUBLIC"?n[v]:null}function g(p,_){return _==="serverAuth"?null:_}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){const t=M1(R1);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:IT,extendNamespace:e,createSubscribe:kE,ErrorFactory:Ro,deepExtend:ol};function e(n){ol(t,n)}return t}const D1=IT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new bu("@firebase/app-compat"),k1="@firebase/app-compat",U1="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){En(k1,U1,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=wE();if(t.firebase!==void 0){Z_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Z_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const NT=D1;L1();var P1="firebase",O1="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */NT.registerVersion(P1,O1,"app-compat");var j_={};const ev="@firebase/database",tv="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RT="";function H1(t){RT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:sl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return An(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new V1(e)}}catch{}return new G1},To=xT("localStorage"),q1=xT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new bu("@firebase/database"),F1=(function(){let t=1;return function(){return t++}})(),MT=function(t){const e=Xb(t),n=new Jb;n.update(e);const o=n.digest();return ph.encodeByteArray(o)},gl=function(...t){let e="";for(let n=0;n<t.length;n++){const o=t[n];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?e+=gl.apply(null,o):typeof o=="object"?e+=vt(o):e+=o,e+=" "}return e};let jr=null,nv=!0;const B1=function(t,e){W(!0,"Can't turn on custom loggers persistently."),xs.logLevel=He.VERBOSE,jr=xs.log.bind(xs)},Tt=function(...t){if(nv===!0&&(nv=!1,jr===null&&q1.get("logging_enabled")===!0&&B1()),jr){const e=gl.apply(null,t);jr(e)}},yl=function(t){return function(...e){Tt(t,...e)}},Vf=function(...t){const e="FIREBASE INTERNAL ERROR: "+gl(...t);xs.error(e)},li=function(...t){const e=`FIREBASE FATAL ERROR: ${gl(...t)}`;throw xs.error(e),new Error(e)},Qt=function(...t){const e="FIREBASE WARNING: "+gl(...t);xs.warn(e)},z1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},DT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Y1=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Os="[MIN_NAME]",bo="[MAX_NAME]",Fs=function(t,e){if(t===e)return 0;if(t===Os||e===bo)return-1;if(e===Os||t===bo)return 1;{const n=iv(t),o=iv(e);return n!==null?o!==null?n-o===0?t.length-e.length:n-o:-1:o!==null?1:t<e?-1:1}},J1=function(t,e){return t===e?0:t<e?-1:1},Br=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+vt(e))},kh=function(t){if(typeof t!="object"||t===null)return vt(t);const e=[];for(const o in t)e.push(o);e.sort();let n="{";for(let o=0;o<e.length;o++)o!==0&&(n+=","),n+=vt(e[o]),n+=":",n+=kh(t[e[o]]);return n+="}",n},kT=function(t,e){const n=t.length;if(n<=e)return[t];const o=[];for(let r=0;r<n;r+=e)r+e>n?o.push(t.substring(r,n)):o.push(t.substring(r,r+e));return o};function fn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const UT=function(t){W(!DT(t),"Invalid JSON number");const e=11,n=52,o=(1<<e-1)-1;let r,a,c,h,g;t===0?(a=0,c=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-o)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),o),a=h+o,c=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-o-n))));const p=[];for(g=n;g;g-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(r?1:0),p.reverse();const _=p.join("");let v="";for(g=0;g<64;g+=8){let E=parseInt(_.substr(g,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},K1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},W1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},$1=new RegExp("^-?(0*)\\d{1,10}$"),X1=-2147483648,Q1=2147483647,iv=function(t){if($1.test(t)){const e=Number(t);if(e>=X1&&e<=Q1)return e}return null},_l=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Qt("Exception was thrown by user callback.",n),e},Math.floor(0))}},Z1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},el=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$t(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(o=>this.appCheck=o)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){Qt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,o){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(e)}}class Za{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Za.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="5",LT="v",PT="s",OT="r",HT="f",VT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GT="ls",qT="p",Gf="ac",FT="websocket",BT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,o,r,a=!1,c="",h=!1,g=!1,p=null){this.secure=n,this.namespace=o,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=To.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&To.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function tx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function YT(t,e,n){W(typeof e=="string","typeof type must == string"),W(typeof n=="object","typeof params must == object");let o;if(e===FT)o=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===BT)o=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);tx(t)&&(n.ns=t.namespace);const r=[];return fn(n,(a,c)=>{r.push(a+"="+c)}),o+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.counters_={}}incrementCounter(e,n=1){An(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return wb(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef={},Tf={};function Lh(t){const e=t.toString();return Ef[e]||(Ef[e]=new nx),Ef[e]}function ix(t,e){const n=t.toString();return Tf[n]||(Tf[n]=e()),Tf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<o.length;++r)o[r]&&_l(()=>{this.onMessage_(o[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="start",sx="close",rx="pLPCommand",lx="pRTLPCB",JT="id",KT="pw",WT="ser",ax="cb",ux="seg",cx="ts",dx="d",fx="dframe",$T=1870,XT=30,hx=$T-XT,px=25e3,mx=3e4;class Cs{constructor(e,n,o,r,a,c,h){this.connId=e,this.repoInfo=n,this.applicationId=o,this.appCheckToken=r,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yl(e),this.stats_=Lh(n),this.urlFn=g=>(this.appCheckToken&&(g[Gf]=this.appCheckToken),YT(n,BT,g))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ox(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(mx)),Y1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ph((...a)=>{const[c,h,g,p,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===ov)this.id=h,this.password=g;else if(c===sx)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const o={};o[ov]="t",o[WT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[ax]=this.scriptTagHolder.uniqueCallbackIdentifier),o[LT]=Uh,this.transportSessionId&&(o[PT]=this.transportSessionId),this.lastSessionId&&(o[GT]=this.lastSessionId),this.applicationId&&(o[qT]=this.applicationId),this.appCheckToken&&(o[Gf]=this.appCheckToken),typeof location<"u"&&location.hostname&&VT.test(location.hostname)&&(o[OT]=HT);const r=this.urlFn(o);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Cs.forceAllow_=!0}static forceDisallow(){Cs.forceDisallow_=!0}static isAvailable(){return Cs.forceAllow_?!0:!Cs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!K1()&&!W1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=vt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=AE(n),r=kT(o,hx);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const o={};o[fx]="t",o[JT]=e,o[KT]=n,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=vt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ph{constructor(e,n,o,r){this.onDisconnect=o,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=F1(),window[rx+this.uniqueCallbackIdentifier]=e,window[lx+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ph.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Tt("frame writing exception"),h.stack&&Tt(h.stack),Tt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tt("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[JT]=this.myID,e[KT]=this.myPW,e[WT]=this.currentSerial;let n=this.urlFn(e),o="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+XT+o.length<=$T;){const c=this.pendingSegs.shift();o=o+"&"+ux+r+"="+c.seg+"&"+cx+r+"="+c.ts+"&"+dx+r+"="+c.d,r++}return n=n+o,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,o){this.pendingSegs.push({seg:e,ts:n,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const o=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(o,Math.floor(px)),a=()=>{clearTimeout(r),o()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const r=o.readyState;(!r||r==="loaded"||r==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=()=>{Tt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=16384,yx=45e3;let cu=null;typeof MozWebSocket<"u"?cu=MozWebSocket:typeof WebSocket<"u"&&(cu=WebSocket);class yn{constructor(e,n,o,r,a,c,h){this.connId=e,this.applicationId=o,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yl(this.connId),this.stats_=Lh(n),this.connURL=yn.connectionURL_(n,c,h,r,o),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,o,r,a){const c={};return c[LT]=Uh,typeof location<"u"&&location.hostname&&VT.test(location.hostname)&&(c[OT]=HT),n&&(c[PT]=n),o&&(c[GT]=o),r&&(c[Gf]=r),a&&(c[qT]=a),YT(e,FT,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,To.set("previous_websocket_failure",!0);try{let o;Hb(),this.mySock=new cu(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const r=o.message||o.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const r=o.message||o.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){yn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(n);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&cu!==null&&!yn.forceDisallow_}static previouslyFailed(){return To.isInMemoryStorage||To.get("previous_websocket_failure")===!0}markConnectionHealthy(){To.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const o=sl(n);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(W(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const o=this.extractFrameCount_(n);o!==null&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const n=vt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=kT(n,gx);o.length>1&&this.sendString_(String(o.length));for(let r=0;r<o.length;r++)this.sendString_(o[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(yx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yn.responsesRequiredToBeHealthy=2;yn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static get ALL_TRANSPORTS(){return[Cs,yn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=yn&&yn.isAvailable();let o=n&&!yn.previouslyFailed();if(e.webSocketOnly&&(n||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[yn];else{const r=this.transports_=[];for(const a of ul.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);ul.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ul.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=6e4,vx=5e3,Ex=10*1024,Tx=100*1024,Sf="t",sv="d",Sx="s",rv="r",Cx="e",lv="o",av="a",uv="n",cv="p",Ax="h";class wx{constructor(e,n,o,r,a,c,h,g,p,_){this.id=e,this.repoInfo_=n,this.applicationId_=o,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yl("c:"+this.id+":"),this.transportManager_=new ul(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,o)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=el(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Tx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ex?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sf in e){const n=e[Sf];n===av?this.upgradeIfSecondaryHealthy_():n===rv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===lv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Br("t",e),o=Br("d",e);if(n==="c")this.onSecondaryControl_(o);else if(n==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:av,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Br("t",e),o=Br("d",e);n==="c"?this.onControl_(o):n==="d"&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Br(Sf,e);if(sv in e){const o=e[sv];if(n===Ax){const r={...o};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===uv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Sx?this.onConnectionShutdown_(o):n===rv?this.onReset_(o):n===Cx?Vf("Server Error: "+o):n===lv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,o=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Uh!==o&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,o),el(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_x))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):el(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(To.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{put(e,n,o,r){}merge(e,n,o,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,o){}onDisconnectMerge(e,n,o){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.allowedEvents_=e,this.listeners_={},W(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let r=0;r<o.length;r++)o[r].callback.apply(o[r].context,n)}}on(e,n,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:o});const r=this.getInitialEvent(e);r&&n.apply(o,r)}off(e,n,o){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===n&&(!o||o===r[a].context)){r.splice(a,1);return}}validateEventType_(e){W(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends ZT{static getInstance(){return new du}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_h()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return W(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=32,fv=768;class $e{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let o=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[o]=this.pieces_[r],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Fe(){return new $e("")}function Ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Wi(t){return t.pieces_.length-t.pieceNum_}function We(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $e(t.pieces_,e)}function jT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function eS(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function tS(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $e(e,0)}function ft(t,e){const n=[];for(let o=t.pieceNum_;o<t.pieces_.length;o++)n.push(t.pieces_[o]);if(e instanceof $e)for(let o=e.pieceNum_;o<e.pieces_.length;o++)n.push(e.pieces_[o]);else{const o=e.split("/");for(let r=0;r<o.length;r++)o[r].length>0&&n.push(o[r])}return new $e(n,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function cn(t,e){const n=Ie(t),o=Ie(e);if(n===null)return e;if(n===o)return cn(We(t),We(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nS(t,e){if(Wi(t)!==Wi(e))return!1;for(let n=t.pieceNum_,o=e.pieceNum_;n<=t.pieces_.length;n++,o++)if(t.pieces_[n]!==e.pieces_[o])return!1;return!0}function vn(t,e){let n=t.pieceNum_,o=e.pieceNum_;if(Wi(t)>Wi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[o])return!1;++n,++o}return!0}class Ix{constructor(e,n){this.errorPrefix_=n,this.parts_=eS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=wu(this.parts_[o]);iS(this)}}function Nx(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=wu(e),iS(t)}function Rx(t){const e=t.parts_.pop();t.byteLength_-=wu(e),t.parts_.length>0&&(t.byteLength_-=1)}function iS(t){if(t.byteLength_>fv)throw new Error(t.errorPrefix_+"has a key path longer than "+fv+" bytes ("+t.byteLength_+").");if(t.parts_.length>dv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dv+") or object contains a cycle "+vo(t))}function vo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends ZT{static getInstance(){return new Oh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(e){return W(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=1e3,xx=300*1e3,hv=30*1e3,Mx=1.3,Dx=3e4,kx="server_kill",pv=3;class oi extends QT{constructor(e,n,o,r,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=o,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=oi.nextPersistentConnectionId_++,this.log_=yl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zr,this.maxReconnectDelay_=xx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Oh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&du.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,o){const r=++this.requestNumber_,a={r,a:e,b:n};this.log_(vt(a)),W(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[r]=o)}get(e){this.initConnection_();const n=new yh,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,o,r){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),W(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:r,hashFn:n,query:e,tag:o};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(o)})}sendListen_(e){const n=e.query,o=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+o+" for "+r);const a={p:o},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,p=h.s;oi.warnOnListenWarnings_(g,n),(this.listens.get(o)&&this.listens.get(o).get(r))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(o,r),e.onComplete&&e.onComplete(p,g))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&An(e,"w")){const o=Us(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Yb(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=zb(e)?"auth":"gauth",o={cred:e};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(n,o,r=>{const a=r.s,c=r.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,o=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,o)})}unlisten(e,n){const o=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+r),W(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,r)&&this.connected_&&this.sendUnlisten_(o,r,e._queryObject,n)}sendUnlisten_(e,n,o,r){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";r&&(a.q=o,a.t=r),this.sendRequest(c,a)}onDisconnectPut(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:o})}onDisconnectMerge(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:o})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,o,r){const a={p:n,d:o};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{r&&setTimeout(()=>{r(c.s,c.d)},Math.floor(0))})}put(e,n,o,r){this.putInternal("p",e,n,o,r)}merge(e,n,o,r){this.putInternal("m",e,n,o,r)}putInternal(e,n,o,r,a){this.initConnection_();const c={p:n,d:o};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:r}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,o,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,o=>{if(o.s!=="ok"){const a=o.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vt(e));const n=e.r,o=this.requestCBHash_[n];o&&(delete this.requestCBHash_[n],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Vf("Unrecognized action received from server: "+vt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){W(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Dx&&(this.reconnectDelay_=zr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Mx)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+oi.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,o())},p=function(v){W(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:g,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Tt("getToken() completed but was canceled"):(Tt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,h=new wx(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,o,A=>{Qt(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(kx)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&Qt(v),g())}}}interrupt(e){Tt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Mf(this.interruptReasons_)&&(this.reconnectDelay_=zr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let o;n?o=n.map(a=>kh(a)).join("$"):o="default";const r=this.removeListen_(e,o);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const o=new $e(e).toString();let r;if(this.listens.has(o)){const a=this.listens.get(o);r=a.get(n),a.delete(n),a.size===0&&this.listens.delete(o)}else r=void 0;return r}onAuthRevoked_(e,n){Tt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pv&&(this.reconnectDelay_=hv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Tt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+RT.replace(/\./g,"-")]=1,_h()?e["framework.cordova"]=1:ME()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=du.getInstance().currentlyOnline();return Mf(this.interruptReasons_)&&e}}oi.nextPersistentConnectionId_=0;oi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const o=new Ne(Os,e),r=new Ne(Os,n);return this.compare(o,r)!==0}minPost(){return Ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga;class oS extends xu{static get __EMPTY_NODE(){return Ga}static set __EMPTY_NODE(e){Ga=e}compare(e,n){return Fs(e.name,n.name)}isDefinedOn(e){throw Vs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(bo,Ga)}makePost(e,n){return W(typeof e=="string","KeyIndex indexValue must always be a string."),new Ne(e,Ga)}toString(){return".key"}}const Ms=new oS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,o,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?o(e.key,n):1,r&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dt{constructor(e,n,o,r,a){this.key=e,this.value=n,this.color=o??dt.RED,this.left=r??Ht.EMPTY_NODE,this.right=a??Ht.EMPTY_NODE}copy(e,n,o,r,a){return new dt(e??this.key,n??this.value,o??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let r=this;const a=o(e,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(e,n,o),null):a===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,o)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ht.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let o,r;if(o=this,n(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY_NODE;r=o.right.min_(),o=o.copy(r.key,r.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dt.RED=!0;dt.BLACK=!1;class Ux{copy(e,n,o,r,a){return this}insert(e,n,o){return new dt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ht{constructor(e,n=Ht.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ht(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dt.BLACK,null,null))}remove(e){return new Ht(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dt.BLACK,null,null))}get(e){let n,o=this.root_;for(;!o.isEmpty();){if(n=this.comparator_(e,o.key),n===0)return o.value;n<0?o=o.left:n>0&&(o=o.right)}return null}getPredecessorKey(e){let n,o=this.root_,r=null;for(;!o.isEmpty();)if(n=this.comparator_(e,o.key),n===0){if(o.left.isEmpty())return r?r.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else n<0?o=o.left:n>0&&(r=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new qa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new qa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new qa(this.root_,null,this.comparator_,!0,e)}}Ht.EMPTY_NODE=new Ux;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e){return Fs(t.name,e.name)}function Hh(t,e){return Fs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf;function Px(t){qf=t}const sS=function(t){return typeof t=="number"?"number:"+UT(t):"string:"+t},rS=function(t){if(t.isLeafNode()){const e=t.val();W(typeof e=="string"||typeof e=="number"||typeof e=="object"&&An(e,".sv"),"Priority must be a string or number.")}else W(t===qf||t.isEmpty(),"priority of unexpected type.");W(t===qf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mv;class ct{static set __childrenNodeConstructor(e){mv=e}static get __childrenNodeConstructor(){return mv}constructor(e,n=ct.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,W(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),rS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ct(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return be(e)?this:Ie(e)===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ct.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const o=Ie(e);return o===null?n:n.isEmpty()&&o!==".priority"?this:(W(o!==".priority"||Wi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,ct.__childrenNodeConstructor.EMPTY_NODE.updateChild(We(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sS(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=UT(this.value_):e+=this.value_,this.lazyHash_=MT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ct.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ct.__childrenNodeConstructor?-1:(W(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,o=typeof this.value_,r=ct.VALUE_TYPE_ORDER.indexOf(n),a=ct.VALUE_TYPE_ORDER.indexOf(o);return W(r>=0,"Unknown leaf type: "+n),W(a>=0,"Unknown leaf type: "+o),r===a?o==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lS,aS;function Ox(t){lS=t}function Hx(t){aS=t}class Vx extends xu{compare(e,n){const o=e.node.getPriority(),r=n.node.getPriority(),a=o.compareTo(r);return a===0?Fs(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(bo,new ct("[PRIORITY-POST]",aS))}makePost(e,n){const o=lS(e);return new Ne(n,new ct("[PRIORITY-POST]",o))}toString(){return".priority"}}const Ct=new Vx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=Math.log(2);class qx{constructor(e){const n=a=>parseInt(Math.log(a)/Gx,10),o=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=o(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fu=function(t,e,n,o){t.sort(e);const r=function(g,p){const _=p-g;let v,E;if(_===0)return null;if(_===1)return v=t[g],E=n?n(v):v,new dt(E,v.node,dt.BLACK,null,null);{const A=parseInt(_/2,10)+g,I=r(g,A),M=r(A+1,p);return v=t[A],E=n?n(v):v,new dt(E,v.node,dt.BLACK,I,M)}},a=function(g){let p=null,_=null,v=t.length;const E=function(I,M){const x=v-I,O=v;v-=I;const z=r(x+1,O),B=t[x],Y=n?n(B):B;A(new dt(Y,B.node,M,null,z))},A=function(I){p?(p.left=I,p=I):(_=I,p=I)};for(let I=0;I<g.count;++I){const M=g.nextBitIsOne(),x=Math.pow(2,g.count-(I+1));M?E(x,dt.BLACK):(E(x,dt.BLACK),E(x,dt.RED))}return _},c=new qx(t.length),h=a(c);return new Ht(o||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf;const Es={};class ni{static get Default(){return W(Es&&Ct,"ChildrenNode.ts has not been loaded"),Cf=Cf||new ni({".priority":Es},{".priority":Ct}),Cf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Us(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ht?n:null}hasIndex(e){return An(this.indexSet_,e.toString())}addIndex(e,n){W(e!==Ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let r=!1;const a=n.getIterator(Ne.Wrap);let c=a.getNext();for(;c;)r=r||e.isDefinedOn(c.node),o.push(c),c=a.getNext();let h;r?h=fu(o,e.getCompare()):h=Es;const g=e.toString(),p={...this.indexSet_};p[g]=e;const _={...this.indexes_};return _[g]=h,new ni(_,p)}addToIndexes(e,n){const o=nu(this.indexes_,(r,a)=>{const c=Us(this.indexSet_,a);if(W(c,"Missing index implementation for "+a),r===Es)if(c.isDefinedOn(e.node)){const h=[],g=n.getIterator(Ne.Wrap);let p=g.getNext();for(;p;)p.name!==e.name&&h.push(p),p=g.getNext();return h.push(e),fu(h,c.getCompare())}else return Es;else{const h=n.get(e.name);let g=r;return h&&(g=g.remove(new Ne(e.name,h))),g.insert(e,e.node)}});return new ni(o,this.indexSet_)}removeFromIndexes(e,n){const o=nu(this.indexes_,r=>{if(r===Es)return r;{const a=n.get(e.name);return a?r.remove(new Ne(e.name,a)):r}});return new ni(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yr;class Le{static get EMPTY_NODE(){return Yr||(Yr=new Le(new Ht(Hh),null,ni.Default))}constructor(e,n,o){this.children_=e,this.priorityNode_=n,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&rS(this.priorityNode_),this.children_.isEmpty()&&W(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yr}updatePriority(e){return this.children_.isEmpty()?this:new Le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Yr:n}}getChild(e){const n=Ie(e);return n===null?this:this.getImmediateChild(n).getChild(We(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(W(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const o=new Ne(e,n);let r,a;n.isEmpty()?(r=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(o,this.children_));const c=r.isEmpty()?Yr:this.priorityNode_;return new Le(r,c,a)}}updateChild(e,n){const o=Ie(e);if(o===null)return n;{W(Ie(e)!==".priority"||Wi(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(o).updateChild(We(e),n);return this.updateImmediateChild(o,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let o=0,r=0,a=!0;if(this.forEachChild(Ct,(c,h)=>{n[c]=h.val(e),o++,a&&Le.INTEGER_REGEXP_.test(c)?r=Math.max(r,Number(c)):a=!1}),!e&&a&&r<2*o){const c=[];for(const h in n)c[h]=n[h];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+sS(this.getPriority().val())+":"),this.forEachChild(Ct,(n,o)=>{const r=o.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":MT(e)}return this.lazyHash_}getPredecessorChildName(e,n,o){const r=this.resolveIndex_(o);if(r){const a=r.getPredecessorKey(new Ne(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ne(n,this.children_.get(n)):null}forEachChild(e,n){const o=this.resolveIndex_(e);return o?o.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ne.Wrap);let a=r.peek();for(;a!=null&&n.compare(a,e)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ne.Wrap);let a=r.peek();for(;a!=null&&n.compare(a,e)>0;)r.getNext(),a=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vl?-1:0}withIndex(e){if(e===Ms||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Le(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ms||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const o=this.getIterator(Ct),r=n.getIterator(Ct);let a=o.getNext(),c=r.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=o.getNext(),c=r.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Ms?null:this.indexMap_.get(e.toString())}}Le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Fx extends Le{constructor(){super(new Ht(Hh),Le.EMPTY_NODE,ni.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Le.EMPTY_NODE}isEmpty(){return!1}}const vl=new Fx;Object.defineProperties(Ne,{MIN:{value:new Ne(Os,Le.EMPTY_NODE)},MAX:{value:new Ne(bo,vl)}});oS.__EMPTY_NODE=Le.EMPTY_NODE;ct.__childrenNodeConstructor=Le;Px(vl);Hx(vl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=!0;function St(t,e=null){if(t===null)return Le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),W(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ct(n,St(e))}if(!(t instanceof Array)&&Bx){const n=[];let o=!1;if(fn(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=St(h);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),n.push(new Ne(c,g)))}}),n.length===0)return Le.EMPTY_NODE;const a=fu(n,Lx,c=>c.name,Hh);if(o){const c=fu(n,Ct.getCompare());return new Le(a,St(e),new ni({".priority":c},{".priority":Ct}))}else return new Le(a,St(e),ni.Default)}else{let n=Le.EMPTY_NODE;return fn(t,(o,r)=>{if(An(t,o)&&o.substring(0,1)!=="."){const a=St(r);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(o,a))}}),n.updatePriority(St(e))}}Ox(St);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends xu{constructor(e){super(),this.indexPath_=e,W(!be(e)&&Ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const o=this.extractChild(e.node),r=this.extractChild(n.node),a=o.compareTo(r);return a===0?Fs(e.name,n.name):a}makePost(e,n){const o=St(e),r=Le.EMPTY_NODE.updateChild(this.indexPath_,o);return new Ne(n,r)}maxPost(){const e=Le.EMPTY_NODE.updateChild(this.indexPath_,vl);return new Ne(bo,e)}toString(){return eS(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends xu{compare(e,n){const o=e.node.compareTo(n.node);return o===0?Fs(e.name,n.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(e,n){const o=St(e);return new Ne(n,o)}toString(){return".value"}}const Jx=new Yx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){return{type:"value",snapshotNode:t}}function Wx(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $x(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gv(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Xx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return W(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return W(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Os}hasEnd(){return this.endSet_}getIndexEndValue(){return W(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return W(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return W(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){const e=new Vh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ct?n="$priority":t.index_===Jx?n="$value":t.index_===Ms?n="$key":(W(t.index_ instanceof zx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=vt(n),t.startSet_){const o=t.startAfterSet_?"startAfter":"startAt";e[o]=vt(t.indexStartValue_),t.startNameSet_&&(e[o]+=","+vt(t.indexStartName_))}if(t.endSet_){const o=t.endBeforeSet_?"endBefore":"endAt";e[o]=vt(t.indexEndValue_),t.endNameSet_&&(e[o]+=","+vt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _v(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ct&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends QT{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(W(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,o,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=o,this.appCheckTokenProvider_=r,this.log_=yl("p:rest:"),this.listens_={}}listen(e,n,o,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=hu.getListenId_(e,o),h={};this.listens_[c]=h;const g=yv(e._queryParams);this.restRequest_(a+".json",g,(p,_)=>{let v=_;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(a,v,!1,o),Us(this.listens_,c)===h){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",r(E,null)}})}unlisten(e,n){const o=hu.getListenId_(e,n);delete this.listens_[o]}get(e){const n=yv(e._queryParams),o=e._path.toString(),r=new yh;return this.restRequest_(o+".json",n,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(o,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},o){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(n.auth=r.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+qs(n);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(o&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=sl(h.responseText)}catch{Qt("Failed to parse JSON response for "+c+": "+h.responseText)}o(null,g)}else h.status!==401&&h.status!==404&&Qt("Got unsuccessful REST response for "+c+" Status: "+h.status),o(h.status);o=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.rootNode_=Le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(){return{value:null,children:new Map}}function uS(t,e,n){if(be(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const o=Ie(e);t.children.has(o)||t.children.set(o,pu());const r=t.children.get(o);e=We(e),uS(r,e,n)}}function Ff(t,e,n){t.value!==null?n(e,t.value):Zx(t,(o,r)=>{const a=new $e(e.toString()+"/"+o);Ff(r,a,n)})}function Zx(t,e){t.children.forEach((n,o)=>{e(o,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&fn(this.last_,(o,r)=>{n[o]=n[o]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=10*1e3,eM=30*1e3,tM=300*1e3;class nM{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jx(e);const o=vv+(eM-vv)*Math.random();el(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),n={};let o=!1;fn(e,(r,a)=>{a>0&&An(this.statsToReport_,r)&&(n[r]=a,o=!0)}),o&&this.server_.reportStats(n),el(this.reportStats_.bind(this),Math.floor(Math.random()*2*tM))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mn||(Mn={}));function cS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fS(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,o){this.path=e,this.affectedTree=n,this.revert=o,this.type=Mn.ACK_USER_WRITE,this.source=cS()}operationForChild(e){if(be(this.path)){if(this.affectedTree.value!=null)return W(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $e(e));return new mu(Fe(),n,this.revert)}}else return W(Ie(this.path)===e,"operationForChild called for unrelated child."),new mu(We(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n,o){this.source=e,this.path=n,this.snap=o,this.type=Mn.OVERWRITE}operationForChild(e){return be(this.path)?new Io(this.source,Fe(),this.snap.getImmediateChild(e)):new Io(this.source,We(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,o){this.source=e,this.path=n,this.children=o,this.type=Mn.MERGE}operationForChild(e){if(be(this.path)){const n=this.children.subtree(new $e(e));return n.isEmpty()?null:n.value?new Io(this.source,Fe(),n.value):new cl(this.source,Fe(),n)}else return W(Ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new cl(this.source,We(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,o){this.node_=e,this.fullyInitialized_=n,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(be(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function iM(t,e,n,o){const r=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(Xx(c.childName,c.snapshotNode))}),Jr(t,r,"child_removed",e,o,n),Jr(t,r,"child_added",e,o,n),Jr(t,r,"child_moved",a,o,n),Jr(t,r,"child_changed",e,o,n),Jr(t,r,"value",e,o,n),r}function Jr(t,e,n,o,r,a){const c=o.filter(h=>h.type===n);c.sort((h,g)=>sM(t,h,g)),c.forEach(h=>{const g=oM(t,h,a);r.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(g,t.query_))})})}function oM(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function sM(t,e,n){if(e.childName==null||n.childName==null)throw Vs("Should only compare child_ events.");const o=new Ne(e.childName,e.snapshotNode),r=new Ne(n.childName,n.snapshotNode);return t.index_.compare(o,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){return{eventCache:t,serverCache:e}}function tl(t,e,n,o){return hS(new Gh(e,n,o),t.serverCache)}function pS(t,e,n,o){return hS(t.eventCache,new Gh(e,n,o))}function Bf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function No(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af;const rM=()=>(Af||(Af=new Ht(J1)),Af);class Ke{static fromObject(e){let n=new Ke(null);return fn(e,(o,r)=>{n=n.set(new $e(o),r)}),n}constructor(e,n=rM()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Fe(),value:this.value};if(be(e))return null;{const o=Ie(e),r=this.children.get(o);if(r!==null){const a=r.findRootMostMatchingPathAndValue(We(e),n);return a!=null?{path:ft(new $e(o),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(be(e))return this;{const n=Ie(e),o=this.children.get(n);return o!==null?o.subtree(We(e)):new Ke(null)}}set(e,n){if(be(e))return new Ke(n,this.children);{const o=Ie(e),a=(this.children.get(o)||new Ke(null)).set(We(e),n),c=this.children.insert(o,a);return new Ke(this.value,c)}}remove(e){if(be(e))return this.children.isEmpty()?new Ke(null):new Ke(null,this.children);{const n=Ie(e),o=this.children.get(n);if(o){const r=o.remove(We(e));let a;return r.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,r),this.value===null&&a.isEmpty()?new Ke(null):new Ke(this.value,a)}else return this}}get(e){if(be(e))return this.value;{const n=Ie(e),o=this.children.get(n);return o?o.get(We(e)):null}}setTree(e,n){if(be(e))return n;{const o=Ie(e),a=(this.children.get(o)||new Ke(null)).setTree(We(e),n);let c;return a.isEmpty()?c=this.children.remove(o):c=this.children.insert(o,a),new Ke(this.value,c)}}fold(e){return this.fold_(Fe(),e)}fold_(e,n){const o={};return this.children.inorderTraversal((r,a)=>{o[r]=a.fold_(ft(e,r),n)}),n(e,this.value,o)}findOnPath(e,n){return this.findOnPath_(e,Fe(),n)}findOnPath_(e,n,o){const r=this.value?o(n,this.value):!1;if(r)return r;if(be(e))return null;{const a=Ie(e),c=this.children.get(a);return c?c.findOnPath_(We(e),ft(n,a),o):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Fe(),n)}foreachOnPath_(e,n,o){if(be(e))return this;{this.value&&o(n,this.value);const r=Ie(e),a=this.children.get(r);return a?a.foreachOnPath_(We(e),ft(n,r),o):new Ke(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,n){this.children.inorderTraversal((o,r)=>{r.foreach_(ft(e,o),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,o)=>{o.value&&e(n,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.writeTree_=e}static empty(){return new Tn(new Ke(null))}}function nl(t,e,n){if(be(e))return new Tn(new Ke(n));{const o=t.writeTree_.findRootMostValueAndPath(e);if(o!=null){const r=o.path;let a=o.value;const c=cn(r,e);return a=a.updateChild(c,n),new Tn(t.writeTree_.set(r,a))}else{const r=new Ke(n),a=t.writeTree_.setTree(e,r);return new Tn(a)}}}function Ev(t,e,n){let o=t;return fn(n,(r,a)=>{o=nl(o,ft(e,r),a)}),o}function Tv(t,e){if(be(e))return Tn.empty();{const n=t.writeTree_.setTree(e,new Ke(null));return new Tn(n)}}function zf(t,e){return Do(t,e)!=null}function Do(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(cn(n.path,e)):null}function Sv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ct,(o,r)=>{e.push(new Ne(o,r))}):t.writeTree_.children.inorderTraversal((o,r)=>{r.value!=null&&e.push(new Ne(o,r.value))}),e}function Bi(t,e){if(be(e))return t;{const n=Do(t,e);return n!=null?new Tn(new Ke(n)):new Tn(t.writeTree_.subtree(e))}}function Yf(t){return t.writeTree_.isEmpty()}function Hs(t,e){return mS(Fe(),t.writeTree_,e)}function mS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let o=null;return e.children.inorderTraversal((r,a)=>{r===".priority"?(W(a.value!==null,"Priority writes must always be leaf nodes"),o=a.value):n=mS(ft(t,r),a,n)}),!n.getChild(t).isEmpty()&&o!==null&&(n=n.updateChild(ft(t,".priority"),o)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){return TS(e,t)}function lM(t,e,n,o,r){W(o>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:o,visible:r}),r&&(t.visibleWrites=nl(t.visibleWrites,e,n)),t.lastWriteId=o}function aM(t,e){for(let n=0;n<t.allWrites.length;n++){const o=t.allWrites[n];if(o.writeId===e)return o}return null}function uM(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);W(n>=0,"removeWrite called with nonexistent writeId.");const o=t.allWrites[n];t.allWrites.splice(n,1);let r=o.visible,a=!1,c=t.allWrites.length-1;for(;r&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=n&&cM(h,o.path)?r=!1:vn(o.path,h.path)&&(a=!0)),c--}if(r){if(a)return dM(t),!0;if(o.snap)t.visibleWrites=Tv(t.visibleWrites,o.path);else{const h=o.children;fn(h,g=>{t.visibleWrites=Tv(t.visibleWrites,ft(o.path,g))})}return!0}else return!1}function cM(t,e){if(t.snap)return vn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&vn(ft(t.path,n),e))return!0;return!1}function dM(t){t.visibleWrites=yS(t.allWrites,fM,Fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function fM(t){return t.visible}function yS(t,e,n){let o=Tn.empty();for(let r=0;r<t.length;++r){const a=t[r];if(e(a)){const c=a.path;let h;if(a.snap)vn(n,c)?(h=cn(n,c),o=nl(o,h,a.snap)):vn(c,n)&&(h=cn(c,n),o=nl(o,Fe(),a.snap.getChild(h)));else if(a.children){if(vn(n,c))h=cn(n,c),o=Ev(o,h,a.children);else if(vn(c,n))if(h=cn(c,n),be(h))o=Ev(o,Fe(),a.children);else{const g=Us(a.children,Ie(h));if(g){const p=g.getChild(We(h));o=nl(o,Fe(),p)}}}else throw Vs("WriteRecord should have .snap or .children")}}return o}function _S(t,e,n,o,r){if(!o&&!r){const a=Do(t.visibleWrites,e);if(a!=null)return a;{const c=Bi(t.visibleWrites,e);if(Yf(c))return n;if(n==null&&!zf(c,Fe()))return null;{const h=n||Le.EMPTY_NODE;return Hs(c,h)}}}else{const a=Bi(t.visibleWrites,e);if(!r&&Yf(a))return n;if(!r&&n==null&&!zf(a,Fe()))return null;{const c=function(p){return(p.visible||r)&&(!o||!~o.indexOf(p.writeId))&&(vn(p.path,e)||vn(e,p.path))},h=yS(t.allWrites,c,e),g=n||Le.EMPTY_NODE;return Hs(h,g)}}}function hM(t,e,n){let o=Le.EMPTY_NODE;const r=Do(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ct,(a,c)=>{o=o.updateImmediateChild(a,c)}),o;if(n){const a=Bi(t.visibleWrites,e);return n.forEachChild(Ct,(c,h)=>{const g=Hs(Bi(a,new $e(c)),h);o=o.updateImmediateChild(c,g)}),Sv(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}else{const a=Bi(t.visibleWrites,e);return Sv(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}}function pM(t,e,n,o,r){W(o||r,"Either existingEventSnap or existingServerSnap must exist");const a=ft(e,n);if(zf(t.visibleWrites,a))return null;{const c=Bi(t.visibleWrites,a);return Yf(c)?r.getChild(n):Hs(c,r.getChild(n))}}function mM(t,e,n,o){const r=ft(e,n),a=Do(t.visibleWrites,r);if(a!=null)return a;if(o.isCompleteForChild(n)){const c=Bi(t.visibleWrites,r);return Hs(c,o.getNode().getImmediateChild(n))}else return null}function gM(t,e){return Do(t.visibleWrites,e)}function yM(t,e,n,o,r,a,c){let h;const g=Bi(t.visibleWrites,e),p=Do(g,Fe());if(p!=null)h=p;else if(n!=null)h=Hs(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const _=[],v=c.getCompare(),E=a?h.getReverseIteratorFrom(o,c):h.getIteratorFrom(o,c);let A=E.getNext();for(;A&&_.length<r;)v(A,o)!==0&&_.push(A),A=E.getNext();return _}else return[]}function _M(){return{visibleWrites:Tn.empty(),allWrites:[],lastWriteId:-1}}function Jf(t,e,n,o){return _S(t.writeTree,t.treePath,e,n,o)}function vS(t,e){return hM(t.writeTree,t.treePath,e)}function Cv(t,e,n,o){return pM(t.writeTree,t.treePath,e,n,o)}function gu(t,e){return gM(t.writeTree,ft(t.treePath,e))}function vM(t,e,n,o,r,a){return yM(t.writeTree,t.treePath,e,n,o,r,a)}function qh(t,e,n){return mM(t.writeTree,t.treePath,e,n)}function ES(t,e){return TS(ft(t.treePath,e),t.writeTree)}function TS(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,o=e.childName;W(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),W(o!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(o);if(r){const a=r.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(o,gv(o,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(o);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(o,$x(o,r.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(o,Wx(o,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(o,gv(o,e.snapshotNode,r.oldSnap));else throw Vs("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{getCompleteChild(e){return null}getChildAfterChild(e,n,o){return null}}const SS=new TM;class Fh{constructor(e,n,o=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=o}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const o=this.optCompleteServerCache_!=null?new Gh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qh(this.writes_,e,o)}}getChildAfterChild(e,n,o){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:No(this.viewCache_),a=vM(this.writes_,r,n,1,o,e);return a.length===0?null:a[0]}}function SM(t,e){W(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),W(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function CM(t,e,n,o,r){const a=new EM;let c,h;if(n.type===Mn.OVERWRITE){const p=n;p.source.fromUser?c=Kf(t,e,p.path,p.snap,o,r,a):(W(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!be(p.path),c=yu(t,e,p.path,p.snap,o,r,h,a))}else if(n.type===Mn.MERGE){const p=n;p.source.fromUser?c=wM(t,e,p.path,p.children,o,r,a):(W(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),c=Wf(t,e,p.path,p.children,o,r,h,a))}else if(n.type===Mn.ACK_USER_WRITE){const p=n;p.revert?c=NM(t,e,p.path,o,r,a):c=bM(t,e,p.path,p.affectedTree,o,r,a)}else if(n.type===Mn.LISTEN_COMPLETE)c=IM(t,e,n.path,o,a);else throw Vs("Unknown operation type: "+n.type);const g=a.getChanges();return AM(e,c,g),{viewCache:c,changes:g}}function AM(t,e,n){const o=e.eventCache;if(o.isFullyInitialized()){const r=o.getNode().isLeafNode()||o.getNode().isEmpty(),a=Bf(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!o.getNode().equals(a)||!o.getNode().getPriority().equals(a.getPriority()))&&n.push(Kx(Bf(e)))}}function CS(t,e,n,o,r,a){const c=e.eventCache;if(gu(o,n)!=null)return e;{let h,g;if(be(n))if(W(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=No(e),_=p instanceof Le?p:Le.EMPTY_NODE,v=vS(o,_);h=t.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const p=Jf(o,No(e));h=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=Ie(n);if(p===".priority"){W(Wi(n)===1,"Can't have a priority with additional path components");const _=c.getNode();g=e.serverCache.getNode();const v=Cv(o,n,_,g);v!=null?h=t.filter.updatePriority(_,v):h=c.getNode()}else{const _=We(n);let v;if(c.isCompleteForChild(p)){g=e.serverCache.getNode();const E=Cv(o,n,c.getNode(),g);E!=null?v=c.getNode().getImmediateChild(p).updateChild(_,E):v=c.getNode().getImmediateChild(p)}else v=qh(o,p,e.serverCache);v!=null?h=t.filter.updateChild(c.getNode(),p,v,_,r,a):h=c.getNode()}}return tl(e,h,c.isFullyInitialized()||be(n),t.filter.filtersNodes())}}function yu(t,e,n,o,r,a,c,h){const g=e.serverCache;let p;const _=c?t.filter:t.filter.getIndexedFilter();if(be(n))p=_.updateFullNode(g.getNode(),o,null);else if(_.filtersNodes()&&!g.isFiltered()){const A=g.getNode().updateChild(n,o);p=_.updateFullNode(g.getNode(),A,null)}else{const A=Ie(n);if(!g.isCompleteForPath(n)&&Wi(n)>1)return e;const I=We(n),x=g.getNode().getImmediateChild(A).updateChild(I,o);A===".priority"?p=_.updatePriority(g.getNode(),x):p=_.updateChild(g.getNode(),A,x,I,SS,null)}const v=pS(e,p,g.isFullyInitialized()||be(n),_.filtersNodes()),E=new Fh(r,v,a);return CS(t,v,n,r,E,h)}function Kf(t,e,n,o,r,a,c){const h=e.eventCache;let g,p;const _=new Fh(r,e,a);if(be(n))p=t.filter.updateFullNode(e.eventCache.getNode(),o,c),g=tl(e,p,!0,t.filter.filtersNodes());else{const v=Ie(n);if(v===".priority")p=t.filter.updatePriority(e.eventCache.getNode(),o),g=tl(e,p,h.isFullyInitialized(),h.isFiltered());else{const E=We(n),A=h.getNode().getImmediateChild(v);let I;if(be(E))I=o;else{const M=_.getCompleteChild(v);M!=null?jT(E)===".priority"&&M.getChild(tS(E)).isEmpty()?I=M:I=M.updateChild(E,o):I=Le.EMPTY_NODE}if(A.equals(I))g=e;else{const M=t.filter.updateChild(h.getNode(),v,I,E,_,c);g=tl(e,M,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function Av(t,e){return t.eventCache.isCompleteForChild(e)}function wM(t,e,n,o,r,a,c){let h=e;return o.foreach((g,p)=>{const _=ft(n,g);Av(e,Ie(_))&&(h=Kf(t,h,_,p,r,a,c))}),o.foreach((g,p)=>{const _=ft(n,g);Av(e,Ie(_))||(h=Kf(t,h,_,p,r,a,c))}),h}function wv(t,e,n){return n.foreach((o,r)=>{e=e.updateChild(o,r)}),e}function Wf(t,e,n,o,r,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,p;be(n)?p=o:p=new Ke(null).setTree(n,o);const _=e.serverCache.getNode();return p.children.inorderTraversal((v,E)=>{if(_.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),I=wv(t,A,E);g=yu(t,g,new $e(v),I,r,a,c,h)}}),p.children.inorderTraversal((v,E)=>{const A=!e.serverCache.isCompleteForChild(v)&&E.value===null;if(!_.hasChild(v)&&!A){const I=e.serverCache.getNode().getImmediateChild(v),M=wv(t,I,E);g=yu(t,g,new $e(v),M,r,a,c,h)}}),g}function bM(t,e,n,o,r,a,c){if(gu(r,n)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(o.value!=null){if(be(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return yu(t,e,n,g.getNode().getChild(n),r,a,h,c);if(be(n)){let p=new Ke(null);return g.getNode().forEachChild(Ms,(_,v)=>{p=p.set(new $e(_),v)}),Wf(t,e,n,p,r,a,h,c)}else return e}else{let p=new Ke(null);return o.foreach((_,v)=>{const E=ft(n,_);g.isCompleteForPath(E)&&(p=p.set(_,g.getNode().getChild(E)))}),Wf(t,e,n,p,r,a,h,c)}}function IM(t,e,n,o,r){const a=e.serverCache,c=pS(e,a.getNode(),a.isFullyInitialized()||be(n),a.isFiltered());return CS(t,c,n,o,SS,r)}function NM(t,e,n,o,r,a){let c;if(gu(o,n)!=null)return e;{const h=new Fh(o,e,r),g=e.eventCache.getNode();let p;if(be(n)||Ie(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=Jf(o,No(e));else{const v=e.serverCache.getNode();W(v instanceof Le,"serverChildren would be complete if leaf node"),_=vS(o,v)}_=_,p=t.filter.updateFullNode(g,_,a)}else{const _=Ie(n);let v=qh(o,_,e.serverCache);v==null&&e.serverCache.isCompleteForChild(_)&&(v=g.getImmediateChild(_)),v!=null?p=t.filter.updateChild(g,_,v,We(n),h,a):e.eventCache.getNode().hasChild(_)?p=t.filter.updateChild(g,_,Le.EMPTY_NODE,We(n),h,a):p=g,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Jf(o,No(e)),c.isLeafNode()&&(p=t.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||gu(o,Fe())!=null,tl(e,p,c,t.filter.filtersNodes())}}function RM(t,e){const n=No(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(Ie(e)).isEmpty())?n.getChild(e):null}function bv(t,e,n,o){e.type===Mn.MERGE&&e.source.queryId!==null&&(W(No(t.viewCache_),"We should always have a full cache before handling merges"),W(Bf(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,a=CM(t.processor_,r,e,n,o);return SM(t.processor_,a.viewCache),W(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,xM(t,a.changes,a.viewCache.eventCache.getNode())}function xM(t,e,n,o){const r=t.eventRegistrations_;return iM(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iv;function MM(t){W(!Iv,"__referenceConstructor has already been defined"),Iv=t}function Bh(t,e,n,o){const r=e.source.queryId;if(r!==null){const a=t.views.get(r);return W(a!=null,"SyncTree gave us an op for an invalid query."),bv(a,e,n,o)}else{let a=[];for(const c of t.views.values())a=a.concat(bv(c,e,n,o));return a}}function zh(t,e){let n=null;for(const o of t.views.values())n=n||RM(o,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv;function DM(t){W(!Nv,"__referenceConstructor has already been defined"),Nv=t}class Rv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=_M(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kM(t,e,n,o,r){return lM(t.pendingWriteTree_,e,n,o,r),r?Du(t,new Io(cS(),e,n)):[]}function As(t,e,n=!1){const o=aM(t.pendingWriteTree_,e);if(uM(t.pendingWriteTree_,e)){let a=new Ke(null);return o.snap!=null?a=a.set(Fe(),!0):fn(o.children,c=>{a=a.set(new $e(c),!0)}),Du(t,new mu(o.path,a,n))}else return[]}function Mu(t,e,n){return Du(t,new Io(dS(),e,n))}function UM(t,e,n){const o=Ke.fromObject(n);return Du(t,new cl(dS(),e,o))}function LM(t,e,n,o){const r=IS(t,o);if(r!=null){const a=NS(r),c=a.path,h=a.queryId,g=cn(c,e),p=new Io(fS(h),g,n);return RS(t,c,p)}else return[]}function PM(t,e,n,o){const r=IS(t,o);if(r){const a=NS(r),c=a.path,h=a.queryId,g=cn(c,e),p=Ke.fromObject(n),_=new cl(fS(h),g,p);return RS(t,c,_)}else return[]}function AS(t,e,n){const r=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=cn(c,e),p=zh(h,g);if(p)return p});return _S(r,e,a,n,!0)}function Du(t,e){return wS(e,t.syncPointTree_,null,gS(t.pendingWriteTree_,Fe()))}function wS(t,e,n,o){if(be(t.path))return bS(t,e,n,o);{const r=e.get(Fe());n==null&&r!=null&&(n=zh(r,Fe()));let a=[];const c=Ie(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const p=n?n.getImmediateChild(c):null,_=ES(o,c);a=a.concat(wS(h,g,p,_))}return r&&(a=a.concat(Bh(r,t,o,n))),a}}function bS(t,e,n,o){const r=e.get(Fe());n==null&&r!=null&&(n=zh(r,Fe()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=n?n.getImmediateChild(c):null,p=ES(o,c),_=t.operationForChild(c);_&&(a=a.concat(bS(_,h,g,p)))}),r&&(a=a.concat(Bh(r,t,o,n))),a}function IS(t,e){return t.tagToQueryMap.get(e)}function NS(t){const e=t.indexOf("$");return W(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $e(t.substr(0,e))}}function RS(t,e,n){const o=t.syncPointTree_.get(e);W(o,"Missing sync point for query tag that we're tracking");const r=gS(t.pendingWriteTree_,e);return Bh(o,n,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Yh(n)}node(){return this.node_}}class Jh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ft(this.path_,e);return new Jh(this.syncTree_,n)}node(){return AS(this.syncTree_,this.path_)}}const OM=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xv=function(t,e,n){if(!t||typeof t!="object")return t;if(W(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return HM(t[".sv"],e,n);if(typeof t[".sv"]=="object")return VM(t[".sv"],e);W(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},HM=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:W(!1,"Unexpected server value: "+t)}},VM=function(t,e,n){t.hasOwnProperty("increment")||W(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const o=t.increment;typeof o!="number"&&W(!1,"Unexpected increment value: "+o);const r=e.node();if(W(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return o;const c=r.getValue();return typeof c!="number"?o:c+o},GM=function(t,e,n,o){return Kh(e,new Jh(n,t),o)},qM=function(t,e,n){return Kh(t,new Yh(e),n)};function Kh(t,e,n){const o=t.getPriority().val(),r=xv(o,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,h=xv(c.getValue(),e,n);return h!==c.getValue()||r!==c.getPriority().val()?new ct(h,St(r)):t}else{const c=t;return a=c,r!==c.getPriority().val()&&(a=a.updatePriority(new ct(r))),c.forEachChild(Ct,(h,g)=>{const p=Kh(g,e.getImmediateChild(h),n);p!==g&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e="",n=null,o={children:{},childCount:0}){this.name=e,this.parent=n,this.node=o}}function $h(t,e){let n=e instanceof $e?e:new $e(e),o=t,r=Ie(n);for(;r!==null;){const a=Us(o.node.children,r)||{children:{},childCount:0};o=new Wh(r,o,a),n=We(n),r=Ie(n)}return o}function Bs(t){return t.node.value}function xS(t,e){t.node.value=e,$f(t)}function MS(t){return t.node.childCount>0}function FM(t){return Bs(t)===void 0&&!MS(t)}function ku(t,e){fn(t.node.children,(n,o)=>{e(new Wh(n,t,o))})}function DS(t,e,n,o){n&&e(t),ku(t,r=>{DS(r,e,!0)})}function BM(t,e,n){let o=t.parent;for(;o!==null;){if(e(o))return!0;o=o.parent}return!1}function El(t){return new $e(t.parent===null?t.name:El(t.parent)+"/"+t.name)}function $f(t){t.parent!==null&&zM(t.parent,t.name,t)}function zM(t,e,n){const o=FM(n),r=An(t.node.children,e);o&&r?(delete t.node.children[e],t.node.childCount--,$f(t)):!o&&!r&&(t.node.children[e]=n.node,t.node.childCount++,$f(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=/[\[\].#$\/\u0000-\u001F\u007F]/,JM=/[\[\].#$\u0000-\u001F\u007F]/,wf=10*1024*1024,kS=function(t){return typeof t=="string"&&t.length!==0&&!YM.test(t)},KM=function(t){return typeof t=="string"&&t.length!==0&&!JM.test(t)},WM=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),KM(t)},US=function(t,e,n){const o=n instanceof $e?new Ix(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+vo(o));if(typeof e=="function")throw new Error(t+"contains a function "+vo(o)+" with contents = "+e.toString());if(DT(e))throw new Error(t+"contains "+e.toString()+" "+vo(o));if(typeof e=="string"&&e.length>wf/3&&wu(e)>wf)throw new Error(t+"contains a string greater than "+wf+" utf8 bytes "+vo(o)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,a=!1;if(fn(e,(c,h)=>{if(c===".value")r=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!kS(c)))throw new Error(t+" contains an invalid key ("+c+") "+vo(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Nx(o,c),US(t,h,o),Rx(o)}),r&&a)throw new Error(t+' contains ".value" child '+vo(o)+" in addition to actual children.")}},$M=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!WM(n))throw new Error($b(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QM(t,e){let n=null;for(let o=0;o<e.length;o++){const r=e[o],a=r.getPath();n!==null&&!nS(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(r)}n&&t.eventLists_.push(n)}function ko(t,e,n){QM(t,n),ZM(t,o=>vn(o,e)||vn(e,o))}function ZM(t,e){t.recursionDepth_++;let n=!0;for(let o=0;o<t.eventLists_.length;o++){const r=t.eventLists_[o];if(r){const a=r.path;e(a)?(jM(t.eventLists_[o]),t.eventLists_[o]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function jM(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const o=n.getEventRunner();jr&&Tt("event: "+n.toString()),_l(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="repo_interrupt",tD=25;class nD{constructor(e,n,o,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=o,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pu(),this.transactionQueueTree_=new Wh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function iD(t,e,n){if(t.stats_=Lh(t.repoInfo_),t.forceRestClient_||Z1())t.server_=new hu(t.repoInfo_,(o,r,a,c)=>{Mv(t,o,r,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Dv(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vt(n)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}t.persistentConnection_=new oi(t.repoInfo_,e,(o,r,a,c)=>{Mv(t,o,r,a,c)},o=>{Dv(t,o)},o=>{sD(t,o)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(o=>{t.server_.refreshAuthToken(o)}),t.appCheckProvider_.addTokenChangeListener(o=>{t.server_.refreshAppCheckToken(o.token)}),t.statsReporter_=ix(t.repoInfo_,()=>new nM(t.stats_,t.server_)),t.infoData_=new Qx,t.infoSyncTree_=new Rv({startListening:(o,r,a,c)=>{let h=[];const g=t.infoData_.getNode(o._path);return g.isEmpty()||(h=Mu(t.infoSyncTree_,o._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Xh(t,"connected",!1),t.serverSyncTree_=new Rv({startListening:(o,r,a,c)=>(t.server_.listen(o,a,r,(h,g)=>{const p=c(h,g);ko(t.eventQueue_,o._path,p)}),[]),stopListening:(o,r)=>{t.server_.unlisten(o,r)}})}function oD(t){const n=t.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function LS(t){return OM({timestamp:oD(t)})}function Mv(t,e,n,o,r){t.dataUpdateCount++;const a=new $e(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(r)if(o){const g=nu(n,p=>St(p));c=PM(t.serverSyncTree_,a,g,r)}else{const g=St(n);c=LM(t.serverSyncTree_,a,g,r)}else if(o){const g=nu(n,p=>St(p));c=UM(t.serverSyncTree_,a,g)}else{const g=St(n);c=Mu(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=Zh(t,a)),ko(t.eventQueue_,h,c)}function Dv(t,e){Xh(t,"connected",e),e===!1&&lD(t)}function sD(t,e){fn(e,(n,o)=>{Xh(t,n,o)})}function Xh(t,e,n){const o=new $e("/.info/"+e),r=St(n);t.infoData_.updateSnapshot(o,r);const a=Mu(t.infoSyncTree_,o,r);ko(t.eventQueue_,o,a)}function rD(t){return t.nextWriteId_++}function lD(t){PS(t,"onDisconnectEvents");const e=LS(t),n=pu();Ff(t.onDisconnect_,Fe(),(r,a)=>{const c=GM(r,a,t.serverSyncTree_,e);uS(n,r,c)});let o=[];Ff(n,Fe(),(r,a)=>{o=o.concat(Mu(t.serverSyncTree_,r,a));const c=dD(t,r);Zh(t,c)}),t.onDisconnect_=pu(),ko(t.eventQueue_,Fe(),o)}function aD(t){t.persistentConnection_&&t.persistentConnection_.interrupt(eD)}function PS(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Tt(n,...e)}function OS(t,e,n){return AS(t.serverSyncTree_,e,n)||Le.EMPTY_NODE}function Qh(t,e=t.transactionQueueTree_){if(e||Uu(t,e),Bs(e)){const n=VS(t,e);W(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&uD(t,El(e),n)}else MS(e)&&ku(e,n=>{Qh(t,n)})}function uD(t,e,n){const o=n.map(p=>p.currentWriteId),r=OS(t,e,o);let a=r;const c=r.hash();for(let p=0;p<n.length;p++){const _=n[p];W(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const v=cn(e,_.path);a=a.updateChild(v,_.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,p=>{PS(t,"transaction put response",{path:g.toString(),status:p});let _=[];if(p==="ok"){const v=[];for(let E=0;E<n.length;E++)n[E].status=2,_=_.concat(As(t.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&v.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();Uu(t,$h(t.transactionQueueTree_,e)),Qh(t,t.transactionQueueTree_),ko(t.eventQueue_,e,_);for(let E=0;E<v.length;E++)_l(v[E])}else{if(p==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{Qt("transaction at "+g.toString()+" failed: "+p);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=p}Zh(t,e)}},c)}function Zh(t,e){const n=HS(t,e),o=El(n),r=VS(t,n);return cD(t,r,o),o}function cD(t,e,n){if(e.length===0)return;const o=[];let r=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],p=cn(n,g.path);let _=!1,v;if(W(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)_=!0,v=g.abortReason,r=r.concat(As(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=tD)_=!0,v="maxretry",r=r.concat(As(t.serverSyncTree_,g.currentWriteId,!0));else{const E=OS(t,g.path,c);g.currentInputSnapshot=E;const A=e[h].update(E.val());if(A!==void 0){US("transaction failed: Data returned ",A,g.path);let I=St(A);typeof A=="object"&&A!=null&&An(A,".priority")||(I=I.updatePriority(E.getPriority()));const x=g.currentWriteId,O=LS(t),z=qM(I,E,O);g.currentOutputSnapshotRaw=I,g.currentOutputSnapshotResolved=z,g.currentWriteId=rD(t),c.splice(c.indexOf(x),1),r=r.concat(kM(t.serverSyncTree_,g.path,z,g.currentWriteId,g.applyLocally)),r=r.concat(As(t.serverSyncTree_,x,!0))}else _=!0,v="nodata",r=r.concat(As(t.serverSyncTree_,g.currentWriteId,!0))}ko(t.eventQueue_,n,r),r=[],_&&(e[h].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?o.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):o.push(()=>e[h].onComplete(new Error(v),!1,null))))}Uu(t,t.transactionQueueTree_);for(let h=0;h<o.length;h++)_l(o[h]);Qh(t,t.transactionQueueTree_)}function HS(t,e){let n,o=t.transactionQueueTree_;for(n=Ie(e);n!==null&&Bs(o)===void 0;)o=$h(o,n),e=We(e),n=Ie(e);return o}function VS(t,e){const n=[];return GS(t,e,n),n.sort((o,r)=>o.order-r.order),n}function GS(t,e,n){const o=Bs(e);if(o)for(let r=0;r<o.length;r++)n.push(o[r]);ku(e,r=>{GS(t,r,n)})}function Uu(t,e){const n=Bs(e);if(n){let o=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[o]=n[r],o++);n.length=o,xS(e,n.length>0?n:void 0)}ku(e,o=>{Uu(t,o)})}function dD(t,e){const n=El(HS(t,e)),o=$h(t.transactionQueueTree_,e);return BM(o,r=>{bf(t,r)}),bf(t,o),DS(o,r=>{bf(t,r)}),n}function bf(t,e){const n=Bs(e);if(n){const o=[];let r=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(W(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(W(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),r=r.concat(As(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&o.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?xS(e,void 0):n.length=a+1,ko(t.eventQueue_,El(e),r);for(let c=0;c<o.length;c++)_l(o[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){let e="";const n=t.split("/");for(let o=0;o<n.length;o++)if(n[o].length>0){let r=n[o];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function hD(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const o=n.split("=");o.length===2?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Qt(`Invalid query segment '${n}' in query '${t}'`)}return e}const kv=function(t,e){const n=pD(t),o=n.namespace;n.domain==="firebase.com"&&li(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&n.domain!=="localhost"&&li("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||z1();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new zT(n.host,n.secure,o,r,e,"",o!==n.subdomain),path:new $e(n.pathString)}},pD=function(t){let e="",n="",o="",r="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let p=t.indexOf("//");p>=0&&(h=t.substring(0,p-1),t=t.substring(p+2));let _=t.indexOf("/");_===-1&&(_=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(_,v)),_<v&&(r=fD(t.substring(_,v)));const E=hD(t.substring(Math.min(t.length,v)));p=e.indexOf(":"),p>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(p+1),10)):p=e.length;const A=e.slice(0,p);if(A.toLowerCase()==="localhost")n="localhost";else if(A.split(".").length<=2)n=A;else{const I=e.indexOf(".");o=e.substring(0,I).toLowerCase(),n=e.substring(I+1),a=o}"ns"in E&&(a=E.ns)}return{host:e,port:g,domain:n,subdomain:o,secure:c,scheme:h,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,o,r){this._repo=e,this._path=n,this._queryParams=o,this._orderByCalled=r}get key(){return be(this._path)?null:jT(this._path)}get ref(){return new zs(this._repo,this._path)}get _queryIdentifier(){const e=_v(this._queryParams),n=kh(e);return n==="{}"?"default":n}get _queryObject(){return _v(this._queryParams)}isEqual(e){if(e=xt(e),!(e instanceof jh))return!1;const n=this._repo===e._repo,o=nS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&o&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+bx(this._path)}}class zs extends jh{constructor(e,n){super(e,n,new Vh,!1)}get parent(){const e=tS(this._path);return e===null?null:new zs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}MM(zs);DM(zs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="FIREBASE_DATABASE_EMULATOR_HOST",Xf={};let gD=!1;function yD(t,e,n,o){const r=e.lastIndexOf(":"),a=e.substring(0,r),c=Gs(a);t.repoInfo_=new zT(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),o&&(t.authTokenProvider_=o)}function _D(t,e,n,o,r){let a=o||t.options.databaseURL;a===void 0&&(t.options.projectId||li("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=kv(a,r),h=c.repoInfo,g;typeof process<"u"&&j_&&(g=j_[mD]),g?(a=`http://${g}?ns=${h.namespace}`,c=kv(a,r),h=c.repoInfo):c.repoInfo.secure;const p=new ex(t.name,t.options,e);$M("Invalid Firebase Database URL",c),be(c.path)||li("Database URL must point to the root of a Firebase Database (not including a child path).");const _=ED(h,t,p,new j1(t,n));return new TD(_,t)}function vD(t,e){const n=Xf[e];(!n||n[t.key]!==t)&&li(`Database ${e}(${t.repoInfo_}) has already been deleted.`),aD(t),delete n[t.key]}function ED(t,e,n,o){let r=Xf[e.name];r||(r={},Xf[e.name]=r);let a=r[t.toURLString()];return a&&li("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new nD(t,gD,n,o),r[t.toURLString()]=a,a}let TD=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(iD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zs(this._repo,Fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&li("Cannot call "+e+" on a deleted database.")}};function SD(t=Ch(),e){const n=dl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const o=xb("database");o&&CD(n,...o)}return n}function CD(t,e,n,o={}){t=xt(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&So(o,a.repoInfo_.emulatorOptions))return;li("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&li('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Za(Za.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:Mb(o.mockUserToken,t.app.options.projectId);c=new Za(h)}Gs(e)&&(NE(e),RE("Database",!0)),yD(a,r,o,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){H1($i),Ki(new zi("database",(e,{instanceIdentifier:n})=>{const o=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return _D(o,r,a,n)},"PUBLIC").setMultipleInstances(!0)),En(ev,tv,t),En(ev,tv,"esm2020")}oi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};oi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};AD();const wD={apiKey:"AIzaSyDu9xJlDhzA5TfBsakrQj21Ybupjcu7KDo",authDomain:"verdantconnect-wp8dj.firebaseapp.com",databaseURL:"https://verdantconnect-wp8dj-default-rtdb.firebaseio.com",projectId:"verdantconnect-wp8dj",storageBucket:"verdantconnect-wp8dj.firebasestorage.app",messagingSenderId:"530048230107",appId:"1:530048230107:web:e400c941adc4d4f829e2fe"},qS=NT.initializeApp(wD),un=I1(qS);SD(qS);const bD=new jn;bD.setCustomParameters({client_id:"1029411846084-2jidcvnmiumb0ajqdm3fcot1rvmaldr6.apps.googleusercontent.com"});var ke=(t=>(t.WELCOME="WELCOME",t.AUTH="AUTH",t.TERMS="TERMS",t.SETUP_COMPLETE="SETUP_COMPLETE",t.HOME="HOME",t.PROJECT="PROJECT",t.HISTORY="HISTORY",t.PROFILE="PROFILE",t))(ke||{});const Uo={he:{welcome:" ",start:"",login:"",register:"",termsTitle:"  ",termsText:"     :",legalDisclaimer:" :           ...",localStorageWarning:" :   ...",approve:" ",setupComplete:" ",startUsing:"  ",hello:"",search:"...",newChat:" ",prevProjects:" ",fullHistory:" ",typeRequest:" ...",settings:"",accessibility:"",home:"",logout:"",projects:"",preview:"",code:"",profile:"",saveData:"  (Excel/JSON)",importData:" ",editProfile:" ",deleteAccount:" ",namePlaceholder:" ",general:"",security:"",about:"",help:"",theme:" ",light:"",dark:"",uploadFile:" ",generating:"  ...",back:"",copyCode:" ",downloadCode:" ",saveProject:" ",save:"",cancel:"",projectNamePlaceholder:" ...",projectSaved:"  !",websiteReady:" !",describeProject:"    ...",noHistory:"  ",readingFile:" ...",fileAdded:" ",emailPlaceholder:"",passwordPlaceholder:"",or:"",auth_desc_register:"    .",auth_desc_login:"  .",google_login:"  Google",acc_largeText:" ",acc_wordSpacing:" ",acc_letterSpacing:" ",acc_grayscale:" ",acc_invertColors:" ",acc_highlightLinks:" ",acc_bigCursor:" ",acc_readingGuide:" ",acc_hideImages:" ",acc_readableFont:" ",acc_reset:" ",acc_statement:" ",help_bot_placeholder:"     ?",help_common_problems:" ",help_q1:"  ?",help_q2:"   ?",help_q3:"   ",profile_update:" ",profile_photo_url:" ",backup_all:"   ",about_title:" IVAN",about_text:"     ."},en:{welcome:"Welcome",start:"Start",login:"Login",register:"Register",termsTitle:"Terms & Policy",termsText:"By using this app, you agree to the following:",legalDisclaimer:"Legal Disclaimer: You hereby waive any right to sue...",localStorageWarning:"Data Storage: Your data is stored locally...",approve:"Approve & Continue",setupComplete:"Setup Complete",startUsing:"Start Using Avan",hello:"Hello",search:"Search...",newChat:"New Chat",prevProjects:"Previous Projects",fullHistory:"Full History",typeRequest:"Type a request...",settings:"Settings",accessibility:"Accessibility",home:"Home",logout:"Logout",projects:"Projects",preview:"Preview",code:"Code",profile:"Profile",saveData:"Save Data (Excel/JSON)",importData:"Import Data",editProfile:"Edit Profile",deleteAccount:"Delete Account",namePlaceholder:"Full Name",general:"General",security:"Security",about:"About",help:"Help",theme:"Theme",light:"Light",dark:"Dark",uploadFile:"Add File",generating:"Building your site...",back:"Back",copyCode:"Copy Code",downloadCode:"Download Code",saveProject:"Save Project",save:"Save",cancel:"Cancel",projectNamePlaceholder:"Project Name...",projectSaved:"Project saved successfully!",websiteReady:"Website ready!",describeProject:"Describe your premium website...",noHistory:"No saved history",readingFile:"Reading file...",fileAdded:"File added",emailPlaceholder:"Email",passwordPlaceholder:"Password",or:"OR",auth_desc_register:"Create your account to start building.",auth_desc_login:"Welcome back to Avan.",google_login:"Sign in with Google",acc_largeText:"Large Text",acc_wordSpacing:"Word Spacing",acc_letterSpacing:"Letter Spacing",acc_grayscale:"Grayscale",acc_invertColors:"Invert Colors",acc_highlightLinks:"Highlight Links",acc_bigCursor:"Big Cursor",acc_readingGuide:"Reading Guide",acc_hideImages:"Hide Images",acc_readableFont:"Readable Font",acc_reset:"Reset Settings",acc_statement:"Accessibility Statement",help_bot_placeholder:"How can I help you today?",help_common_problems:"Common Problems",help_q1:"How to start a project?",help_q2:"How to save code?",help_q3:"The bot is not responding",profile_update:"Update Details",profile_photo_url:"Photo URL",backup_all:"Backup All Projects",about_title:"About IVAN",about_text:"Advanced AI Website Builder."},it:{welcome:"Benvenuto",start:"Inizio",login:"Accesso",register:"Registrati",hello:"Ciao",settings:"Impostazioni"},fr:{welcome:"Bienvenue",start:"Commencer",login:"Connexion",register:"Inscription",hello:"Bonjour",settings:"Paramtres"},de:{welcome:"Willkommen",start:"Start",login:"Login",register:"Registrieren",hello:"Hallo",settings:"Einstellungen"},pl:{welcome:"Witamy",start:"Start",login:"Login",register:"Rejestracja",hello:"Cze",settings:"Ustawienia"},da:{welcome:"Velkommen",start:"Start",login:"Login",register:"Tilmeld",hello:"Hej",settings:"Indstillinger"},nl:{welcome:"Welkom",start:"Start",login:"Login",register:"Registreren",hello:"Hallo",settings:"Instellingen"},es:{welcome:"Bienvenido",start:"Inicio",login:"Entrar",register:"Registro",hello:"Hola",settings:"Ajustes"}};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ND=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),Uv=t=>{const e=ND(t);return e.charAt(0).toUpperCase()+e.slice(1)},FS=(...t)=>t.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),RD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=re.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:r="",children:a,iconNode:c,...h},g)=>re.createElement("svg",{ref:g,...xD,width:e,height:e,stroke:t,strokeWidth:o?Number(n)*24/Number(e):n,className:FS("lucide",r),...!a&&!RD(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,_])=>re.createElement(p,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const n=re.forwardRef(({className:o,...r},a)=>re.createElement(MD,{ref:a,iconNode:e,className:FS(`lucide-${ID(Uv(t))}`,`lucide-${t}`,o),...r}));return n.displayName=Uv(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_u=_e("arrow-left",DD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],UD=_e("arrow-right",kD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],PD=_e("arrow-up",LD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],HD=_e("chevron-down",OD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],If=_e("chevron-right",VD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qD=_e("circle-alert",GD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BD=_e("circle-check-big",FD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],YD=_e("circle-question-mark",zD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],KD=_e("clock",JD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],BS=_e("code",WD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XD=_e("copy",$D);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ZD=_e("database",QD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ek=_e("download",jD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Lv=_e("eye-off",tk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qf=_e("eye",nk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ok=_e("globe",ik);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],zS=_e("history",sk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Pv=_e("info",rk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ak=_e("lock",lk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ck=_e("log-out",uk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],fk=_e("menu",dk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],pk=_e("message-square-plus",hk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],gk=_e("message-square",mk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],_k=_e("monitor",yk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ov=_e("moon",vk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],Hv=_e("mouse-pointer-2",Ek);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Sk=_e("paperclip",Tk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YS=_e("save",Ck);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],wk=_e("scale",Ak);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ik=_e("send",bk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JS=_e("settings",Nk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xk=_e("shield-check",Rk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Dk=_e("sparkles",Mk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Vv=_e("sun",kk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Lk=_e("trash-2",Uk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ok=_e("triangle-alert",Pk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Fa=_e("type",Hk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ep=_e("user",Vk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],qk=_e("volume-2",Gk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Bk=_e("volume-x",Fk);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zf=_e("x",zk),Yk=({currentLanguage:t,setLanguage:e,onStart:n})=>{var h;const o=Uo[t],[r,a]=re.useState(!1),c=[{code:"he",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"fr",name:"Franais",flag:""},{code:"it",name:"Italiano",flag:""},{code:"de",name:"Deutsch",flag:""},{code:"pl",name:"Polski",flag:""},{code:"da",name:"Dansk",flag:""},{code:"nl",name:"Nederlands",flag:""},{code:"es",name:"Espaol",flag:""}];return C.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-between p-8 relative overflow-hidden font-heebo bg-gray-900",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 animate-gradient-x z-0"}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0 mix-blend-overlay"}),C.jsxs("div",{className:"relative z-10 flex flex-col items-center mt-20 text-center w-full",children:[C.jsx("h1",{className:"text-6xl sm:text-7xl font-sans font-black text-white mb-4 drop-shadow-lg tracking-wide",children:"AVAN AI"}),C.jsx("p",{className:"text-2xl sm:text-3xl text-white/90 font-sans font-normal tracking-wide uppercase border-b border-white/30 pb-2",children:o.welcome})]}),C.jsxs("div",{className:"relative z-10 w-full max-w-sm flex flex-col gap-8 mb-16 items-center",children:[C.jsxs("div",{className:"relative z-20",children:[C.jsxs("button",{onClick:()=>a(!r),className:"w-48 h-12 rounded-full bg-white/20 backdrop-blur-xl border border-white/30 flex items-center justify-between px-6 text-white hover:bg-white/30 transition-all duration-300 shadow-lg",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(ok,{className:"w-5 h-5"}),C.jsx("span",{children:(h=c.find(g=>g.code===t))==null?void 0:h.name})]}),C.jsx(HD,{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`})]}),C.jsx("div",{className:`absolute bottom-14 left-0 w-48 bg-gray-900/90 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden transition-all duration-300 origin-bottom shadow-2xl ${r?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-2 pointer-events-none"}`,children:C.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar p-1",children:c.map(g=>C.jsxs("button",{onClick:()=>{e(g.code),a(!1)},className:`w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-white/10 rounded-xl transition ${t===g.code?"bg-blue-600/50 text-white":"text-white"}`,children:[C.jsx("span",{className:"text-xl",children:g.flag}),C.jsx("span",{className:"font-medium",children:g.name})]},g.code))})})]}),C.jsx("button",{onClick:n,className:"w-72 h-16 bg-white text-purple-900 font-bold text-2xl rounded-full shadow-[0_0_30px_rgba(255,255,255,0.3)] hover:scale-105 active:scale-95 transition-all transform duration-300 tracking-wider uppercase font-sans",children:o.start})]})]})},Jk=({onSuccessRegister:t,onSuccessLogin:e,onBack:n,language:o})=>{const r=Uo[o],[a,c]=re.useState("register"),[h,g]=re.useState(""),[p,_]=re.useState(""),[v,E]=re.useState(""),[A,I]=re.useState(""),[M,x]=re.useState(""),[O,z]=re.useState(!1),B=X=>{const $=X.code;if(X.message,$==="auth/unauthorized-domain"){const J=window.location.hostname;return x(`Domain "${J}" is not authorized in Firebase Console > Authentication > Settings > Authorized Domains.`),o==="he"?" :    .":"Unauthorized Domain Error"}switch($){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":return o==="he"?"  .":"Invalid credentials.";case"auth/email-already-in-use":return o==="he"?"   .":"Email already in use.";case"auth/weak-password":return o==="he"?"  .":"Password too weak.";case"auth/popup-closed-by-user":return o==="he"?" .":"Sign in cancelled.";default:return`Error: ${$}`}},Y=async X=>{X.preventDefault(),I(""),x(""),z(!0);try{if(a==="register"){const $=await lR(un,p,v);h&&await gT($.user,{displayName:h}),t()}else await aR(un,p,v),e()}catch($){console.error("Auth Error:",$),I(B($)),z(!1)}};return C.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col font-heebo overflow-hidden bg-gray-900",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 animate-gradient-x opacity-100 z-0"}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0 mix-blend-overlay"}),C.jsx("div",{className:"relative z-10 px-6 pt-6 flex items-center",children:C.jsx("button",{onClick:n,className:"p-3 bg-white/10 rounded-full hover:bg-white/20 transition backdrop-blur-md",children:C.jsx(_u,{className:"w-6 h-6 text-white rtl:rotate-180"})})}),C.jsxs("div",{className:"relative z-10 flex-1 flex flex-col justify-center px-8 sm:px-12 lg:px-24 max-w-2xl mx-auto w-full",children:[C.jsxs("div",{className:"mb-10 text-center sm:text-start",children:[C.jsx("h1",{className:"text-5xl font-black mb-4 tracking-tight text-white drop-shadow-lg",children:a==="register"?r.register:r.login}),C.jsx("p",{className:"text-xl text-white/90 font-medium",children:a==="register"?r.auth_desc_register:r.auth_desc_login})]}),A&&C.jsxs("div",{className:"mb-6 p-4 bg-red-900/80 border border-red-500/50 text-white rounded-2xl flex flex-col gap-2 backdrop-blur-md shadow-lg",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx(qD,{className:"w-5 h-5 flex-shrink-0"}),C.jsx("span",{className:"font-bold",children:A})]}),M&&C.jsx("div",{className:"mt-2 text-sm bg-black/20 p-2 rounded text-red-200 font-mono break-all",children:M})]}),C.jsxs("form",{onSubmit:Y,className:"space-y-5",children:[a==="register"&&C.jsx("div",{children:C.jsx("input",{type:"text",value:h,onChange:X=>g(X.target.value),className:"w-full px-6 py-4 rounded-2xl border border-white/30 bg-white/20 text-white focus:bg-white/30 focus:border-white/50 outline-none transition text-lg placeholder-white/70 backdrop-blur-md shadow-inner",placeholder:r.namePlaceholder,required:!0,disabled:O})}),C.jsx("div",{children:C.jsx("input",{type:"email",value:p,onChange:X=>_(X.target.value),className:"w-full px-6 py-4 rounded-2xl border border-white/30 bg-white/20 text-white focus:bg-white/30 focus:border-white/50 outline-none transition text-lg placeholder-white/70 backdrop-blur-md shadow-inner",placeholder:r.emailPlaceholder,required:!0,disabled:O})}),C.jsx("div",{children:C.jsx("input",{type:"password",value:v,onChange:X=>E(X.target.value),className:"w-full px-6 py-4 rounded-2xl border border-white/30 bg-white/20 text-white focus:bg-white/30 focus:border-white/50 outline-none transition text-lg placeholder-white/70 backdrop-blur-md shadow-inner",placeholder:r.passwordPlaceholder,required:!0,disabled:O})}),C.jsx("button",{type:"submit",disabled:O,className:"w-full font-bold py-5 rounded-2xl shadow-xl hover:shadow-2xl hover:bg-white/90 transition-all transform hover:-translate-y-1 text-purple-900 text-xl bg-white active:scale-95 mt-4",children:O?"...":a==="register"?r.register:r.login})]}),C.jsx("div",{className:"mt-8 text-center",children:C.jsx("button",{onClick:()=>{c(a==="login"?"register":"login"),I("")},disabled:O,className:"text-white hover:text-blue-200 hover:underline font-bold text-lg transition-colors",children:a==="login"?r.register:r.login})})]})]})},Gv=({view:t,language:e,onNext:n})=>{const o=Uo[e];return C.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 relative overflow-hidden bg-gray-900 font-heebo",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 animate-gradient-x z-0"}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0 mix-blend-overlay"}),C.jsxs("div",{className:"relative z-10 w-full max-w-md glass p-8 rounded-3xl border border-white/20 text-center animate-tilt shadow-2xl",children:[t==="TERMS"&&C.jsxs("div",{className:"flex flex-col items-center gap-6",children:[C.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-2 shadow-inner",children:C.jsx(xk,{className:"w-10 h-10 text-white"})}),C.jsx("h2",{className:"text-3xl font-bold text-white drop-shadow-md",children:o.termsTitle}),C.jsxs("div",{className:"h-64 overflow-y-auto bg-black/20 p-4 rounded-xl text-start text-white/90 text-sm leading-relaxed custom-scrollbar border border-white/10 space-y-4 shadow-inner",children:[C.jsx("p",{className:"font-bold",children:o.termsText}),C.jsxs("div",{className:"flex gap-2 items-start bg-white/5 p-3 rounded-lg border border-white/5",children:[C.jsx(wk,{className:"w-5 h-5 text-yellow-300 flex-shrink-0 mt-1"}),C.jsx("p",{children:o.legalDisclaimer})]}),C.jsxs("div",{className:"flex gap-2 items-start bg-white/5 p-3 rounded-lg border border-white/5",children:[C.jsx(ZD,{className:"w-5 h-5 text-green-300 flex-shrink-0 mt-1"}),C.jsx("p",{children:o.localStorageWarning})]}),C.jsx("p",{className:"mt-2 text-xs opacity-60 text-center",children:"By clicking approve, you acknowledge that this is a client-side AI tool."})]}),C.jsx("button",{onClick:n,className:"w-full py-3.5 bg-white text-purple-900 font-bold rounded-xl shadow-lg hover:shadow-white/20 transition-all active:scale-95 text-lg",children:o.approve})]}),t==="SETUP_COMPLETE"&&C.jsxs("div",{className:"flex flex-col items-center gap-8 py-8",children:[C.jsx("h1",{className:"text-6xl font-black text-white drop-shadow-xl tracking-tight",children:"IVAN"}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 bg-white blur-xl opacity-30 rounded-full"}),C.jsx(BD,{className:"w-24 h-24 text-white relative z-10 drop-shadow-md"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("h2",{className:"text-2xl font-bold text-white",children:o.setupComplete}),C.jsx("p",{className:"text-white/80 text-lg",children:o.startUsing})]}),C.jsx("button",{onClick:n,className:"w-full py-4 bg-white text-purple-900 font-bold text-xl rounded-2xl shadow-xl hover:scale-105 active:scale-95 transition-all mt-4",children:o.start})]})]})]})};var Kk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Wk,$k;function Xk(){return{geminiUrl:Wk,vertexUrl:$k}}function Qk(t,e,n,o){var r,a;if(!(t!=null&&t.baseUrl)){const c=Xk();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:n:(a=c.geminiUrl)!==null&&a!==void 0?a:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ci{}function Q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let p=0;p<g.length;p++){const _=g[p];f(_,e.slice(a+1),n[p])}else for(const p of g)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>d(h,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Zk(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),a=o.split("."),c=new Set;let h=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const p=a[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}jf(t,r,a,0,c)}}function jf(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])jf(g,e,n,o+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,_]of Object.entries(g)){const v=[];for(const E of n.slice(o))E==="*"?v.push(p):v.push(E);f(c,v,_)}for(const p of h)delete c[p]}}else{const c=t;a in c&&jf(c[a],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jk(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const o=d(t,["resourceName"]);return o!=null&&f(e,["_url","resourceName"],o),e}function e2(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],n2(c)),e}function t2(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],i2(c)),e}function n2(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>o2(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function i2(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>s2(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function o2(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],d2(n)),e}function s2(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],f2(n)),e}function r2(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function l2(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function a2(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],u2(c)),e}function u2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function KS(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],c2(c)),e}function c2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function d2(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],tp(o));const r=d(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function f2(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],tp(o));const r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qv||(qv={}));var Fv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Fv||(Fv={}));var Bv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Bv||(Bv={}));var qi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qi||(qi={}));var zv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(zv||(zv={}));var Yv;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Yv||(Yv={}));var Jv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Jv||(Jv={}));var Kv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Kv||(Kv={}));var Wv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Wv||(Wv={}));var $v;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})($v||($v={}));var Xv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xv||(Xv={}));var Qv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qv||(Qv={}));var Zv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zv||(Zv={}));var jv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(jv||(jv={}));var e0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(e0||(e0={}));var t0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(t0||(t0={}));var n0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(n0||(n0={}));var i0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(i0||(i0={}));var o0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(o0||(o0={}));var vu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(vu||(vu={}));var s0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(s0||(s0={}));var r0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(r0||(r0={}));var l0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(l0||(l0={}));var eh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(eh||(eh={}));var a0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(a0||(a0={}));var u0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(u0||(u0={}));var c0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(c0||(c0={}));var d0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(d0||(d0={}));var f0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(f0||(f0={}));var h0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(h0||(h0={}));var p0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(p0||(p0={}));var m0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(m0||(m0={}));var g0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(g0||(g0={}));var y0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(y0||(y0={}));var _0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_0||(_0={}));var v0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(v0||(v0={}));var E0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E0||(E0={}));var T0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(T0||(T0={}));var S0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(S0||(S0={}));var C0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(C0||(C0={}));var A0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(A0||(A0={}));var w0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(w0||(w0={}));var b0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(b0||(b0={}));var I0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(I0||(I0={}));var N0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(N0||(N0={}));var R0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(R0||(R0={}));var x0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(x0||(x0={}));var M0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(M0||(M0={}));var D0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(D0||(D0={}));var k0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(k0||(k0={}));var U0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(U0||(U0={}));var L0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(L0||(L0={}));var P0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(P0||(P0={}));var O0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(O0||(O0={}));var H0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(H0||(H0={}));var ws;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ws||(ws={}));class th{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kr{get text(){var e,n,o,r,a,c,h,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const v=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[A,I]of Object.entries(E))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(I!==null||I!==void 0)&&v.push(A);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,p+=E.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,n,o,r,a,c,h,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const v of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,A]of Object.entries(v))E!=="inlineData"&&(A!==null||A!==void 0)&&_.push(E);v.inlineData&&typeof v.inlineData.data=="string"&&(p+=atob(v.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,o,r,a,c,h,g;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,o,r,a,c,h,g,p;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,o,r,a,c,h,g,p;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class V0{}class G0{}class h2{}class p2{}class m2{}class g2{}class q0{}class F0{}class B0{}class y2{}class Eu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Eu;let r;const a=e;return n?r=t2(a):r=e2(a),Object.assign(o,r),o}}class z0{}class Y0{}class J0{}class K0{}class _2{}class v2{}class E2{}class np{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new np,a=a2(e);return Object.assign(o,a),o}}class T2{}class S2{}class C2{}class W0{}class A2{get text(){var e,n,o;let r="",a=!1;const c=[];for(const h of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,o;let r="";const a=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class w2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ip{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ip,a=KS(e);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Me(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function WS(t,e){const n=Me(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function $S(t){return Array.isArray(t)?t.map(e=>Tu(e)):[Tu(t)]}function Tu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function XS(t){const e=Tu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QS(t){const e=Tu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ZS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>$0(e)):[$0(t)]}function nh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function X0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Q0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function At(t){if(t==null)throw new Error("ContentUnion is required");return nh(t)?t:{role:"user",parts:ZS(t)}}function op(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=At(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=At(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>At(n)):[At(e)]}function dn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(X0(t)||Q0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[At(t)]}const e=[],n=[],o=nh(t[0]);for(const r of t){const a=nh(r);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(X0(r)||Q0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:ZS(n)}),e}function b2(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(qi).includes(n[0].toUpperCase())?n[0].toUpperCase():qi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(qi).includes(o.toUpperCase())?o.toUpperCase():qi.TYPE_UNSPECIFIED})}}function Ds(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&b2(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(qi).includes(h.toUpperCase())?h.toUpperCase():qi.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Ds(h);else if(o.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(Ds(p))}e[c]=g}else if(r.includes(c)){const g={};for(const[p,_]of Object.entries(h))g[p]=Ds(_);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function sp(t){return Ds(t)}function rp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function lp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ys(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ds(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ds(e.response));return t}function Js(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function I2(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function di(t,e){if(typeof e!="string")throw new Error("name must be a string");return I2(t,e,"cachedContents")}function jS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Qi(t){return tp(t)}function N2(t){return t!=null&&typeof t=="object"&&"name"in t}function R2(t){return t!=null&&typeof t=="object"&&"video"in t}function x2(t){return t!=null&&typeof t=="object"&&"uri"in t}function eC(t){var e;let n;if(N2(t)&&(n=t.name),!(x2(t)&&(n=t.uri,n===void 0))&&!(R2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function nC(t){for(const e of["models","tunedModels","publisherModels"])if(M2(t,e))return t[e];return[]}function M2(t,e){return t!==null&&typeof t=="object"&&e in t}function D2(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function k2(t,e={}){const n=[],o=new Set;for(const r of t){const a=r.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const c=D2(r,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function iC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function U2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function oC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ks(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L2(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>mU(c))),f(e,["inlinedResponses"],a)}const r=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["inlinedEmbedContentResponses"],a)}return e}function P2(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&f(e,["gcsUri"],o);const r=d(t,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function O2(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsDestination","outputUriPrefix"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ja(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata","displayName"]);o!=null&&f(e,["displayName"],o);const r=d(t,["metadata","state"]);r!=null&&f(e,["state"],sC(r));const a=d(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],L2(oC(p))),e}function ih(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const r=d(t,["state"]);r!=null&&f(e,["state"],sC(r));const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const _=d(t,["model"]);_!=null&&f(e,["model"],_);const v=d(t,["inputConfig"]);v!=null&&f(e,["src"],H2(v));const E=d(t,["outputConfig"]);E!=null&&f(e,["dest"],P2(oC(E)));const A=d(t,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function H2(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const o=d(t,["gcsSource","uris"]);o!=null&&f(e,["gcsUri"],o);const r=d(t,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function V2(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&f(n,["fileName"],o);const r=d(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>pU(t,c))),f(n,["requests","requests"],a)}return n}function G2(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsSource","uris"],o);const r=d(t,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function q2(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function F2(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],Ks(t,o)),n}function B2(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],Ks(t,o)),n}function z2(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],Y2(o));const r=d(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const _=d(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["safetyRatings"],E)}const v=d(t,["urlContextMetadata"]);return v!=null&&f(e,["urlContextMetadata"],v),e}function Y2(t){const e={},n=d(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["citations"],o)}return e}function rC(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>SU(a))),f(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function J2(t,e){const n={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&f(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function K2(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const r=d(t,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],O2(U2(r))),n}function Z0(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["src"]);r!=null&&f(n,["batch","inputConfig"],V2(t,iC(t,r)));const a=d(e,["config"]);return a!=null&&J2(a,n),n}function W2(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["model"],Me(t,o));const r=d(e,["src"]);r!=null&&f(n,["inputConfig"],G2(iC(t,r)));const a=d(e,["config"]);return a!=null&&K2(a,n),n}function $2(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["batch","displayName"],o),n}function X2(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["src"]);r!=null&&f(n,["batch","inputConfig"],iU(t,r));const a=d(e,["config"]);return a!=null&&$2(a,n),n}function Q2(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],Ks(t,o)),n}function Z2(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],Ks(t,o)),n}function j2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function eU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function tU(t,e){const n={},o=d(e,["contents"]);if(o!=null){let a=op(t,o);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["requests[]","request","content"],a)}const r=d(e,["config"]);return r!=null&&(f(n,["_self"],nU(r,n)),Zk(n,{"requests[].*":"requests[].request.*"})),n}function nU(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iU(t,e){const n={},o=d(e,["fileName"]);o!=null&&f(n,["file_name"],o);const r=d(e,["inlinedRequests"]);return r!=null&&f(n,["requests"],tU(t,r)),n}function oU(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function sU(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rU(t){const e={},n=d(t,["mode"]);n!=null&&f(e,["mode"],n);const o=d(t,["allowedFunctionNames"]);if(o!=null&&f(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lU(t,e,n){const o={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],rC(At(r)));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(o,["stopSequences"],_);const v=d(e,["responseLogprobs"]);v!=null&&f(o,["responseLogprobs"],v);const E=d(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&f(o,["presencePenalty"],A);const I=d(e,["frequencyPenalty"]);I!=null&&f(o,["frequencyPenalty"],I);const M=d(e,["seed"]);M!=null&&f(o,["seed"],M);const x=d(e,["responseMimeType"]);x!=null&&f(o,["responseMimeType"],x);const O=d(e,["responseSchema"]);O!=null&&f(o,["responseSchema"],sp(O));const z=d(e,["responseJsonSchema"]);if(z!=null&&f(o,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=d(e,["safetySettings"]);if(n!==void 0&&B!=null){let oe=B;Array.isArray(oe)&&(oe=oe.map(Be=>CU(Be))),f(n,["safetySettings"],oe)}const Y=d(e,["tools"]);if(n!==void 0&&Y!=null){let oe=Js(Y);Array.isArray(oe)&&(oe=oe.map(Be=>wU(Ys(Be)))),f(n,["tools"],oe)}const X=d(e,["toolConfig"]);if(n!==void 0&&X!=null&&f(n,["toolConfig"],AU(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=d(e,["cachedContent"]);n!==void 0&&$!=null&&f(n,["cachedContent"],di(t,$));const J=d(e,["responseModalities"]);J!=null&&f(o,["responseModalities"],J);const fe=d(e,["mediaResolution"]);fe!=null&&f(o,["mediaResolution"],fe);const j=d(e,["speechConfig"]);if(j!=null&&f(o,["speechConfig"],rp(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=d(e,["thinkingConfig"]);ce!=null&&f(o,["thinkingConfig"],ce);const Z=d(e,["imageConfig"]);Z!=null&&f(o,["imageConfig"],hU(Z));const Se=d(e,["enableEnhancedCivicAnswers"]);return Se!=null&&f(o,["enableEnhancedCivicAnswers"],Se),o}function aU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>z2(p))),f(e,["candidates"],g)}const r=d(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function uU(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],Ks(t,o)),n}function cU(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],Ks(t,o)),n}function dU(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function fU(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function hU(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function pU(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["request","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let h=dn(r);Array.isArray(h)&&(h=h.map(g=>rC(g))),f(n,["request","contents"],h)}const a=d(e,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(e,["config"]);return c!=null&&f(n,["request","generationConfig"],lU(t,c,d(n,["request"],{}))),n}function mU(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],aU(n));const o=d(t,["error"]);return o!=null&&f(e,["error"],o),e}function gU(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function yU(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const a=d(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function _U(t){const e={},n=d(t,["config"]);return n!=null&&gU(n,e),e}function vU(t){const e={},n=d(t,["config"]);return n!=null&&yU(n,e),e}function EU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>ja(c))),f(e,["batchJobs"],a)}return e}function TU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>ih(c))),f(e,["batchJobs"],a)}return e}function SU(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],oU(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],sU(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],q2(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const v=d(t,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function CU(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function AU(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],rU(n));const o=d(t,["retrievalConfig"]);return o!=null&&f(e,["retrievalConfig"],o),e}function wU(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>v)),f(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const a=d(t,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],dU(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],fU(g));const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ai;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ai||(ai={}));class Lo{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bU extends ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lo(ai.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Z0(this.apiClient,e),o=n._url,r=Q("{model}:batchGenerateContent",o),h=n.batch.inputConfig.requests,g=h.requests,p=[];for(const _ of g){const v=Object.assign({},_);if(v.systemInstruction){const E=v.systemInstruction;delete v.systemInstruction;const A=v.request;A.systemInstruction=E,v.request=A}p.push(v)}return h.requests=p,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=W2(this.apiClient,e);return h=Q("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>ih(_))}else{const p=Z0(this.apiClient,e);return h=Q("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>ja(_))}}async createEmbeddingsInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=X2(this.apiClient,e);return a=Q("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>ja(g))}}async get(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=cU(this.apiClient,e);return h=Q("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>ih(_))}else{const p=uU(this.apiClient,e);return h=Q("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>ja(_))}}async cancel(e){var n,o,r,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=B2(this.apiClient,e);c=Q("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=F2(this.apiClient,e);c=Q("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vU(e);return h=Q("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=TU(_),E=new W0;return Object.assign(E,v),E})}else{const p=_U(e);return h=Q("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=EU(_),E=new W0;return Object.assign(E,v),E})}}async delete(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Z2(this.apiClient,e);return h=Q("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>eU(_))}else{const p=Q2(this.apiClient,e);return h=Q("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>j2(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function j0(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>XU(a))),f(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function NU(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=dn(c);Array.isArray(_)&&(_=_.map(v=>j0(v))),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],j0(At(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(v=>ZU(v))),f(e,["tools"],_)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],QU(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function RU(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=d(t,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=dn(c);Array.isArray(v)&&(v=v.map(E=>E)),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],At(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>jU(E))),f(e,["tools"],v)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const _=d(t,["kmsKeyName"]);return e!==void 0&&_!=null&&f(e,["encryption_spec","kmsKeyName"],_),n}function xU(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["model"],WS(t,o));const r=d(e,["config"]);return r!=null&&NU(r,n),n}function MU(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["model"],WS(t,o));const r=d(e,["config"]);return r!=null&&RU(r,n),n}function DU(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],di(t,o)),n}function kU(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],di(t,o)),n}function UU(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function LU(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function PU(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function OU(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HU(t){const e={},n=d(t,["mode"]);n!=null&&f(e,["mode"],n);const o=d(t,["allowedFunctionNames"]);if(o!=null&&f(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function VU(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&f(e,["description"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const r=d(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function GU(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],di(t,o)),n}function qU(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],di(t,o)),n}function FU(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function BU(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function zU(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function YU(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function JU(t){const e={},n=d(t,["config"]);return n!=null&&zU(n,e),e}function KU(t){const e={},n=d(t,["config"]);return n!=null&&YU(n,e),e}function WU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function $U(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function XU(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],PU(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],OU(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],IU(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const v=d(t,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function QU(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],HU(n));const o=d(t,["retrievalConfig"]);return o!=null&&f(e,["retrievalConfig"],o),e}function ZU(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>v)),f(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const a=d(t,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],FU(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],BU(g));const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function jU(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>VU(E))),f(e,["functionDeclarations"],v)}const o=d(t,["retrieval"]);o!=null&&f(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(t,["computerUse"]);if(a!=null&&f(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const _=d(t,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function eL(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function tL(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const r=d(t,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),n}function nL(t,e){const n={},o=d(e,["name"]);o!=null&&f(n,["_url","name"],di(t,o));const r=d(e,["config"]);return r!=null&&eL(r,n),n}function iL(t,e){const n={},o=d(e,["name"]);o!=null&&f(n,["_url","name"],di(t,o));const r=d(e,["config"]);return r!=null&&tL(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oL extends ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lo(ai.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=MU(this.apiClient,e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=xU(this.apiClient,e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qU(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=GU(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=kU(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=LU(_),E=new J0;return Object.assign(E,v),E})}else{const p=DU(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=UU(_),E=new J0;return Object.assign(E,v),E})}}async update(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iL(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=nL(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=KU(e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=$U(_),E=new K0;return Object.assign(E,v),E})}else{const p=JU(e);return h=Q("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=WU(_),E=new K0;return Object.assign(E,v),E})}}}function Su(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function eE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(t){return this instanceof de?(this.v=t,this):new de(t)}function Sn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(A){return function(I){return Promise.resolve(I).then(A,v)}}function h(A,I){o[A]&&(r[A]=function(M){return new Promise(function(x,O){a.push([A,M,x,O])>1||g(A,M)})},I&&(r[A]=I(r[A])))}function g(A,I){try{p(o[A](I))}catch(M){E(a[0][3],M)}}function p(A){A.value instanceof de?Promise.resolve(A.value.v).then(_,v):E(a[0][2],A)}function _(A){g("next",A)}function v(A){g("throw",A)}function E(A,I){A(I),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Cn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof eE=="function"?eE(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),r(h,g,c.done,c.value)})}}function r(a,c,h,g){Promise.resolve(g).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sL(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lC(n)}function lC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function rL(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function tE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let a=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),a&&!lC(t[o])&&(a=!1),o++;a?e.push(...r):e.pop()}return e}class lL{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new aL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class aL{constructor(e,n,o,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),rL(a)}async sendMessage(e){var n;await this.sendPromise;const o=At(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await r,p=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,_=g.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let E=[];_!=null&&(E=(h=_.slice(v))!==null&&h!==void 0?h:[]);const A=p?[p]:[];this.recordHistory(o,A,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=At(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,o)}getHistory(e=!1){const n=e?tE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Sn(this,arguments,function*(){var r,a,c,h,g,p;const _=[];try{for(var v=!0,E=Cn(e),A;A=yield de(E.next()),r=A.done,!r;v=!0){h=A.value,v=!1;const I=h;if(sL(I)){const M=(p=(g=I.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;M!==void 0&&_.push(M)}yield yield de(I)}}catch(I){a={error:I}}finally{try{!v&&!r&&(c=E.return)&&(yield de(c.call(E)))}finally{if(a)throw a.error}}this.recordHistory(n,_)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...tE(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Lu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uL(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function cL(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function dL(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],eC(n)),e}function fL(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function hL(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],eC(n)),e}function pL(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function mL(t){const e={},n=d(t,["config"]);return n!=null&&pL(n,e),e}function gL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yL extends ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lo(ai.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mL(e);return a=Q("files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=gL(g),_=new T2;return Object.assign(_,p),_})}}async createInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uL(e);return a=Q("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=cL(g),_=new S2;return Object.assign(_,p),_})}}async get(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hL(e);return a=Q("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dL(e);return a=Q("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=fL(g),_=new C2;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eu(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function _L(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UL(a))),f(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function vL(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function EL(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TL(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&f(e,["description"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const r=d(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function SL(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const _=d(t,["mediaResolution"]);_!=null&&f(e,["mediaResolution"],_);const v=d(t,["presencePenalty"]);v!=null&&f(e,["presencePenalty"],v);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const A=d(t,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const I=d(t,["responseModalities"]);I!=null&&f(e,["responseModalities"],I);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const x=d(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const O=d(t,["seed"]);O!=null&&f(e,["seed"],O);const z=d(t,["speechConfig"]);z!=null&&f(e,["speechConfig"],aC(z));const B=d(t,["stopSequences"]);B!=null&&f(e,["stopSequences"],B);const Y=d(t,["temperature"]);Y!=null&&f(e,["temperature"],Y);const X=d(t,["thinkingConfig"]);X!=null&&f(e,["thinkingConfig"],X);const $=d(t,["topK"]);$!=null&&f(e,["topK"],$);const J=d(t,["topP"]);if(J!=null&&f(e,["topP"],J),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function CL(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function AL(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function wL(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const v=d(t,["speechConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","speechConfig"],lp(v));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=d(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],_L(At(I)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let $=Js(M);Array.isArray($)&&($=$.map(J=>PL(Ys(J)))),f(e,["setup","tools"],$)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],LL(x));const O=d(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","inputAudioTranscription"],O);const z=d(t,["outputAudioTranscription"]);e!==void 0&&z!=null&&f(e,["setup","outputAudioTranscription"],z);const B=d(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&f(e,["setup","realtimeInputConfig"],B);const Y=d(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const X=d(t,["proactivity"]);if(e!==void 0&&X!=null&&f(e,["setup","proactivity"],X),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function bL(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],SL(o));const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const v=d(t,["speechConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","speechConfig"],aC(lp(v)));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=d(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],At(I));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let J=Js(M);Array.isArray(J)&&(J=J.map(fe=>OL(Ys(fe)))),f(e,["setup","tools"],J)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const O=d(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","inputAudioTranscription"],O);const z=d(t,["outputAudioTranscription"]);e!==void 0&&z!=null&&f(e,["setup","outputAudioTranscription"],z);const B=d(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&f(e,["setup","realtimeInputConfig"],B);const Y=d(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const X=d(t,["proactivity"]);e!==void 0&&X!=null&&f(e,["setup","proactivity"],X);const $=d(t,["explicitVadSignal"]);return e!==void 0&&$!=null&&f(e,["setup","explicitVadSignal"],$),n}function IL(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["setup","model"],Me(t,o));const r=d(e,["config"]);return r!=null&&f(n,["config"],wL(r,n)),n}function NL(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["setup","model"],Me(t,o));const r=d(e,["config"]);return r!=null&&f(n,["config"],bL(r,n)),n}function RL(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function xL(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["weightedPrompts"],o)}return e}function ML(t){const e={},n=d(t,["media"]);if(n!=null){let p=$S(n);Array.isArray(p)&&(p=p.map(_=>eu(_))),f(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],eu(QS(o)));const r=d(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=d(t,["video"]);a!=null&&f(e,["video"],eu(XS(a)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function DL(t){const e={},n=d(t,["media"]);if(n!=null){let p=$S(n);Array.isArray(p)&&(p=p.map(_=>_)),f(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],QS(o));const r=d(t,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const a=d(t,["video"]);a!=null&&f(e,["video"],XS(a));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function kL(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const o=d(t,["serverContent"]);o!=null&&f(e,["serverContent"],o);const r=d(t,["toolCall"]);r!=null&&f(e,["toolCall"],r);const a=d(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],a);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],HL(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);return p!=null&&f(e,["voiceActivityDetectionSignal"],p),e}function UL(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],vL(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],EL(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],eu(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const v=d(t,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function LL(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function aC(t){const e={},n=d(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],n);const o=d(t,["languageCode"]);if(o!=null&&f(e,["languageCode"],o),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function PL(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>v)),f(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const a=d(t,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],CL(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],AL(g));const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function OL(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>TL(E))),f(e,["functionDeclarations"],v)}const o=d(t,["retrieval"]);o!=null&&f(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(t,["computerUse"]);if(a!=null&&f(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const _=d(t,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function HL(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const o=d(t,["cachedContentTokenCount"]);o!=null&&f(e,["cachedContentTokenCount"],o);const r=d(t,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let A=g;Array.isArray(A)&&(A=A.map(I=>I)),f(e,["promptTokensDetails"],A)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(I=>I)),f(e,["cacheTokensDetails"],A)}const _=d(t,["candidatesTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(I=>I)),f(e,["responseTokensDetails"],A)}const v=d(t,["toolUsePromptTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(I=>I)),f(e,["toolUsePromptTokensDetails"],A)}const E=d(t,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VL(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function GL(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],qL(o));const r=d(t,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const _=d(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),f(e,["safetyRatings"],E)}const v=d(t,["urlContextMetadata"]);return v!=null&&f(e,["urlContextMetadata"],v),e}function qL(t){const e={},n=d(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),f(e,["citations"],o)}return e}function FL(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let a=dn(r);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["contents"],a)}return n}function BL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["tokensInfo"],r)}return e}function zL(t){const e={},n=d(t,["values"]);n!=null&&f(e,["values"],n);const o=d(t,["statistics"]);return o!=null&&f(e,["statistics"],YL(o)),e}function YL(t){const e={},n=d(t,["truncated"]);n!=null&&f(e,["truncated"],n);const o=d(t,["token_count"]);return o!=null&&f(e,["tokenCount"],o),e}function Pu(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>eO(a))),f(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function JL(t){const e={},n=d(t,["controlType"]);n!=null&&f(e,["controlType"],n);const o=d(t,["enableControlImageComputation"]);return o!=null&&f(e,["computeControl"],o),e}function KL(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function WL(t,e){const n={},o=d(t,["systemInstruction"]);e!==void 0&&o!=null&&f(e,["systemInstruction"],At(o));const r=d(t,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>hC(h))),f(e,["tools"],c)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],VP(a)),n}function $L(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let c=dn(r);Array.isArray(c)&&(c=c.map(h=>Pu(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&KL(a),n}function XL(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let c=dn(r);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&WL(a,n),n}function QL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["totalTokens"]);o!=null&&f(e,["totalTokens"],o);const r=d(t,["cachedContentTokenCount"]);return r!=null&&f(e,["cachedContentTokenCount"],r),e}function ZL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["totalTokens"]);return o!=null&&f(e,["totalTokens"],o),e}function jL(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],Me(t,o)),n}function eP(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],Me(t,o)),n}function tP(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function nP(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function iP(t,e){const n={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const v=d(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&f(e,["parameters","includeSafetyAttributes"],v);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=d(t,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const I=d(t,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const x=d(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const O=d(t,["labels"]);e!==void 0&&O!=null&&f(e,["labels"],O);const z=d(t,["editMode"]);e!==void 0&&z!=null&&f(e,["parameters","editMode"],z);const B=d(t,["baseSteps"]);return e!==void 0&&B!=null&&f(e,["parameters","editConfig","baseSteps"],B),n}function oP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=d(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>rO(g))),f(n,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&iP(c,n),n}function sP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Ou(a))),f(e,["generatedImages"],r)}return e}function rP(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function lP(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["instances[]","task_type"],o);const r=d(t,["title"]);e!==void 0&&r!=null&&f(e,["instances[]","title"],r);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function aP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let h=op(t,r);Array.isArray(h)&&(h=h.map(g=>g)),f(n,["requests[]","content"],h)}const a=d(e,["config"]);a!=null&&rP(a,n);const c=d(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],Me(t,c)),n}function uP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let c=op(t,r);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["instances[]","content"],c)}const a=d(e,["config"]);return a!=null&&lP(a,n),n}function cP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["embeddings"],a)}const r=d(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function dP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>zL(c))),f(e,["embeddings"],a)}const r=d(t,["metadata"]);return r!=null&&f(e,["metadata"],r),e}function fP(t){const e={},n=d(t,["endpoint"]);n!=null&&f(e,["name"],n);const o=d(t,["deployedModelId"]);return o!=null&&f(e,["deployedModelId"],o),e}function hP(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function pP(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mP(t){const e={},n=d(t,["mode"]);n!=null&&f(e,["mode"],n);const o=d(t,["allowedFunctionNames"]);if(o!=null&&f(e,["allowedFunctionNames"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gP(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&f(e,["description"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const r=d(t,["parameters"]);r!=null&&f(e,["parameters"],r);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function yP(t,e,n){const o={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],Pu(At(r)));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(o,["stopSequences"],_);const v=d(e,["responseLogprobs"]);v!=null&&f(o,["responseLogprobs"],v);const E=d(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&f(o,["presencePenalty"],A);const I=d(e,["frequencyPenalty"]);I!=null&&f(o,["frequencyPenalty"],I);const M=d(e,["seed"]);M!=null&&f(o,["seed"],M);const x=d(e,["responseMimeType"]);x!=null&&f(o,["responseMimeType"],x);const O=d(e,["responseSchema"]);O!=null&&f(o,["responseSchema"],sp(O));const z=d(e,["responseJsonSchema"]);if(z!=null&&f(o,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=d(e,["safetySettings"]);if(n!==void 0&&B!=null){let oe=B;Array.isArray(oe)&&(oe=oe.map(Be=>lO(Be))),f(n,["safetySettings"],oe)}const Y=d(e,["tools"]);if(n!==void 0&&Y!=null){let oe=Js(Y);Array.isArray(oe)&&(oe=oe.map(Be=>pO(Ys(Be)))),f(n,["tools"],oe)}const X=d(e,["toolConfig"]);if(n!==void 0&&X!=null&&f(n,["toolConfig"],hO(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=d(e,["cachedContent"]);n!==void 0&&$!=null&&f(n,["cachedContent"],di(t,$));const J=d(e,["responseModalities"]);J!=null&&f(o,["responseModalities"],J);const fe=d(e,["mediaResolution"]);fe!=null&&f(o,["mediaResolution"],fe);const j=d(e,["speechConfig"]);if(j!=null&&f(o,["speechConfig"],rp(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=d(e,["thinkingConfig"]);ce!=null&&f(o,["thinkingConfig"],ce);const Z=d(e,["imageConfig"]);Z!=null&&f(o,["imageConfig"],zP(Z));const Se=d(e,["enableEnhancedCivicAnswers"]);return Se!=null&&f(o,["enableEnhancedCivicAnswers"],Se),o}function _P(t,e,n){const o={},r=d(e,["systemInstruction"]);n!==void 0&&r!=null&&f(n,["systemInstruction"],At(r));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(o,["stopSequences"],_);const v=d(e,["responseLogprobs"]);v!=null&&f(o,["responseLogprobs"],v);const E=d(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const A=d(e,["presencePenalty"]);A!=null&&f(o,["presencePenalty"],A);const I=d(e,["frequencyPenalty"]);I!=null&&f(o,["frequencyPenalty"],I);const M=d(e,["seed"]);M!=null&&f(o,["seed"],M);const x=d(e,["responseMimeType"]);x!=null&&f(o,["responseMimeType"],x);const O=d(e,["responseSchema"]);O!=null&&f(o,["responseSchema"],sp(O));const z=d(e,["responseJsonSchema"]);z!=null&&f(o,["responseJsonSchema"],z);const B=d(e,["routingConfig"]);B!=null&&f(o,["routingConfig"],B);const Y=d(e,["modelSelectionConfig"]);Y!=null&&f(o,["modelConfig"],Y);const X=d(e,["safetySettings"]);if(n!==void 0&&X!=null){let P=X;Array.isArray(P)&&(P=P.map(q=>q)),f(n,["safetySettings"],P)}const $=d(e,["tools"]);if(n!==void 0&&$!=null){let P=Js($);Array.isArray(P)&&(P=P.map(q=>hC(Ys(q)))),f(n,["tools"],P)}const J=d(e,["toolConfig"]);n!==void 0&&J!=null&&f(n,["toolConfig"],J);const fe=d(e,["labels"]);n!==void 0&&fe!=null&&f(n,["labels"],fe);const j=d(e,["cachedContent"]);n!==void 0&&j!=null&&f(n,["cachedContent"],di(t,j));const ce=d(e,["responseModalities"]);ce!=null&&f(o,["responseModalities"],ce);const Z=d(e,["mediaResolution"]);Z!=null&&f(o,["mediaResolution"],Z);const Se=d(e,["speechConfig"]);Se!=null&&f(o,["speechConfig"],fC(rp(Se)));const oe=d(e,["audioTimestamp"]);oe!=null&&f(o,["audioTimestamp"],oe);const Be=d(e,["thinkingConfig"]);Be!=null&&f(o,["thinkingConfig"],Be);const lt=d(e,["imageConfig"]);if(lt!=null&&f(o,["imageConfig"],YP(lt)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function nE(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let c=dn(r);Array.isArray(c)&&(c=c.map(h=>Pu(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],yP(t,a,n)),n}function iE(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["contents"]);if(r!=null){let c=dn(r);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],_P(t,a,n)),n}function oE(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>GL(p))),f(e,["candidates"],g)}const r=d(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function sE(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(_=>_)),f(e,["candidates"],p)}const r=d(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function vP(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const _=d(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=d(t,["imageSize"]);if(e!==void 0&&A!=null&&f(e,["parameters","sampleImageSize"],A),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function EP(t,e){const n={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const r=d(t,["negativePrompt"]);e!==void 0&&r!=null&&f(e,["parameters","negativePrompt"],r);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const v=d(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&f(e,["parameters","includeSafetyAttributes"],v);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const A=d(t,["language"]);e!==void 0&&A!=null&&f(e,["parameters","language"],A);const I=d(t,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const x=d(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const O=d(t,["labels"]);e!==void 0&&O!=null&&f(e,["labels"],O);const z=d(t,["imageSize"]);e!==void 0&&z!=null&&f(e,["parameters","sampleImageSize"],z);const B=d(t,["enhancePrompt"]);return e!==void 0&&B!=null&&f(e,["parameters","enhancePrompt"],B),n}function TP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=d(e,["config"]);return a!=null&&vP(a,n),n}function SP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=d(e,["config"]);return a!=null&&EP(a,n),n}function CP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>LP(c))),f(e,["generatedImages"],a)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],cC(r)),e}function AP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Ou(c))),f(e,["generatedImages"],a)}const r=d(t,["positivePromptSafetyAttributes"]);return r!=null&&f(e,["positivePromptSafetyAttributes"],dC(r)),e}function wP(t,e){const n={},o=d(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(t,["durationSeconds"]);if(e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(t,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],Hu(_));const v=d(t,["referenceImages"]);if(e!==void 0&&v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>IO(A))),f(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function bP(t,e){const n={},o=d(t,["numberOfVideos"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const v=d(t,["pubsubTopic"]);e!==void 0&&v!=null&&f(e,["parameters","pubsubTopic"],v);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const A=d(t,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const I=d(t,["generateAudio"]);e!==void 0&&I!=null&&f(e,["parameters","generateAudio"],I);const M=d(t,["lastFrame"]);e!==void 0&&M!=null&&f(e,["instances[0]","lastFrame"],bn(M));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let B=x;Array.isArray(B)&&(B=B.map(Y=>NO(Y))),f(e,["instances[0]","referenceImages"],B)}const O=d(t,["mask"]);e!==void 0&&O!=null&&f(e,["instances[0]","mask"],bO(O));const z=d(t,["compressionQuality"]);return e!==void 0&&z!=null&&f(e,["parameters","compressionQuality"],z),n}function IP(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],MP(c)),e}function NP(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],DP(c)),e}function RP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],Hu(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],pC(c));const h=d(e,["source"]);h!=null&&kP(h,n);const g=d(e,["config"]);return g!=null&&wP(g,n),n}function xP(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["prompt"]);r!=null&&f(n,["instances[0]","prompt"],r);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],bn(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],mC(c));const h=d(e,["source"]);h!=null&&UP(h,n);const g=d(e,["config"]);return g!=null&&bP(g,n),n}function MP(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>OP(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function DP(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>HP(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const r=d(t,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function kP(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],Hu(r));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],pC(a)),n}function UP(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],bn(r));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],mC(a)),n}function LP(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],JP(n));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const r=d(t,["_self"]);return r!=null&&f(e,["safetyAttributes"],cC(r)),e}function Ou(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],uC(n));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const r=d(t,["_self"]);r!=null&&f(e,["safetyAttributes"],dC(r));const a=d(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function PP(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["mask"],uC(n));const o=d(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["labels"],r)}return e}function OP(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],AO(n)),e}function HP(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],wO(n)),e}function VP(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const r=d(t,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const _=d(t,["mediaResolution"]);_!=null&&f(e,["mediaResolution"],_);const v=d(t,["presencePenalty"]);v!=null&&f(e,["presencePenalty"],v);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const A=d(t,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const I=d(t,["responseModalities"]);I!=null&&f(e,["responseModalities"],I);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const x=d(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const O=d(t,["seed"]);O!=null&&f(e,["seed"],O);const z=d(t,["speechConfig"]);z!=null&&f(e,["speechConfig"],fC(z));const B=d(t,["stopSequences"]);B!=null&&f(e,["stopSequences"],B);const Y=d(t,["temperature"]);Y!=null&&f(e,["temperature"],Y);const X=d(t,["thinkingConfig"]);X!=null&&f(e,["thinkingConfig"],X);const $=d(t,["topK"]);$!=null&&f(e,["topK"],$);const J=d(t,["topP"]);if(J!=null&&f(e,["topP"],J),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GP(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],Me(t,o)),n}function qP(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],Me(t,o)),n}function FP(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function BP(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function zP(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YP(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const o=d(t,["imageSize"]);o!=null&&f(e,["imageSize"],o);const r=d(t,["outputMimeType"]);r!=null&&f(e,["imageOutputOptions","mimeType"],r);const a=d(t,["outputCompressionQuality"]);return a!=null&&f(e,["imageOutputOptions","compressionQuality"],a),e}function JP(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Qi(n));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function uC(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],Qi(o));const r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Hu(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Qi(n));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function bn(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const o=d(t,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],Qi(o));const r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function KP(t,e,n){const o={},r=d(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],tC(t,h)),o}function WP(t,e,n){const o={},r=d(e,["pageSize"]);n!==void 0&&r!=null&&f(n,["_query","pageSize"],r);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],tC(t,h)),o}function $P(t,e){const n={},o=d(e,["config"]);return o!=null&&KP(t,o,n),n}function XP(t,e){const n={},o=d(e,["config"]);return o!=null&&WP(t,o,n),n}function QP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["_self"]);if(r!=null){let a=nC(r);Array.isArray(a)&&(a=a.map(c=>oh(c))),f(e,["models"],a)}return e}function ZP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["_self"]);if(r!=null){let a=nC(r);Array.isArray(a)&&(a=a.map(c=>sh(c))),f(e,["models"],a)}return e}function jP(t){const e={},n=d(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const o=d(t,["segmentationClasses"]);o!=null&&f(e,["maskClasses"],o);const r=d(t,["maskDilation"]);return r!=null&&f(e,["dilation"],r),e}function oh(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const r=d(t,["description"]);r!=null&&f(e,["description"],r);const a=d(t,["version"]);a!=null&&f(e,["version"],a);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],mO(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const _=d(t,["temperature"]);_!=null&&f(e,["temperature"],_);const v=d(t,["maxTemperature"]);v!=null&&f(e,["maxTemperature"],v);const E=d(t,["topP"]);E!=null&&f(e,["topP"],E);const A=d(t,["topK"]);A!=null&&f(e,["topK"],A);const I=d(t,["thinking"]);return I!=null&&f(e,["thinking"],I),e}function sh(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const r=d(t,["description"]);r!=null&&f(e,["description"],r);const a=d(t,["versionId"]);a!=null&&f(e,["version"],a);const c=d(t,["deployedModels"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>fP(E))),f(e,["endpoints"],v)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],gO(g));const p=d(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const _=d(t,["checkpoints"]);if(_!=null){let v=_;Array.isArray(v)&&(v=v.map(E=>E)),f(e,["checkpoints"],v)}return e}function eO(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],hP(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],pP(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],VL(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const v=d(t,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function tO(t){const e={},n=d(t,["productImage"]);return n!=null&&f(e,["image"],bn(n)),e}function nO(t,e){const n={},o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const r=d(t,["baseSteps"]);e!==void 0&&r!=null&&f(e,["parameters","baseSteps"],r);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const v=d(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","compressionQuality"],v);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const A=d(t,["labels"]);return e!==void 0&&A!=null&&f(e,["labels"],A),n}function iO(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["source"]);r!=null&&sO(r,n);const a=d(e,["config"]);return a!=null&&nO(a,n),n}function oO(t){const e={},n=d(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Ou(r))),f(e,["generatedImages"],o)}return e}function sO(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const r=d(t,["personImage"]);e!==void 0&&r!=null&&f(e,["instances[0]","personImage","image"],bn(r));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>tO(h))),f(e,["instances[0]","productImages"],c)}return n}function rO(t){const e={},n=d(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],bn(n));const o=d(t,["referenceId"]);o!=null&&f(e,["referenceId"],o);const r=d(t,["referenceType"]);r!=null&&f(e,["referenceType"],r);const a=d(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],jP(a));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],JL(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function cC(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const r=d(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function dC(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const r=d(t,["contentType"]);return r!=null&&f(e,["contentType"],r),e}function lO(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function aO(t){const e={},n=d(t,["image"]);return n!=null&&f(e,["image"],bn(n)),e}function uO(t,e){const n={},o=d(t,["mode"]);e!==void 0&&o!=null&&f(e,["parameters","mode"],o);const r=d(t,["maxPredictions"]);e!==void 0&&r!=null&&f(e,["parameters","maxPredictions"],r);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","confidenceThreshold"],a);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),n}function cO(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["source"]);r!=null&&fO(r,n);const a=d(e,["config"]);return a!=null&&uO(a,n),n}function dO(t){const e={},n=d(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>PP(r))),f(e,["generatedMasks"],o)}return e}function fO(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const r=d(t,["image"]);e!==void 0&&r!=null&&f(e,["instances[0]","image"],bn(r));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&f(e,["instances[0]","scribble"],aO(a)),n}function fC(t){const e={},n=d(t,["voiceConfig"]);n!=null&&f(e,["voiceConfig"],n);const o=d(t,["languageCode"]);if(o!=null&&f(e,["languageCode"],o),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function hO(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],mP(n));const o=d(t,["retrievalConfig"]);return o!=null&&f(e,["retrievalConfig"],o),e}function pO(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>v)),f(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const a=d(t,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],FP(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],BP(g));const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function hC(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>gP(E))),f(e,["functionDeclarations"],v)}const o=d(t,["retrieval"]);o!=null&&f(e,["retrieval"],o);const r=d(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(t,["computerUse"]);if(a!=null&&f(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const _=d(t,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function mO(t){const e={},n=d(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const r=d(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function gO(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const r=d(t,["updateTime"]);return r!=null&&f(e,["updateTime"],r),e}function yO(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const r=d(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function _O(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const r=d(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function vO(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","name"],Me(t,o));const r=d(e,["config"]);return r!=null&&yO(r,n),n}function EO(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["config"]);return r!=null&&_O(r,n),n}function TO(t,e){const n={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const r=d(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const _=d(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const v=d(t,["labels"]);e!==void 0&&v!=null&&f(e,["labels"],v);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const A=d(t,["mode"]);return e!==void 0&&A!=null&&f(e,["parameters","mode"],A),n}function SO(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],Me(t,o));const r=d(e,["image"]);r!=null&&f(n,["instances[0]","image"],bn(r));const a=d(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=d(e,["config"]);return c!=null&&TO(c,n),n}function CO(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Ou(a))),f(e,["generatedImages"],r)}return e}function AO(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],Qi(o));const r=d(t,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function wO(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],Qi(o));const r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function bO(t){const e={},n=d(t,["image"]);n!=null&&f(e,["_self"],bn(n));const o=d(t,["maskMode"]);return o!=null&&f(e,["maskMode"],o),e}function IO(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Hu(n));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function NO(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],bn(n));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function pC(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const o=d(t,["videoBytes"]);o!=null&&f(e,["encodedVideo"],Qi(o));const r=d(t,["mimeType"]);return r!=null&&f(e,["encoding"],r),e}function mC(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const o=d(t,["videoBytes"]);o!=null&&f(e,["bytesBase64Encoded"],Qi(o));const r=d(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RO(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["displayName"],o),n}function xO(t){const e={},n=d(t,["config"]);return n!=null&&RO(n,e),e}function MO(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),n}function DO(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&MO(o,e),e}function kO(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function UO(t,e){const n={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["customMetadata"],a)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function LO(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const r=d(t,["done"]);r!=null&&f(e,["done"],r);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],OO(c)),e}function PO(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const o=d(t,["fileName"]);o!=null&&f(e,["fileName"],o);const r=d(t,["config"]);return r!=null&&UO(r,e),e}function OO(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const r=d(t,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function HO(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function VO(t){const e={},n=d(t,["config"]);return n!=null&&HO(n,e),e}function GO(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["fileSearchStores"],a)}return e}function gC(t,e){const n={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["mimeType"],o);const r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),n}function qO(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const o=d(t,["config"]);return o!=null&&gC(o,e),e}function FO(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BO="Content-Type",zO="X-Server-Timeout",YO="User-Agent",rh="x-goog-api-client",JO="1.33.0",KO=`google-genai-sdk/${JO}`,WO="v1beta1",$O="v1beta";class XO{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:WO,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:$O,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?o[r]=Object.assign(Object.assign({},o[r]),a):a!==void 0&&(o[r]=a);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){const a=new AbortController,c=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=c}return n&&n.extraBody!==null&&QO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await rE(r),new th(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await rE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Sn(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield de(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=a.decode(_,{stream:!0});try{const I=JSON.parse(v);if("error"in I){const M=JSON.parse(JSON.stringify(I.error)),x=M.status,O=M.code,z=`got status: ${x}. ${JSON.stringify(I)}`;if(O>=400&&O<600)throw new Lu({message:z,status:O})}}catch(I){if(I.name==="ApiError")throw I}c+=v;let E=-1,A=0;for(;;){E=-1,A=0;for(const x of g){const O=c.indexOf(x);O!==-1&&(E===-1||O<E)&&(E=O,A=x.length)}if(E===-1)break;const I=c.substring(0,E);c=c.substring(E+A);const M=I.trim();if(M.startsWith(h)){const x=M.substring(h.length).trim();try{const O=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield de(new th(O))}catch(O){throw new Error(`exception parsing stream chunk ${x}. ${O}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=KO+" "+this.clientOptions.userAgentExtra;return e[YO]=n,e[rh]=n,e[BO]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))o.append(r,a);e.timeout&&e.timeout>0&&o.append(zO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g={file:r},p=this.getFileName(e),_=Q("upload/v1beta/files",g._url),v=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,p,g,n==null?void 0:n.httpOptions);return a.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,o){var r;const a=this.clientOptions.uploader,c=await a.stat(n),h=String(c.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),v={};o!=null&&gC(o,v);const E=await this.fetchUploadUrl(p,h,g,_,v,o==null?void 0:o.httpOptions);return a.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function rE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new Lu({message:r,status:n}):new Error(r)}}function QO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],_=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?h[g]=o(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZO="mcp_used/unknown";let jO=!1;function yC(t){for(const e of t)if(e3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jO}function _C(t){var e;const n=(e=t[rh])!==null&&e!==void 0?e:"";t[rh]=(n+` ${ZO}`).trimStart()}function e3(t){return t!==null&&typeof t=="object"&&t instanceof ap}function t3(t){return Sn(this,arguments,function*(n,o=100){let r,a=0;for(;a<o;){const c=yield de(n.listTools({cursor:r}));for(const h of c.tools)yield yield de(h),a++;if(!c.nextCursor)break;r=c.nextCursor}})}class ap{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ap(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const _ of this.mcpClients)try{for(var h=!0,g=(n=void 0,Cn(t3(_))),p;p=await g.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const v=r;c.push(v);const E=v.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(v){n={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),k2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,a);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function n3(t,e,n){const o=new w2;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class i3{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=r3(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const _=new Promise(B=>{p=B}),v=e.callbacks,E=function(){p({})},A=this.apiClient,I={onopen:E,onmessage:B=>{n3(A,v.onmessage,B)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(B){},onclose:(o=v==null?void 0:v.onclose)!==null&&o!==void 0?o:function(B){}},M=this.webSocketFactory.create(g,s3(c),I);M.connect(),await _;const z={setup:{model:Me(this.apiClient,e.model)}};return M.send(JSON.stringify(z)),new o3(M,this.apiClient)}}class o3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xL(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=RL(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ws.PLAY)}pause(){this.sendPlaybackControl(ws.PAUSE)}stop(){this.sendPlaybackControl(ws.STOP)}resetContext(){this.sendPlaybackControl(ws.RESET_CONTEXT)}close(){this.conn.close()}}function s3(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function r3(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function a3(t,e,n){const o=new A2;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const c=kL(a);Object.assign(o,c)}else Object.assign(o,a);e(o)}class u3{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new i3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&yC(e.config.tools)&&_C(v);const E=h3(v);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_);else{const j=this.apiClient.getApiKey();let ce="BidiGenerateContent",Z="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ce="BidiGenerateContentConstrained",Z="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ce}?${Z}=${j}`}let A=()=>{};const I=new Promise(j=>{A=j}),M=e.callbacks,x=function(){var j;(j=M==null?void 0:M.onopen)===null||j===void 0||j.call(M),A({})},O=this.apiClient,z={onopen:x,onmessage:j=>{a3(O,M.onmessage,j)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(j){},onclose:(o=M==null?void 0:M.onclose)!==null&&o!==void 0?o:function(j){}},B=this.webSocketFactory.create(_,f3(E),z);B.connect(),await I;let Y=Me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const j=this.apiClient.getProject(),ce=this.apiClient.getLocation();Y=`projects/${j}/locations/${ce}/`+Y}let X={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[vu.AUDIO]}:e.config.responseModalities=[vu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],J=[];for(const j of $)if(this.isCallableTool(j)){const ce=j;J.push(await ce.tool())}else J.push(j);J.length>0&&(e.config.tools=J);const fe={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=NL(this.apiClient,fe):X=IL(this.apiClient,fe),delete X.config,B.send(JSON.stringify(X)),new d3(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const c3={turnComplete:!0};class d3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=dn(n.turns),e.isVertexAI()||(o=o.map(r=>Pu(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(l3)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},c3),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:DL(e)}:n={realtimeInput:ML(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function f3(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function h3(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lE=10;function aE(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ks(c)){r=!0;break}if(!r)return!0;const a=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ks(t){return"callTool"in t&&typeof t.callTool=="function"}function p3(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ks(r)))!==null&&o!==void 0?o:!1}function uE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(ks(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function cE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m3 extends ci{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!p3(n)||aE(n.config))return await this.generateContentInternal(g);const p=uE(n);if(p.length>0){const M=p.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let _,v;const E=dn(g.contents),A=(a=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:lE;let I=0;for(;I<A&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const M=_.candidates[0].content,x=[];for(const O of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(ks(O)){const B=await O.callTool(_.functionCalls);x.push(...B)}I++,v={role:"user",parts:x},g.contents=dn(g.contents),g.contents.push(M),g.contents.push(v),cE(g.config)&&(E.push(M),E.push(v))}return cE(g.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async n=>{var o,r,a,c,h;if(this.maybeMoveToResponseJsonSchem(n),aE(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const g=uE(n);if(g.length>0){const v=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let a;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Lo(ai.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,a,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>ks(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&yC(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),_C(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,o,r;const a=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ks(c)){const h=c,g=await h.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,o,r;const a=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:lE;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,_,v){return Sn(this,arguments,function*(){for(var E,A,I,M,x,O;h<a;){c&&(h++,c=!1);const X=yield de(p.processParamsMaybeAddMcpUsage(v)),$=yield de(p.generateContentStreamInternal(X)),J=[],fe=[];try{for(var z=!0,B=(A=void 0,Cn($)),Y;Y=yield de(B.next()),E=Y.done,!E;z=!0){M=Y.value,z=!1;const j=M;if(yield yield de(j),j.candidates&&(!((x=j.candidates[0])===null||x===void 0)&&x.content)){fe.push(j.candidates[0].content);for(const ce of(O=j.candidates[0].content.parts)!==null&&O!==void 0?O:[])if(h<a&&ce.functionCall){if(!ce.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(ce.functionCall.name)){const Z=yield de(_.get(ce.functionCall.name).callTool([ce.functionCall]));J.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${ce.functionCall.name}`)}}}}catch(j){A={error:j}}finally{try{!z&&!E&&(I=B.return)&&(yield de(I.call(B)))}finally{if(A)throw A.error}}if(J.length>0){c=!0;const j=new Kr;j.candidates=[{content:{role:"user",parts:J}}],yield yield de(j);const ce=[];ce.push(...fe),ce.push({role:"user",parts:J});const Z=dn(v.contents).concat(ce);v.contents=Z}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iE(this.apiClient,e);return h=Q("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=sE(_),E=new Kr;return Object.assign(E,v),E})}else{const p=nE(this.apiClient,e);return h=Q("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=oE(_),E=new Kr;return Object.assign(E,v),E})}}async generateContentStreamInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iE(this.apiClient,e);return h=Q("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(v){return Sn(this,arguments,function*(){var E,A,I,M;try{for(var x=!0,O=Cn(v),z;z=yield de(O.next()),E=z.done,!E;x=!0){M=z.value,x=!1;const B=M,Y=sE(yield de(B.json()));Y.sdkHttpResponse={headers:B.headers};const X=new Kr;Object.assign(X,Y),yield yield de(X)}}catch(B){A={error:B}}finally{try{!x&&!E&&(I=O.return)&&(yield de(I.call(O)))}finally{if(A)throw A.error}}})})}else{const p=nE(this.apiClient,e);return h=Q("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(v){return Sn(this,arguments,function*(){var E,A,I,M;try{for(var x=!0,O=Cn(v),z;z=yield de(O.next()),E=z.done,!E;x=!0){M=z.value,x=!1;const B=M,Y=oE(yield de(B.json()));Y.sdkHttpResponse={headers:B.headers};const X=new Kr;Object.assign(X,Y),yield yield de(X)}}catch(B){A={error:B}}finally{try{!x&&!E&&(I=O.return)&&(yield de(I.call(O)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=uP(this.apiClient,e);return h=Q("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=dP(_),E=new V0;return Object.assign(E,v),E})}else{const p=aP(this.apiClient,e);return h=Q("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=cP(_),E=new V0;return Object.assign(E,v),E})}}async generateImagesInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=SP(this.apiClient,e);return h=Q("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=AP(_),E=new G0;return Object.assign(E,v),E})}else{const p=TP(this.apiClient,e);return h=Q("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=CP(_),E=new G0;return Object.assign(E,v),E})}}async editImageInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=oP(this.apiClient,e);return a=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=sP(g),_=new h2;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=SO(this.apiClient,e);return a=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=CO(g),_=new p2;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=iO(this.apiClient,e);return a=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=oO(g),_=new m2;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=cO(this.apiClient,e);return a=Q("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=dO(g),_=new g2;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qP(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>sh(_))}else{const p=GP(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>oh(_))}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=XP(this.apiClient,e);return h=Q("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=ZP(_),E=new q0;return Object.assign(E,v),E})}else{const p=$P(this.apiClient,e);return h=Q("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=QP(_),E=new q0;return Object.assign(E,v),E})}}async update(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=EO(this.apiClient,e);return h=Q("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>sh(_))}else{const p=vO(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>oh(_))}}async delete(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=eP(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=nP(_),E=new F0;return Object.assign(E,v),E})}else{const p=jL(this.apiClient,e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=tP(_),E=new F0;return Object.assign(E,v),E})}}async countTokens(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=XL(this.apiClient,e);return h=Q("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=ZL(_),E=new B0;return Object.assign(E,v),E})}else{const p=$L(this.apiClient,e);return h=Q("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=QL(_),E=new B0;return Object.assign(E,v),E})}}async computeTokens(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=FL(this.apiClient,e);return a=Q("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=BL(g),_=new y2;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=xP(this.apiClient,e);return h=Q("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c.then(_=>{const v=NP(_),E=new Eu;return Object.assign(E,v),E})}else{const p=RP(this.apiClient,e);return h=Q("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const v=IP(_),E=new Eu;return Object.assign(E,v),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g3 extends ci{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=l2(e);return h=Q("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),c}else{const p=r2(e);return h=Q("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=jk(e);return a=Q("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y3(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function _3(t){const e={},n=d(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>I3(a))),f(e,["parts"],r)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function v3(t,e,n){const o={},r=d(e,["expireTime"]);n!==void 0&&r!=null&&f(n,["expireTime"],r);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=d(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=d(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],b3(t,h));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&f(n,["fieldMask"],g),o}function E3(t,e){const n={},o=d(e,["config"]);return o!=null&&f(n,["config"],v3(t,o,n)),n}function T3(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function S3(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const r=d(t,["name"]);if(r!=null&&f(e,["name"],r),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C3(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function A3(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function w3(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const r=d(t,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const v=d(t,["speechConfig"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","speechConfig"],lp(v));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const A=d(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const I=d(t,["systemInstruction"]);e!==void 0&&I!=null&&f(e,["setup","systemInstruction"],_3(At(I)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let $=Js(M);Array.isArray($)&&($=$.map(J=>R3(Ys(J)))),f(e,["setup","tools"],$)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],N3(x));const O=d(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&f(e,["setup","inputAudioTranscription"],O);const z=d(t,["outputAudioTranscription"]);e!==void 0&&z!=null&&f(e,["setup","outputAudioTranscription"],z);const B=d(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&f(e,["setup","realtimeInputConfig"],B);const Y=d(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const X=d(t,["proactivity"]);if(e!==void 0&&X!=null&&f(e,["setup","proactivity"],X),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function b3(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["setup","model"],Me(t,o));const r=d(e,["config"]);return r!=null&&f(n,["config"],w3(r,n)),n}function I3(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const r=d(t,["executableCode"]);r!=null&&f(e,["executableCode"],r);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],T3(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],S3(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],y3(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const v=d(t,["thoughtSignature"]);v!=null&&f(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function N3(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function R3(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(v=>v)),f(e,["functionDeclarations"],_)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const r=d(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);const a=d(t,["fileSearch"]);a!=null&&f(e,["fileSearch"],a);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],C3(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],A3(g));const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function M3(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=x3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class D3 extends ci{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=E3(this.apiClient,e);a=Q("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=M3(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k3(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),n}function U3(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&k3(o,e),e}function L3(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function P3(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const r=d(t,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),n}function O3(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const o=d(t,["config"]);return o!=null&&P3(o,e),e}function H3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const r=d(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V3 extends ci{constructor(e){super(),this.apiClient=e,this.list=async n=>new Lo(ai.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=L3(e);return a=Q("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U3(e);r=Q("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=O3(e);return a=Q("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=H3(g),_=new _2;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G3 extends ci{constructor(e,n=new V3(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Lo(ai.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xO(e);return a=Q("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kO(e);return a=Q("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,o;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=DO(e);r=Q("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=VO(e);return a=Q("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=GO(g),_=new v2;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qO(e);return a=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=FO(g),_=new E2;return Object.assign(_,p),_})}}async importFile(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=PO(e);return a=Q("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const p=LO(g),_=new np;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return vC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const q3=()=>vC();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lh(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ah=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hn extends Error{}class Rt extends hn{constructor(e,n,o,r){super(`${Rt.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new Vu({message:o,cause:ah(n)});const a=n;return e===400?new TC(e,a,o,r):e===401?new SC(e,a,o,r):e===403?new CC(e,a,o,r):e===404?new AC(e,a,o,r):e===409?new wC(e,a,o,r):e===422?new bC(e,a,o,r):e===429?new IC(e,a,o,r):e>=500?new NC(e,a,o,r):new Rt(e,a,o,r)}}class uh extends Rt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Vu extends Rt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class EC extends Vu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class TC extends Rt{}class SC extends Rt{}class CC extends Rt{}class AC extends Rt{}class wC extends Rt{}class bC extends Rt{}class IC extends Rt{}class NC extends Rt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F3=/^[a-z][a-z0-9+.-]*:/i,B3=t=>F3.test(t);let ch=t=>(ch=Array.isArray,ch(t));const z3=ch;let Y3=z3;const dE=Y3;function J3(t){if(!t)return!0;for(const e in t)return!1;return!0}function K3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const W3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new hn(`${t} must be an integer`);if(e<0)throw new hn(`${t} must be a positive integer`);return e},$3=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X3=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ts="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Z3=()=>{var t,e,n,o,r;const a=Q3();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ts,"X-Stainless-OS":hE(Deno.build.os),"X-Stainless-Arch":fE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ts,"X-Stainless-OS":hE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":fE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=j3();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ts,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function j3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,a=o[2]||0,c=o[3]||0;return{browser:e,version:`${r}.${a}.${c}`}}}return null}const fE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",hE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ba;const e4=()=>Ba??(Ba=Z3());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function RC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function n4(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return RC({start(){},async pull(n){const{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function xC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function i4(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o4=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Nf(t,e,n){return MC(),new File(t,e??"unknown_file",n)}function s4(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const r4=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",l4=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&DC(t),a4=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function u4(t,e,n){if(MC(),t=await t,l4(t))return t instanceof File?t:Nf([await t.arrayBuffer()],t.name);if(a4(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Nf(await dh(r),e,n)}const o=await dh(t);if(e||(e=s4(t)),!(n!=null&&n.type)){const r=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Nf(o,e,n)}async function dh(t){var e,n,o,r,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(DC(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(r4(t))try{for(var h=!0,g=Cn(t),p;p=await g.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const _=r;c.push(...await dh(_))}}catch(_){n={error:_}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const _=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${c4(t)}`)}return c}function c4(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kC{constructor(e){this._client=e}}kC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const pE=Object.freeze(Object.create(null)),d4=(t=UC)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const a=[],c=n.reduce((_,v,E)=>{var A,I,M;/[?#]/.test(v)&&(r=!0);const x=o[E];let O=(r?encodeURIComponent:t)(""+x);return E!==o.length&&(x==null||typeof x=="object"&&x.toString===((M=Object.getPrototypeOf((I=Object.getPrototypeOf((A=x.hasOwnProperty)!==null&&A!==void 0?A:pE))!==null&&I!==void 0?I:pE))===null||M===void 0?void 0:M.toString))&&(O=x+"",a.push({start:_.length+v.length,length:O.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),_+v+(E===o.length?"":O)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((_,v)=>_.start-v.start),a.length>0){let _=0;const v=a.reduce((E,A)=>{const I=" ".repeat(A.start-_),M="^".repeat(A.length);return _=A.start+A.length,E+I+M},"");throw new hn(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${c}
${v}`)}return c}),za=d4(UC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LC extends kC{create(e,n){var o;const{api_version:r=this._client.apiVersion}=e,a=Su(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new hn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new hn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(za`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(za`/${r}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(za`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;const a=n??{},{api_version:c=this._client.apiVersion}=a,h=Su(a,["api_version"]);return this._client.get(za`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}LC._key=Object.freeze(["interactions"]);class PC extends LC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f4(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return n}let Ya;function up(t){let e;return(Ya??(e=new globalThis.TextEncoder,Ya=e.encode.bind(e)))(t)}let Ja;function mE(t){let e;return(Ja??(e=new globalThis.TextDecoder,Ja=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gu{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?up(e):e;this.buffer=f4([this.buffer,n]);const o=[];let r;for(;(r=h4(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(mE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=mE(this.buffer.subarray(0,a));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Gu.NEWLINE_CHARS=new Set([`
`,"\r"]);Gu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function h4(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function p4(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cu={off:0,error:200,warn:300,info:400,debug:500},gE=(t,e,n)=>{if(t){if(K3(Cu,t))return t;It(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Cu))}`)}};function Xr(){}function Ka(t,e,n){return!e||Cu[t]>Cu[n]?Xr:e[t].bind(e)}const m4={error:Xr,warn:Xr,info:Xr,debug:Xr};let yE=new WeakMap;function It(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return m4;const r=yE.get(n);if(r&&r[0]===o)return r[1];const a={error:Ka("error",n,o),warn:Ka("warn",n,o),info:Ka("info",n,o),debug:Ka("debug",n,o)};return yE.set(n,[o,a]),a}const Eo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bs{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1;const a=o?It(o):console;function c(){return Sn(this,arguments,function*(){var g,p,_,v;if(r)throw new hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var A=!0,I=Cn(g4(e,n)),M;M=yield de(I.next()),g=M.done,!g;A=!0){v=M.value,A=!1;const x=v;if(!E)if(x.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield de(JSON.parse(x.data))}catch(O){throw a.error("Could not parse message into JSON:",x.data),a.error("From chunk:",x.raw),O}}}catch(x){p={error:x}}finally{try{!A&&!g&&(_=I.return)&&(yield de(_.call(I)))}finally{if(p)throw p.error}}E=!0}catch(x){if(lh(x))return yield de(void 0);throw x}finally{E||n.abort()}})}return new bs(c,n,o)}static fromReadableStream(e,n,o){let r=!1;function a(){return Sn(this,arguments,function*(){var g,p,_,v;const E=new Gu,A=xC(e);try{for(var I=!0,M=Cn(A),x;x=yield de(M.next()),g=x.done,!g;I=!0){v=x.value,I=!1;const O=v;for(const z of E.decode(O))yield yield de(z)}}catch(O){p={error:O}}finally{try{!I&&!g&&(_=M.return)&&(yield de(_.call(M)))}finally{if(p)throw p.error}}for(const O of E.flush())yield yield de(O)})}function c(){return Sn(this,arguments,function*(){var g,p,_,v;if(r)throw new hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var A=!0,I=Cn(a()),M;M=yield de(I.next()),g=M.done,!g;A=!0){v=M.value,A=!1;const x=v;E||x&&(yield yield de(JSON.parse(x)))}}catch(x){p={error:x}}finally{try{!A&&!g&&(_=I.return)&&(yield de(_.call(I)))}finally{if(p)throw p.error}}E=!0}catch(x){if(lh(x))return yield de(void 0);throw x}finally{E||n.abort()}})}return new bs(c,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),r=a=>({next:()=>{if(a.length===0){const c=o.next();e.push(c),n.push(c)}return a.shift()}});return[new bs(()=>r(e),this.controller,this.client),new bs(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return RC({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:a}=await n.next();if(a)return o.close();const c=up(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function g4(t,e){return Sn(this,arguments,function*(){var o,r,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new hn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new hn("Attempted to iterate over a response with no body");const h=new _4,g=new Gu,p=xC(t.body);try{for(var _=!0,v=Cn(y4(p)),E;E=yield de(v.next()),o=E.done,!o;_=!0){c=E.value,_=!1;const A=c;for(const I of g.decode(A)){const M=h.decode(I);M&&(yield yield de(M))}}}catch(A){r={error:A}}finally{try{!_&&!o&&(a=v.return)&&(yield de(a.call(v)))}finally{if(r)throw r.error}}for(const A of g.flush()){const I=h.decode(A);I&&(yield yield de(I))}})}function y4(t){return Sn(this,arguments,function*(){var n,o,r,a;let c=new Uint8Array;try{for(var h=!0,g=Cn(t),p;p=yield de(g.next()),n=p.done,!n;h=!0){a=p.value,h=!1;const _=a;if(_==null)continue;const v=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?up(_):_;let E=new Uint8Array(c.length+v.length);E.set(c),E.set(v,c.length),c=E;let A;for(;(A=p4(c))!==-1;)yield yield de(c.slice(0,A)),c=c.slice(A)}}catch(_){o={error:_}}finally{try{!h&&!n&&(r=g.return)&&(yield de(r.call(g)))}finally{if(o)throw o.error}}c.length>0&&(yield yield de(c))})}class _4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=v4(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function v4(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function E4(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return It(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):bs.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return It(t).debug(`[${o}] response parsed`,Eo({retryOfRequestLogID:r,url:n.url,status:n.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cp extends Promise{constructor(e,n,o=E4){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new cp(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OC=Symbol("brand.privateNullableHeaders");function*T4(t){if(!t)return;if(OC in t){const{values:o,nulls:r}=t;yield*o.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():dE(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=dE(o[1])?o[1]:[o[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,h])}}const Rf=t=>{const e=new Headers,n=new Set;for(const o of t){const r=new Set;for(const[a,c]of T4(o)){const h=a.toLowerCase();r.has(h)||(e.delete(a),r.add(h)),c===null?(e.delete(a),n.add(h)):(e.append(a,c),n.delete(h))}}return{[OC]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xf=t=>{var e,n,o,r,a,c;if(typeof globalThis.process<"u")return(o=(n=(e=Kk)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HC;class qu{constructor(e){var n,o,r,a,c,h,g,p=e===void 0?{}:e,{baseURL:_=xf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=xf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:E="v1beta"}=p,A=Su(p,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:E},A),{baseURL:_||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:qu.DEFAULT_TIMEOUT,this.logger=(r=I.logger)!==null&&r!==void 0?r:console;const M="warn";this.logLevel=M,this.logLevel=(c=(a=gE(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:gE(xf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:M,this.fetchOptions=I.fetchOptions,this.maxRetries=(h=I.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=I.fetch)!==null&&g!==void 0?g:t4(),this.encoder=o4,this._options=I,this.apiKey=v,this.apiVersion=E}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return Rf([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new hn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ts}`}defaultIdempotencyKey(){return`stainless-node-retry-${q3()}`}makeStatusError(e,n,o,r){return Rt.generate(e,n,o,r)}buildURL(e,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,a=B3(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return J3(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new cp(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var r,a,c;const h=await e,g=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:p,url:_,timeout:v}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(p,{url:_,options:h});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=o===void 0?"":`, retryOf: ${o}`,I=Date.now();if(It(this).debug(`[${E}] sending request`,Eo({retryOfRequestLogID:o,method:h.method,url:_,options:h,headers:p.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new uh;const M=new AbortController,x=await this.fetchWithTimeout(_,p,v,M).catch(ah),O=Date.now();if(x instanceof globalThis.Error){const B=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new uh;const Y=lh(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return It(this).info(`[${E}] connection ${Y?"timed out":"failed"} - ${B}`),It(this).debug(`[${E}] connection ${Y?"timed out":"failed"} (${B})`,Eo({retryOfRequestLogID:o,url:_,durationMs:O-I,message:x.message})),this.retryRequest(h,n,o??E);throw It(this).info(`[${E}] connection ${Y?"timed out":"failed"} - error; no more retries left`),It(this).debug(`[${E}] connection ${Y?"timed out":"failed"} (error; no more retries left)`,Eo({retryOfRequestLogID:o,url:_,durationMs:O-I,message:x.message})),Y?new EC:new Vu({cause:x})}const z=`[${E}${A}] ${p.method} ${_} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${O-I}ms`;if(!x.ok){const B=await this.shouldRetry(x);if(n&&B){const j=`retrying, ${n} attempts remaining`;return await i4(x.body),It(this).info(`${z} - ${j}`),It(this).debug(`[${E}] response error (${j})`,Eo({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:O-I})),this.retryRequest(h,n,o??E,x.headers)}const Y=B?"error; no more retries left":"error; not retryable";It(this).info(`${z} - ${Y}`);const X=await x.text().catch(j=>ah(j).message),$=$3(X),J=$?void 0:X;throw It(this).debug(`[${E}] response error (${Y})`,Eo({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,message:J,durationMs:Date.now()-I})),this.makeStatusError(x.status,$,J,x.headers)}return It(this).info(z),It(this).debug(`[${E}] response start`,Eo({retryOfRequestLogID:o,url:x.url,status:x.status,headers:x.headers,durationMs:O-I})),{response:x,options:h,controller:M,requestLogID:E,retryOfRequestLogID:o,startTime:I}}async fetchWithTimeout(e,n,o,r){const a=n||{},{signal:c,method:h}=a,g=Su(a,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),o),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,v=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);h&&(v.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,r){var a;let c;const h=r==null?void 0:r.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,p)}return await X3(c),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,r,a;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:_}=c,v=this.buildURL(g,p,_);"timeout"in c&&W3("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:E,body:A}=this.buildBody({options:c}),I=await this.buildHeaders({options:e,method:h,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:I},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:v,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=Rf([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),e4()),await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Rf([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:n4(e)}:this.encoder({body:e,headers:o})}}qu.DEFAULT_TIMEOUT=6e4;class ht extends qu{constructor(){super(...arguments),this.interactions=new PC(this)}}HC=ht;ht.GeminiNextGenAPIClient=HC;ht.GeminiNextGenAPIClientError=hn;ht.APIError=Rt;ht.APIConnectionError=Vu;ht.APIConnectionTimeoutError=EC;ht.APIUserAbortError=uh;ht.NotFoundError=AC;ht.ConflictError=wC;ht.RateLimitError=IC;ht.BadRequestError=TC;ht.AuthenticationError=SC;ht.InternalServerError=NC;ht.PermissionDeniedError=CC;ht.UnprocessableEntityError=bC;ht.toFile=u4;ht.Interactions=PC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S4(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function C4(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function A4(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(n,["sdkHttpResponse"],o),n}function w4(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(n,["sdkHttpResponse"],o),n}function b4(t,e,n){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","epochCount"],a);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function I4(t,e,n){const o={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=d(t,["validationDataset"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec"],_E(A))}else if(r==="PREFERENCE_TUNING"){const A=d(t,["validationDataset"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec"],_E(A))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&f(e,["tunedModelDisplayName"],a);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=d(t,["epochCount"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=d(t,["epochCount"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=d(t,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(g==="PREFERENCE_TUNING"){const A=d(t,["learningRateMultiplier"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=d(t,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(p==="PREFERENCE_TUNING"){const A=d(t,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let _=d(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const A=d(t,["adapterSize"]);e!==void 0&&A!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(_==="PREFERENCE_TUNING"){const A=d(t,["adapterSize"]);e!==void 0&&A!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=d(t,["labels"]);e!==void 0&&v!=null&&f(e,["labels"],v);const E=d(t,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),o}function N4(t,e){const n={},o=d(t,["baseModel"]);o!=null&&f(n,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const a=d(t,["trainingDataset"]);a!=null&&V4(a);const c=d(t,["config"]);return c!=null&&b4(c,n),n}function R4(t,e){const n={},o=d(t,["baseModel"]);o!=null&&f(n,["baseModel"],o);const r=d(t,["preTunedModel"]);r!=null&&f(n,["preTunedModel"],r);const a=d(t,["trainingDataset"]);a!=null&&G4(a,n,e);const c=d(t,["config"]);return c!=null&&I4(c,n,e),n}function x4(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function M4(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function D4(t,e,n){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function k4(t,e,n){const o={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function U4(t,e){const n={},o=d(t,["config"]);return o!=null&&D4(o,n),n}function L4(t,e){const n={},o=d(t,["config"]);return o!=null&&k4(o,n),n}function P4(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const a=d(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>VC(h))),f(n,["tuningJobs"],c)}return n}function O4(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const r=d(t,["nextPageToken"]);r!=null&&f(n,["nextPageToken"],r);const a=d(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>fh(h))),f(n,["tuningJobs"],c)}return n}function H4(t,e){const n={},o=d(t,["name"]);o!=null&&f(n,["model"],o);const r=d(t,["name"]);return r!=null&&f(n,["endpoint"],r),n}function V4(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),f(n,["examples","examples"],r)}return n}function G4(t,e,n){const o={};let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function VC(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const a=d(t,["state"]);a!=null&&f(n,["state"],jS(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const _=d(t,["description"]);_!=null&&f(n,["description"],_);const v=d(t,["baseModel"]);v!=null&&f(n,["baseModel"],v);const E=d(t,["_self"]);return E!=null&&f(n,["tunedModel"],H4(E)),n}function fh(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const a=d(t,["state"]);a!=null&&f(n,["state"],jS(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const _=d(t,["error"]);_!=null&&f(n,["error"],_);const v=d(t,["description"]);v!=null&&f(n,["description"],v);const E=d(t,["baseModel"]);E!=null&&f(n,["baseModel"],E);const A=d(t,["tunedModel"]);A!=null&&f(n,["tunedModel"],A);const I=d(t,["preTunedModel"]);I!=null&&f(n,["preTunedModel"],I);const M=d(t,["supervisedTuningSpec"]);M!=null&&f(n,["supervisedTuningSpec"],M);const x=d(t,["preferenceOptimizationSpec"]);x!=null&&f(n,["preferenceOptimizationSpec"],x);const O=d(t,["tuningDataStats"]);O!=null&&f(n,["tuningDataStats"],O);const z=d(t,["encryptionSpec"]);z!=null&&f(n,["encryptionSpec"],z);const B=d(t,["partnerModelTuningSpec"]);B!=null&&f(n,["partnerModelTuningSpec"],B);const Y=d(t,["customBaseModel"]);Y!=null&&f(n,["customBaseModel"],Y);const X=d(t,["experiment"]);X!=null&&f(n,["experiment"],X);const $=d(t,["labels"]);$!=null&&f(n,["labels"],$);const J=d(t,["outputUri"]);J!=null&&f(n,["outputUri"],J);const fe=d(t,["pipelineJob"]);fe!=null&&f(n,["pipelineJob"],fe);const j=d(t,["serviceAccount"]);j!=null&&f(n,["serviceAccount"],j);const ce=d(t,["tunedModelDisplayName"]);ce!=null&&f(n,["tunedModelDisplayName"],ce);const Z=d(t,["veoTuningSpec"]);return Z!=null&&f(n,["veoTuningSpec"],Z),n}function q4(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const r=d(t,["name"]);r!=null&&f(n,["name"],r);const a=d(t,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(t,["done"]);c!=null&&f(n,["done"],c);const h=d(t,["error"]);return h!=null&&f(n,["error"],h),n}function _E(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&f(n,["validationDatasetUri"],o);const r=d(t,["vertexDatasetResource"]);return r!=null&&f(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F4 extends ci{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lo(ai.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:eh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=M4(e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>fh(_))}else{const p=x4(e);return h=Q("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>VC(_))}}async listInternal(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=L4(e);return h=Q("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=O4(_),E=new z0;return Object.assign(E,v),E})}else{const p=U4(e);return h=Q("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=P4(_),E=new z0;return Object.assign(E,v),E})}}async cancel(e){var n,o,r,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=C4(e);return h=Q("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=w4(_),E=new Y0;return Object.assign(E,v),E})}else{const p=S4(e);return h=Q("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const v=A4(_),E=new Y0;return Object.assign(E,v),E})}}async tuneInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=R4(e,e);return a=Q("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>fh(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=N4(e);return a=Q("tunedModels",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>q4(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B4{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const z4=1024*1024*8,Y4=3,J4=1e3,K4=2,Au="x-goog-upload-status";async function W4(t,e,n){var o;const r=await GC(t,e,n),a=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Au])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function $4(t,e,n){var o;const r=await GC(t,e,n),a=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Au])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=KS(a),h=new ip;return Object.assign(h,c),h}async function GC(t,e,n){var o,r;let a=0,c=0,h=new th(new Response),g="upload";for(a=t.size;c<a;){const p=Math.min(z4,a-c),_=t.slice(c,c+p);c+p>=a&&(g+=", finalize");let v=0,E=J4;for(;v<Y4&&(h=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[Au]));)v++,await Q4(E),E=E*K4;if(c+=p,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[Au])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function X4(t){return{size:t.size,type:t.type}}function Q4(t){return new Promise(e=>setTimeout(e,t))}class Z4{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W4(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $4(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j4{create(e,n,o){return new e6(e,n,o)}}class e6{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vE="x-goog-api-key";class t6{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(vE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n6="gl-node/";class i6{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Qk(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new t6(this.apiKey);this.apiClient=new XO({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:n6+"web",uploader:new Z4,downloader:new B4}),this.models=new m3(this.apiClient),this.live=new u3(this.apiClient,r,new j4),this.batches=new bU(this.apiClient),this.chats=new lL(this.models,this.apiClient),this.caches=new oL(this.apiClient),this.files=new yL(this.apiClient),this.operations=new g3(this.apiClient),this.authTokens=new D3(this.apiClient),this.tunings=new F4(this.apiClient),this.fileSearchStores=new G3(this.apiClient)}}const o6=()=>new i6({apiKey:void 0}),s6=t=>{const n={he:"Hebrew ()",en:"English",fr:"French",it:"Italian",de:"German",pl:"Polish",da:"Danish",nl:"Dutch",es:"Spanish"}[t]||"English";return`
You are AVAN, a High-End Senior Frontend Architect.
You create ONLY Premium, Award-Winning, Modern websites. No basic designs.

CRITICAL RULE - LANGUAGE:
You MUST respond and generate content in **${n}**.
If the user's UI language is ${n}, your conversational response AND the generated website text (H1, p, buttons) MUST be in ${n}.

RULES:
1.  **Output**: Return a SINGLE HTML file with embedded CSS (Tailwind) and JS.
2.  **Style**: Use Tailwind CSS via CDN. Design must be Apple/Stripe quality.
    *   Use gradients, glassmorphism, large typography, whitespace, and subtle animations.
    *   Use Lucide Icons (via unpkg/lucide) or FontAwesome.
    *   Use Unsplash for images.
3.  **Iterative Workflow**:
    *   If provided with "Current Code", YOU MUST MODIFY IT based on the user request.
    *   Do not remove features unless asked. IMPROVE them.
4.  **Format**:
    *   ALWAYS wrap the code in \`\`\`html ... \`\`\` blocks.
    *   Keep your conversational response VERY SHORT (e.g., "Updated the design to dark mode.").

Technical Stack:
<script src="https://cdn.tailwindcss.com"><\/script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"><\/script>
<script>tailwind.config = { theme: { extend: { fontFamily: { sans: ['Heebo', 'Inter', 'sans-serif'] } } } }<\/script>
`},EE=async(t,e=[],n="",o="en")=>{try{const r=o6(),a="gemini-2.5-flash";let c=`User Request: ${t}

`;n&&n.length>50?(c+=`--- CURRENT CODE (MODIFY THIS) ---
${n}
----------------------------------
`,c+="INSTRUCTIONS: Apply the user's request to the code above. Return the FULL updated code. Remember to write content in the requested language."):c+="INSTRUCTIONS: Create a brand new PREMIUM website based on the request.";const h=await r.models.generateContent({model:a,config:{systemInstruction:s6(o),temperature:.7},contents:[...e.map(g=>({role:"user",parts:[{text:g}]})),{role:"user",parts:[{text:c}]}]});if(!h.text)throw new Error("Empty response");return h.text}catch(r){return console.error("Gemini API Error:",r.message),"Error: Unable to generate code. Please try again later."}},r6=({project:t,user:e,language:n,onBack:o,onOpenProfile:r,onOpenSettings:a})=>{const c=Uo[n],[h,g]=re.useState(()=>{const q=localStorage.getItem(`project_${t.id}_messages`);return q?JSON.parse(q):t.messages||[]}),[p,_]=re.useState(()=>localStorage.getItem(`project_${t.id}_code`)||t.currentCode||""),[v,E]=re.useState(""),[A,I]=re.useState(!1),M=re.useRef(null),x=re.useRef(null),[O,z]=re.useState("preview"),[B,Y]=re.useState(!1),[X,$]=re.useState(!1),[J,fe]=re.useState(t.name);re.useEffect(()=>{var q;(q=M.current)==null||q.scrollIntoView({behavior:"smooth"})},[h,A]),re.useEffect(()=>{localStorage.setItem(`project_${t.id}_messages`,JSON.stringify(h)),localStorage.setItem(`project_${t.id}_code`,p)},[h,p,t.id]),re.useEffect(()=>{(async()=>{if(h.length===1&&h[0].role==="user"&&!p&&!A){I(!0);const ee=h[0].text,le=await EE(ee,[],"",n);j(le)}})()},[]);const j=q=>{const ee=/```html\n([\s\S]*?)```|```([\s\S]*?)```/i,le=q.match(ee);let ge=q,w=null;le&&(w=le[1]||le[2],ge=q.replace(le[0],"").trim(),ge||(ge=c.websiteReady)),w&&(_(w),Y(!0),z("preview"));const V={id:(Date.now()+1).toString(),role:"model",text:ge,timestamp:Date.now()};g(K=>[...K,V]),I(!1)},ce=async()=>{if(!v.trim()||A)return;const q=v,ee={id:Date.now().toString(),role:"user",text:q,timestamp:Date.now()};g(w=>[...w,ee]),E(""),I(!0);const le=h.slice(-3).map(w=>w.text),ge=await EE(q,le,p,n);j(ge)},Z=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),ce())},Se=()=>{var q;(q=x.current)==null||q.click()},oe=q=>{var le;const ee=(le=q.target.files)==null?void 0:le[0];if(ee){const ge=new FileReader;ge.onload=w=>{var K;const V=(K=w.target)==null?void 0:K.result;E(ne=>ne+`

[FILE CONTENT: ${ee.name}]
${V}
[/FILE]
`)},ge.readAsText(ee)}},Be=()=>{navigator.clipboard.writeText(p),alert(c.copyCode+" OK")},lt=()=>{const q=new Blob([p],{type:"text/html"}),ee=URL.createObjectURL(q),le=document.createElement("a");le.href=ee,le.download="index.html",document.body.appendChild(le),le.click(),document.body.removeChild(le)},P=()=>{const q=localStorage.getItem("savedProjects");let ee=q?JSON.parse(q):[];ee=ee.filter(ge=>ge.id!==t.id);const le={...t,name:J||"Untitled Project",currentCode:p,messages:h};ee.unshift(le),localStorage.setItem("savedProjects",JSON.stringify(ee)),$(!1),alert(c.projectSaved)};return C.jsxs("div",{className:"flex flex-col h-screen bg-white dark:bg-gray-900 overflow-hidden relative font-heebo text-gray-900 dark:text-white",children:[C.jsxs("div",{className:"absolute top-0 left-0 right-0 h-20 z-40 flex items-center justify-between px-4 pt-4 bg-gradient-to-b from-white/90 dark:from-gray-900/90 to-transparent pointer-events-none",children:[C.jsx("div",{className:"pointer-events-auto",children:C.jsx("button",{onClick:o,className:"p-2 bg-gray-100 dark:bg-white/10 rounded-full text-gray-800 dark:text-white hover:bg-gray-200 dark:hover:bg-white/20",children:C.jsx(_u,{className:"w-5 h-5 rtl:rotate-180"})})}),C.jsx("div",{className:"pointer-events-auto flex items-center gap-3",children:C.jsxs("div",{className:"h-12 bg-white/80 dark:bg-black/60 backdrop-blur-xl rounded-full border border-gray-200 dark:border-white/10 flex items-center p-1 shadow-xl",children:[C.jsxs("button",{onClick:()=>{Y(!0),z("preview")},className:`px-6 h-full rounded-full text-sm font-medium transition-all flex items-center gap-2 ${O==="preview"&&B?"bg-blue-600 text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white"}`,children:[C.jsx(Qf,{className:"w-4 h-4"}),C.jsx("span",{className:"hidden sm:inline",children:c.preview})]}),C.jsxs("button",{onClick:()=>{Y(!0),z("code")},className:`px-6 h-full rounded-full text-sm font-medium transition-all flex items-center gap-2 ${O==="code"&&B?"bg-purple-600 text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white"}`,children:[C.jsx(BS,{className:"w-4 h-4"}),C.jsx("span",{className:"hidden sm:inline",children:c.code})]})]})}),C.jsxs("div",{className:"pointer-events-auto flex items-center gap-2",children:[C.jsx("button",{onClick:a,className:"p-2 bg-gray-100 dark:bg-white/10 rounded-full text-gray-800 dark:text-white hover:bg-gray-200 dark:hover:bg-white/20",children:C.jsx(JS,{className:"w-5 h-5"})}),C.jsx("button",{onClick:a,className:"w-10 h-10 rounded-full border border-gray-300 dark:border-white/20 overflow-hidden",children:e.photoURL?C.jsx("img",{src:e.photoURL,className:"w-full h-full object-cover"}):C.jsx("div",{className:"bg-indigo-600 w-full h-full flex items-center justify-center",children:C.jsx(ep,{className:"w-5 h-5 text-white"})})})]})]}),C.jsxs("div",{className:`fixed inset-0 z-[60] flex flex-col bg-white dark:bg-[#1e1e1e] transition-all duration-300 transform ${B?"translate-y-0 opacity-100":"translate-y-full opacity-0 pointer-events-none"}`,children:[C.jsxs("div",{className:"h-14 flex items-center justify-between px-4 bg-gray-100 dark:bg-black/40 border-b border-gray-200 dark:border-white/5",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition",children:C.jsx(_u,{className:"w-5 h-5 text-gray-600 dark:text-gray-300 rtl:rotate-180"})}),C.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-200",children:O==="preview"?c.preview:c.code})]}),O==="code"&&C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:Be,title:c.copyCode,className:"p-2 hover:bg-white/10 rounded-lg text-gray-600 dark:text-gray-300",children:C.jsx(XD,{className:"w-5 h-5"})}),C.jsx("button",{onClick:lt,title:c.downloadCode,className:"p-2 hover:bg-white/10 rounded-lg text-gray-600 dark:text-gray-300",children:C.jsx(ek,{className:"w-5 h-5"})}),C.jsxs("button",{onClick:()=>$(!0),title:c.saveProject,className:"p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center gap-2",children:[C.jsx(YS,{className:"w-4 h-4"}),C.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:c.save})]})]}),O==="preview"&&C.jsxs("div",{className:"flex bg-gray-200 dark:bg-white/10 rounded-lg p-1",children:[C.jsx("button",{onClick:()=>z("preview"),className:`px-3 py-1 rounded-md text-sm transition ${O==="preview"?"bg-white dark:bg-gray-700 shadow text-black dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:c.preview}),C.jsx("button",{onClick:()=>z("code"),className:`px-3 py-1 rounded-md text-sm transition ${O==="code"?"bg-white dark:bg-gray-700 shadow text-black dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:c.code})]})]}),C.jsx("div",{className:"flex-1 relative overflow-hidden",children:O==="preview"?C.jsx("iframe",{title:"preview",srcDoc:p,className:"w-full h-full border-none bg-white",sandbox:"allow-scripts"}):C.jsx("div",{className:"w-full h-full overflow-auto custom-scrollbar p-4",children:C.jsx("pre",{className:"font-mono text-sm text-gray-800 dark:text-gray-300 whitespace-pre-wrap",children:p})})})]}),X&&C.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:C.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl p-6 shadow-2xl animate-in zoom-in-95",children:[C.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:c.saveProject}),C.jsx("input",{type:"text",value:J,onChange:q=>fe(q.target.value),placeholder:c.projectNamePlaceholder,className:"w-full p-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white mb-6 focus:ring-2 focus:ring-blue-500 outline-none"}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:()=>$(!1),className:"flex-1 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-xl font-medium",children:c.cancel}),C.jsx("button",{onClick:P,className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-medium",children:c.save})]})]})}),C.jsx("div",{className:"flex-1 flex flex-col pt-20 pb-24 relative overflow-hidden",children:C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar",children:[h.length===0&&C.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-gray-400 dark:text-gray-600 opacity-50",children:[C.jsx(Dk,{className:"w-16 h-16 mb-4"}),C.jsx("p",{children:c.describeProject})]}),h.map(q=>C.jsx("div",{className:`flex ${q.role==="user"?"justify-start":"justify-end"}`,children:C.jsx("div",{className:`max-w-[85%] p-4 rounded-2xl text-sm shadow-sm ${q.role==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 dark:bg-white/10 text-gray-800 dark:text-gray-200 rounded-bl-sm border border-gray-200 dark:border-white/5"}`,children:q.text.split("[FILE CONTENT:").map((ee,le)=>le===0?ee:`
[File Attached]`).join("")})},q.id)),A&&C.jsx("div",{className:"flex justify-end w-full",children:C.jsxs("div",{className:"bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/5 px-6 py-4 rounded-2xl rounded-bl-none flex items-center gap-3",children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 bg-blue-500 blur-md opacity-20 animate-pulse rounded-full"}),C.jsx(Qf,{className:"w-6 h-6 text-blue-500 animate-pulse"})]}),C.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide animate-pulse",children:c.generating})]})}),C.jsx("div",{ref:M})]})}),C.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-gray-900/95 backdrop-blur-xl border-t border-gray-200 dark:border-white/10 p-4 z-30 pb-6 sm:pb-4",children:C.jsxs("div",{className:"max-w-4xl mx-auto relative flex items-end bg-gray-100 dark:bg-black/40 rounded-3xl border border-gray-200 dark:border-white/10 p-1.5 shadow-lg",children:[C.jsx("input",{type:"file",ref:x,className:"hidden",onChange:oe,accept:".html,.css,.js,.txt,.json,.ts,.tsx"}),C.jsx("button",{onClick:Se,disabled:A,className:"p-3 text-gray-500 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition",children:C.jsx(Sk,{className:"w-5 h-5"})}),C.jsx("textarea",{value:v,onChange:q=>E(q.target.value),onKeyDown:Z,placeholder:A?c.generating:c.typeRequest,disabled:A,className:"flex-1 p-3 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none h-12 max-h-32 focus:outline-none custom-scrollbar disabled:opacity-50"}),C.jsx("button",{onClick:ce,disabled:!v.trim()||A,className:"m-1 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-500 disabled:bg-gray-300 dark:disabled:bg-gray-700 transition-all shadow-md",children:C.jsx(Ik,{className:"w-5 h-5 ml-0.5"})})]})})]})},l6=({isOpen:t,onClose:e,settings:n,setSettings:o,language:r,initialTab:a,user:c,onLogout:h})=>{const g=Uo[r],[p,_]=re.useState("MENU"),[v,E]=re.useState((c==null?void 0:c.displayName)||""),[A,I]=re.useState((c==null?void 0:c.photoURL)||""),[M,x]=re.useState("NONE"),[O,z]=re.useState(""),[B,Y]=re.useState(""),[X,$]=re.useState(""),[J,fe]=re.useState(!1),[j,ce]=re.useState(""),[Z,Se]=re.useState([{role:"bot",text:g.help_bot_placeholder}]);re.useEffect(()=>{t&&(_("MENU"),E((c==null?void 0:c.displayName)||""),I((c==null?void 0:c.photoURL)||""),x("NONE"),z(""),Y(""),$(""))},[t,c]);const oe=async()=>{if(un.currentUser)try{await gT(un.currentUser,{displayName:v,photoURL:A}),alert("Profile updated successfully!"),window.location.reload()}catch{alert("Error updating profile")}},Be=async()=>{if(!un.currentUser||!un.currentUser.email)return;const w=Mo.credential(un.currentUser.email,O);await rR(un.currentUser,w)},lt=async()=>{$(""),fe(!0);try{await Be(),await cR(un.currentUser,B),alert("Password changed successfully."),x("NONE"),z(""),Y("")}catch(w){console.error(w),$("Error: Incorrect current password or weak new password.")}finally{fe(!1)}},P=async()=>{$(""),fe(!0);try{await Be(),await gR(un.currentUser),h()}catch(w){console.error(w),$("Error: Incorrect password. Cannot delete account.")}finally{fe(!1)}},q=w=>{o({...n,[w]:!n[w]})},ee=()=>{o({...n,largeText:!1,wordSpacing:!1,letterSpacing:!1,grayscale:!1,invertColors:!1,highlightLinks:!1,bigCursor:!1,readingGuide:!1,hideImages:!1,readableFont:!1})},le=w=>{if(w.preventDefault(),!j.trim())return;const V=[...Z,{role:"user",text:j}];V.push({role:"bot",text:"Thank you for your question. Support will check this issue."}),Se(V),ce("")};if(!t)return null;const ge=()=>C.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-6 border-b border-gray-200 dark:border-white/10 flex flex-col items-center text-center relative",children:[C.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-gray-200 dark:bg-white/10 rounded-full",children:C.jsx(Zf,{className:"w-5 h-5 text-gray-800 dark:text-white"})}),C.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-xl mb-3",children:c!=null&&c.photoURL?C.jsx("img",{src:c.photoURL,className:"w-full h-full object-cover"}):C.jsx("div",{className:"bg-indigo-600 w-full h-full flex items-center justify-center",children:C.jsx(ep,{className:"w-10 h-10 text-white"})})}),C.jsx("h2",{className:"text-2xl font-bold",children:(c==null?void 0:c.displayName)||"Guest"}),C.jsx("p",{className:"text-gray-500 mb-4",children:c==null?void 0:c.email}),C.jsx("button",{onClick:()=>_("PROFILE"),className:"px-6 py-2 bg-blue-600 text-white rounded-full font-bold shadow-md hover:bg-blue-500 transition",children:"Profile Details"})]});return C.jsxs("div",{className:"fixed inset-0 z-[100] bg-white dark:bg-gray-900 font-heebo overflow-hidden flex flex-col",children:[p==="MENU"&&ge(),p!=="MENU"&&C.jsxs("div",{className:"h-16 flex items-center px-4 border-b border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-white/5",children:[C.jsx("button",{onClick:()=>_("MENU"),className:"p-2 mr-2 bg-gray-200 dark:bg-white/10 rounded-full rtl:rotate-180",children:C.jsx(UD,{className:"w-5 h-5"})}),C.jsx("h2",{className:"text-xl font-bold uppercase tracking-wider",children:p==="GENERAL"?g.general:p==="ACCESSIBILITY"?g.accessibility:p==="PROFILE"?"Profile Details":g.help}),C.jsx("div",{className:"flex-1"}),C.jsx("button",{onClick:e,children:C.jsx(Zf,{className:"w-6 h-6"})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar bg-white dark:bg-[#0f0f0f]",children:[p==="MENU"&&C.jsxs("div",{className:"max-w-lg mx-auto space-y-4 pt-4",children:[C.jsxs("button",{onClick:()=>_("GENERAL"),className:"w-full p-5 bg-gray-50 dark:bg-white/5 rounded-2xl flex items-center justify-between hover:bg-gray-100 dark:hover:bg-white/10 transition",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 text-blue-600 rounded-xl",children:C.jsx(_k,{className:"w-6 h-6"})}),C.jsxs("div",{className:"text-left rtl:text-right",children:[C.jsx("h3",{className:"font-bold text-lg",children:g.general}),C.jsx("p",{className:"text-sm text-gray-500",children:"Language, Sound, Theme"})]})]}),C.jsx(If,{className:"w-5 h-5 text-gray-400 rtl:rotate-180"})]}),C.jsxs("button",{onClick:()=>_("ACCESSIBILITY"),className:"w-full p-5 bg-gray-50 dark:bg-white/5 rounded-2xl flex items-center justify-between hover:bg-gray-100 dark:hover:bg-white/10 transition",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-xl",children:C.jsx(Qf,{className:"w-6 h-6"})}),C.jsxs("div",{className:"text-left rtl:text-right",children:[C.jsx("h3",{className:"font-bold text-lg",children:g.accessibility}),C.jsx("p",{className:"text-sm text-gray-500",children:"10 Accessibility Tools"})]})]}),C.jsx(If,{className:"w-5 h-5 text-gray-400 rtl:rotate-180"})]}),C.jsxs("button",{onClick:()=>_("HELP"),className:"w-full p-5 bg-gray-50 dark:bg-white/5 rounded-2xl flex items-center justify-between hover:bg-gray-100 dark:hover:bg-white/10 transition",children:[C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-xl",children:C.jsx(YD,{className:"w-6 h-6"})}),C.jsxs("div",{className:"text-left rtl:text-right",children:[C.jsx("h3",{className:"font-bold text-lg",children:g.help}),C.jsx("p",{className:"text-sm text-gray-500",children:"Support Bot, FAQ"})]})]}),C.jsx(If,{className:"w-5 h-5 text-gray-400 rtl:rotate-180"})]}),C.jsx("div",{className:"pt-8",children:C.jsxs("button",{onClick:h,className:"w-full py-4 text-red-500 bg-red-50 dark:bg-red-900/10 rounded-2xl font-bold flex items-center justify-center gap-2",children:[C.jsx(ck,{className:"w-5 h-5"}),g.logout]})})]}),p==="PROFILE"&&C.jsxs("div",{className:"max-w-xl mx-auto space-y-8",children:[C.jsxs("section",{className:"bg-gray-50 dark:bg-white/5 p-6 rounded-3xl space-y-4",children:[C.jsx("h3",{className:"font-bold text-lg mb-4",children:"Update Details"}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Display Name"}),C.jsx("input",{value:v,onChange:w=>E(w.target.value),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/20"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Photo URL"}),C.jsx("input",{value:A,onChange:w=>I(w.target.value),className:"w-full p-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/20"})]}),C.jsxs("button",{onClick:oe,className:"w-full py-3 bg-blue-600 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[C.jsx(YS,{className:"w-4 h-4"})," Save Details"]})]}),C.jsxs("section",{className:"bg-gray-50 dark:bg-white/5 p-6 rounded-3xl",children:[C.jsx("h3",{className:"font-bold text-lg mb-4",children:"Security"}),M!=="CHANGE_PASSWORD"?C.jsxs("button",{onClick:()=>x("CHANGE_PASSWORD"),className:"w-full py-3 bg-gray-200 dark:bg-white/10 text-gray-900 dark:text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[C.jsx(ak,{className:"w-4 h-4"})," Change Password"]}):C.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-4",children:C.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800",children:[C.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"Please verify your current password to set a new one."}),C.jsx("input",{type:"password",placeholder:"Current Password",value:O,onChange:w=>z(w.target.value),className:"w-full p-3 mb-2 rounded-lg border border-gray-300 dark:border-white/10 bg-white dark:bg-black/20"}),C.jsx("input",{type:"password",placeholder:"New Password",value:B,onChange:w=>Y(w.target.value),className:"w-full p-3 rounded-lg border border-gray-300 dark:border-white/10 bg-white dark:bg-black/20"}),X&&C.jsx("p",{className:"text-red-500 text-sm mt-2",children:X}),C.jsxs("div",{className:"flex gap-2 mt-4",children:[C.jsx("button",{onClick:()=>x("NONE"),className:"flex-1 py-2 bg-gray-300 dark:bg-white/10 rounded-lg",children:"Cancel"}),C.jsx("button",{onClick:lt,disabled:J,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg",children:J?"...":"Update Password"})]})]})})]}),C.jsxs("section",{className:"bg-red-50 dark:bg-red-900/10 p-6 rounded-3xl border border-red-100 dark:border-red-900/30",children:[C.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600 dark:text-red-400",children:"Danger Zone"}),M!=="DELETE_ACCOUNT"?C.jsxs("button",{onClick:()=>x("DELETE_ACCOUNT"),className:"w-full py-3 bg-white dark:bg-red-900/20 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-800 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-red-50 dark:hover:bg-red-900/30",children:[C.jsx(Lk,{className:"w-4 h-4"})," Delete Account"]}):C.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-4",children:C.jsxs("div",{className:"p-4 bg-white dark:bg-black/20 rounded-xl border border-red-200 dark:border-red-800",children:[C.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-bold mb-2",children:[C.jsx(Ok,{className:"w-5 h-5"})," Warning"]}),C.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:["This action is irreversible. All your projects and data will be permanently deleted.",C.jsx("br",{}),C.jsx("br",{}),C.jsx("strong",{children:"Enter your password to confirm deletion:"})]}),C.jsx("input",{type:"password",placeholder:"Current Password",value:O,onChange:w=>z(w.target.value),className:"w-full p-3 rounded-lg border border-red-300 dark:border-red-900 bg-white dark:bg-black/20"}),X&&C.jsx("p",{className:"text-red-500 text-sm mt-2",children:X}),C.jsxs("div",{className:"flex gap-2 mt-4",children:[C.jsx("button",{onClick:()=>x("NONE"),className:"flex-1 py-2 bg-gray-300 dark:bg-white/10 rounded-lg",children:"Cancel"}),C.jsx("button",{onClick:P,disabled:J,className:"flex-1 py-2 bg-red-600 text-white rounded-lg",children:J?"Deleting...":"Confirm Delete"})]})]})})]})]}),p==="GENERAL"&&C.jsxs("div",{className:"max-w-xl mx-auto space-y-6",children:[C.jsxs("section",{className:"bg-gray-50 dark:bg-white/5 p-6 rounded-3xl",children:[C.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[C.jsx(Vv,{className:"w-5 h-5"})," ",g.theme]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("button",{onClick:()=>o({...n,theme:"light"}),className:`p-4 rounded-xl border-2 flex items-center justify-center gap-2 ${n.theme==="light"?"border-blue-500 bg-white dark:bg-transparent text-blue-500":"border-transparent bg-gray-200 dark:bg-white/10"}`,children:[C.jsx(Vv,{className:"w-5 h-5"})," ",g.light]}),C.jsxs("button",{onClick:()=>o({...n,theme:"dark"}),className:`p-4 rounded-xl border-2 flex items-center justify-center gap-2 ${n.theme==="dark"?"border-purple-500 bg-white dark:bg-transparent text-purple-500":"border-transparent bg-gray-200 dark:bg-white/10"}`,children:[C.jsx(Ov,{className:"w-5 h-5"})," ",g.dark]})]})]}),C.jsxs("section",{className:"bg-gray-50 dark:bg-white/5 p-6 rounded-3xl flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[n.soundEnabled?C.jsx(qk,{className:"w-6 h-6 text-green-500"}):C.jsx(Bk,{className:"w-6 h-6 text-gray-400"}),C.jsx("span",{className:"font-bold text-lg",children:"Sound Effects"})]}),C.jsx("button",{onClick:()=>o({...n,soundEnabled:!n.soundEnabled}),className:`w-14 h-8 rounded-full relative transition-colors ${n.soundEnabled?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:C.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-all shadow-sm ${n.soundEnabled?"left-7":"left-1"}`})})]})]}),p==="ACCESSIBILITY"&&C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsx("div",{className:"flex justify-end mb-4",children:C.jsx("button",{onClick:ee,className:"text-sm font-bold text-blue-500 underline",children:g.acc_reset})}),C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[{k:"largeText",l:g.acc_largeText,i:Fa},{k:"wordSpacing",l:g.acc_wordSpacing,i:Fa},{k:"letterSpacing",l:g.acc_letterSpacing,i:Fa},{k:"grayscale",l:g.acc_grayscale,i:Lv},{k:"invertColors",l:g.acc_invertColors,i:Ov},{k:"highlightLinks",l:g.acc_highlightLinks,i:Hv},{k:"bigCursor",l:g.acc_bigCursor,i:Hv},{k:"readingGuide",l:g.acc_readingGuide,i:a6},{k:"hideImages",l:g.acc_hideImages,i:Lv},{k:"readableFont",l:g.acc_readableFont,i:Fa}].map(w=>C.jsxs("button",{onClick:()=>q(w.k),className:`p-6 rounded-2xl border transition-all flex items-center gap-4 text-left ${n[w.k]?"bg-blue-600 text-white border-blue-600 shadow-xl":"bg-gray-50 dark:bg-white/5 border-gray-200 dark:border-white/10 hover:border-blue-400"}`,children:[C.jsx(w.i,{className:"w-6 h-6"}),C.jsx("span",{className:"font-bold",children:w.l})]},w.k))})]}),p==="HELP"&&C.jsxs("div",{className:"max-w-2xl mx-auto h-full flex flex-col",children:[C.jsxs("div",{className:"flex-1 bg-gray-50 dark:bg-white/5 rounded-3xl p-6 border border-gray-200 dark:border-white/10 mb-6 flex flex-col min-h-[300px]",children:[C.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 custom-scrollbar",children:Z.map((w,V)=>C.jsx("div",{className:`flex ${w.role==="user"?"justify-end":"justify-start"}`,children:C.jsx("div",{className:`p-4 rounded-2xl max-w-[80%] ${w.role==="user"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-white/10"}`,children:w.text})},V))}),C.jsxs("form",{onSubmit:le,className:"flex gap-2",children:[C.jsx("input",{value:j,onChange:w=>ce(w.target.value),placeholder:g.typeRequest,className:"flex-1 p-4 rounded-xl border dark:border-white/10 bg-white dark:bg-black/20"}),C.jsx("button",{type:"submit",className:"p-4 bg-blue-600 text-white rounded-xl hover:bg-blue-500",children:C.jsx(gk,{className:"w-6 h-6"})})]})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("h4",{className:"font-bold text-gray-400 uppercase text-sm",children:g.help_common_problems}),C.jsxs("button",{className:"w-full text-left p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-transparent hover:border-gray-200 flex justify-between",children:[g.help_q1," ",C.jsx(Pv,{className:"w-4 h-4 opacity-50"})]}),C.jsxs("button",{className:"w-full text-left p-4 bg-gray-50 dark:bg-white/5 rounded-xl border border-transparent hover:border-gray-200 flex justify-between",children:[g.help_q2," ",C.jsx(Pv,{className:"w-4 h-4 opacity-50"})]})]})]})]})]})},a6=({className:t})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:C.jsx("path",{d:"M5 12h14"})}),u6=({isOpen:t,onClose:e,language:n,onNewChat:o,onHistory:r})=>{const a=Uo[n];return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),C.jsx("div",{className:`fixed top-0 ${n==="he"?"right-0":"left-0"} h-full w-80 bg-gray-900/95 backdrop-blur-xl border-${n==="he"?"l":"r"} border-white/10 shadow-2xl z-50 transform transition-transform duration-300 ${t?"translate-x-0":n==="he"?"translate-x-full":"-translate-x-full"}`,children:C.jsxs("div",{className:"p-6 h-full flex flex-col",children:[C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsx("h2",{className:"text-2xl font-black text-white tracking-widest",children:"AVAN"}),C.jsx("button",{onClick:e,className:"p-2 bg-white/5 rounded-full hover:bg-white/10 text-white transition",children:C.jsx(Zf,{className:"w-6 h-6"})})]}),C.jsxs("div",{className:"space-y-3 flex-1",children:[C.jsxs("button",{onClick:()=>{o(),e()},className:"w-full p-4 flex items-center gap-4 bg-gradient-to-r from-blue-600/20 to-purple-600/20 hover:from-blue-600/30 hover:to-purple-600/30 border border-blue-500/30 rounded-2xl text-blue-100 transition-all group",children:[C.jsx("div",{className:"p-2 bg-blue-500 rounded-lg group-hover:scale-110 transition-transform",children:C.jsx(pk,{className:"w-5 h-5 text-white"})}),C.jsx("span",{className:"font-medium text-lg",children:a.newChat})]}),C.jsxs("div",{className:"pt-6 space-y-3",children:[C.jsx("h3",{className:"text-gray-500 text-sm font-medium mb-2 uppercase tracking-wider px-2",children:a.projects}),C.jsxs("button",{className:"w-full p-3 flex items-center gap-3 text-gray-300 hover:bg-white/5 rounded-xl transition",children:[C.jsx(KD,{className:"w-5 h-5 text-gray-500"}),C.jsx("span",{children:a.prevProjects})]}),C.jsxs("button",{onClick:()=>{r(),e()},className:"w-full p-4 mt-4 flex items-center gap-4 bg-gray-800 border border-gray-700 rounded-2xl text-white hover:bg-gray-700 transition shadow-lg relative overflow-hidden group",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),C.jsx(zS,{className:"w-6 h-6 text-purple-400"}),C.jsx("span",{className:"font-bold tracking-wide",children:a.fullHistory})]})]})]})]})})]})},c6=({user:t,onOpenMenu:e,onOpenProfile:n,onOpenSettings:o,onGoHome:r})=>C.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 bg-transparent z-40 flex items-center justify-between px-6 pt-4",children:[C.jsx("button",{onClick:e,className:"p-2 bg-white/20 dark:bg-white/10 rounded-full text-gray-900 dark:text-white hover:bg-white/40 dark:hover:bg-white/20 transition backdrop-blur-md",children:C.jsx(fk,{className:"w-6 h-6"})}),C.jsx("div",{onClick:r,className:"text-2xl font-black text-gray-900 dark:text-white cursor-pointer select-none tracking-wider drop-shadow-sm",children:"AVAN"}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("button",{onClick:o,className:"p-2 bg-white/20 dark:bg-white/10 rounded-full text-gray-900 dark:text-white hover:bg-white/40 dark:hover:bg-white/20 transition backdrop-blur-md",children:C.jsx(JS,{className:"w-6 h-6"})}),C.jsx("button",{onClick:o,className:"w-10 h-10 rounded-full overflow-hidden border-2 border-white/50 dark:border-white/20 shadow-lg hover:border-white transition",children:t.photoURL?C.jsx("img",{src:t.photoURL,alt:"User",className:"w-full h-full object-cover"}):C.jsx("div",{className:"w-full h-full bg-indigo-500 flex items-center justify-center text-white",children:C.jsx(ep,{className:"w-5 h-5"})})})]})]}),d6=()=>{const[t,e]=re.useState(null),[n,o]=re.useState(!0),[r,a]=re.useState(ke.WELCOME),[c,h]=re.useState("en"),[g,p]=re.useState(null),[_,v]=re.useState([]),[E,A]=re.useState(""),[I,M]=re.useState(!1),[x,O]=re.useState("general"),[z,B]=re.useState(!1),[Y,X]=re.useState(()=>{const Z={theme:"dark",soundEnabled:!0,largeText:!1,wordSpacing:!1,letterSpacing:!1,grayscale:!1,invertColors:!1,highlightLinks:!1,bigCursor:!1,readingGuide:!1,hideImages:!1,readableFont:!1,highContrast:!1,reduceMotion:!1,screenReaderOptimized:!1};try{const Se=localStorage.getItem("avan_settings");return Se?{...Z,...JSON.parse(Se)}:Z}catch{return Z}});re.useEffect(()=>{localStorage.setItem("avan_settings",JSON.stringify(Y));const Z=document.documentElement;Y.theme==="dark"?Z.classList.add("dark"):Z.classList.remove("dark"),Z.classList.toggle("text-lg-mode",Y.largeText),Z.classList.toggle("word-spacing-mode",Y.wordSpacing),Z.classList.toggle("letter-spacing-mode",Y.letterSpacing),Z.classList.toggle("grayscale-mode",Y.grayscale),Z.classList.toggle("invert-mode",Y.invertColors),Z.classList.toggle("highlight-links-mode",Y.highlightLinks),Z.classList.toggle("big-cursor-mode",Y.bigCursor),Z.classList.toggle("hide-images-mode",Y.hideImages),Z.classList.toggle("readable-font-mode",Y.readableFont);const Se="reading-guide-line";let oe=document.getElementById(Se);Y.readingGuide?(oe||(oe=document.createElement("div"),oe.id=Se,oe.style.position="fixed",oe.style.height="4px",oe.style.width="100%",oe.style.backgroundColor="red",oe.style.zIndex="99999",oe.style.pointerEvents="none",document.body.appendChild(oe),window.addEventListener("mousemove",Be=>{oe&&(oe.style.top=`${Be.clientY}px`)})),oe.style.display="block"):oe&&(oe.style.display="none")},[Y]),re.useEffect(()=>{const Z=localStorage.getItem("avan_language");Z&&h(Z);const Se=pR(un,oe=>{oe?(e({uid:oe.uid,email:oe.email,displayName:oe.displayName,photoURL:oe.photoURL}),(r===ke.WELCOME||r===ke.AUTH)&&a(ke.HOME)):(e(null),r!==ke.WELCOME&&r!==ke.AUTH&&a(ke.WELCOME)),o(!1)});return()=>Se()},[]),re.useEffect(()=>{localStorage.setItem("avan_language",c),document.documentElement.dir=c==="he"||c==="ar"?"rtl":"ltr",document.documentElement.lang=c},[c]),re.useEffect(()=>{if(r===ke.HISTORY){const Z=localStorage.getItem("savedProjects");v(Z?JSON.parse(Z):[])}},[r]);const $=()=>{if(!E.trim())return;const Z={id:Date.now().toString(),name:E.substring(0,20)+"...",createdAt:Date.now(),messages:[{id:"init",role:"user",text:E,timestamp:Date.now()}]};p(Z),a(ke.PROJECT),A("")},J=Z=>{p(Z),a(ke.PROJECT)},fe=async()=>{await mR(un),e(null),a(ke.WELCOME),p(null),B(!1),M(!1)},j=(Z="general")=>{O(Z),M(!0)};if(n)return C.jsx("div",{className:"h-screen flex items-center justify-center bg-white dark:bg-gray-900 text-black dark:text-white",children:C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})});if(r===ke.WELCOME)return C.jsx(Yk,{currentLanguage:c,setLanguage:h,onStart:()=>a(ke.AUTH)});if(r===ke.AUTH)return C.jsx(Jk,{language:c,onBack:()=>a(ke.WELCOME),onSuccessRegister:()=>a(ke.TERMS),onSuccessLogin:()=>a(ke.HOME)});if(r===ke.TERMS)return C.jsx(Gv,{view:"TERMS",language:c,onNext:()=>a(ke.SETUP_COMPLETE)});if(r===ke.SETUP_COMPLETE)return C.jsx(Gv,{view:"SETUP_COMPLETE",language:c,onNext:()=>a(ke.HOME)});const ce=Uo[c];return C.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-white dark:bg-gray-900 text-gray-900 dark:text-white transition-colors duration-300 font-heebo",children:[C.jsx("style",{children:`
        .text-lg-mode * { font-size: 110% !important; }
        .word-spacing-mode * { word-spacing: 0.16em !important; }
        .letter-spacing-mode * { letter-spacing: 0.05em !important; }
        .grayscale-mode { filter: grayscale(100%); }
        .invert-mode { filter: invert(100%); background: #111; }
        .highlight-links-mode a, .highlight-links-mode button { text-decoration: underline !important; color: #ffff00 !important; background-color: #000 !important; }
        .big-cursor-mode { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="black" stroke="white" stroke-width="2"><path d="M5.5 1l7.5 19l2.5-7.5l7.5-2.5l-19-7.5z"/></svg>') 16 16, auto !important; }
        .hide-images-mode img, .hide-images-mode video { display: none !important; }
        .readable-font-mode * { font-family: Arial, Helvetica, sans-serif !important; }
      `}),r!==ke.PROJECT&&C.jsx(c6,{user:t,onOpenMenu:()=>B(!0),onOpenProfile:()=>j("profile"),onOpenSettings:()=>j("general"),onGoHome:()=>a(ke.HOME)}),r===ke.HOME&&C.jsxs("main",{className:"h-screen w-full relative flex flex-col items-center justify-center",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 via-purple-50 to-white dark:from-indigo-900 dark:via-purple-900 dark:to-black animate-gradient-x opacity-100 z-0"}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 z-0 mix-blend-overlay"}),C.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 mb-32",children:[C.jsx("h1",{className:"text-4xl font-light text-gray-700 dark:text-white/90",children:ce.hello}),C.jsx("h2",{className:"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-500 dark:from-blue-300 dark:to-pink-300",children:(t==null?void 0:t.displayName)||"Avan User"})]}),C.jsx("div",{className:"fixed bottom-10 left-0 right-0 px-6 z-20 flex justify-center w-full",children:C.jsxs("div",{className:"w-full max-w-2xl p-2 rounded-[2rem] flex items-center gap-2 bg-white/50 dark:bg-gray-900/40 backdrop-blur-xl border border-gray-200 dark:border-white/10 shadow-2xl",children:[C.jsx("input",{type:"text",value:E,onChange:Z=>A(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&$(),placeholder:ce.typeRequest,className:"flex-1 bg-transparent border-none outline-none text-gray-900 dark:text-white px-4 py-3 text-lg placeholder-gray-500 dark:placeholder-gray-400"}),C.jsx("button",{onClick:$,className:"w-12 h-12 bg-gray-900 dark:bg-white rounded-full flex items-center justify-center text-white dark:text-purple-900 hover:scale-110 active:scale-95 transition-transform shadow-lg",children:C.jsx(PD,{className:"w-6 h-6"})})]})})]}),r===ke.PROJECT&&g&&C.jsx(r6,{project:g,user:t,language:c,onBack:()=>a(ke.HOME),onOpenProfile:()=>j("profile"),onOpenSettings:()=>j("general")}),r===ke.HISTORY&&C.jsx("div",{className:"h-screen w-full bg-gray-50 dark:bg-gray-900 pt-20 px-4 text-gray-900 dark:text-white overflow-y-auto",children:C.jsxs("div",{className:"max-w-3xl mx-auto",children:[C.jsxs("div",{className:"flex items-center gap-4 mb-6 px-2",children:[C.jsx("button",{onClick:()=>a(ke.HOME),className:"p-2 bg-gray-200 dark:bg-white/10 rounded-full text-gray-900 dark:text-white",children:C.jsx(_u,{className:"w-5 h-5 rtl:rotate-180"})}),C.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ce.fullHistory})]}),C.jsx("div",{className:"grid gap-4 pb-24",children:_.length>0?_.map(Z=>C.jsxs("div",{onClick:()=>J(Z),className:"p-6 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-2xl flex flex-col gap-2 hover:shadow-lg transition cursor-pointer group",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-blue-500 transition",children:Z.name}),C.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-white/10 px-2 py-1 rounded-full",children:new Date(Z.createdAt).toLocaleDateString()})]}),C.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-1",children:[C.jsx(BS,{className:"w-3 h-3"}),C.jsx("span",{children:Z.currentCode?"Includes Code":"Draft"})]})]},Z.id)):C.jsxs("div",{className:"text-center py-20 text-gray-400",children:[C.jsx(zS,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),C.jsx("p",{children:ce.noHistory})]})})]})}),C.jsx(u6,{isOpen:z,onClose:()=>B(!1),language:c,onNewChat:()=>{p(null),a(ke.HOME),A("")},onHistory:()=>a(ke.HISTORY)}),C.jsx(l6,{isOpen:I,onClose:()=>M(!1),settings:Y,setSettings:X,language:c,initialTab:x,user:t,onLogout:fe})]})},TE=document.getElementById("root");TE&&Tb.createRoot(TE).render(C.jsx(pb.StrictMode,{children:C.jsx(d6,{})}));
